"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[58919],{__fusion__45:(e,t,i)=>{i.r(t),i.d(t,{default:()=>$t});var o=i("__fusion__476"),n=i(94813),r=i(14016),l=i(46933),a=i(53683),d=i(91931),s=i(59924);const c=(0,d.zo)("li",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,padding:"24px"}})),p=e=>{let{getItemProps:t}=e;return(0,s.tZ)(c,{...t({index:0}),children:(0,s.tZ)(l.v,{id:"shared.hmmCantFindThisAddress"})})};var g=i(94579),h=i(78422);const u=(0,d.zo)("li",(e=>({backgroundColor:e.$isHighlighted?e.$theme.colors.backgroundSecondary:"transparent",padding:e.$isTagged?"16px 24px":"0",display:"flex",cursor:"pointer",transition:g.pB.itemBackground,outline:"none",":hover":{background:e.$theme.colors.backgroundSecondary}}))),m=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{alignSelf:"center",padding:`0 ${t.sizing.scale700}`}})),y=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{minWidth:0,display:"flex",flexDirection:"column",flexGrow:1,borderBottom:`1px solid ${t.colors.borderOpaque}`,padding:`${t.sizing.scale600} 0 `}})),v=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelLarge,textOverflow:"ellipsis",overflow:"hidden"}})),Z=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentSecondary,textOverflow:"ellipsis",overflow:"hidden"}})),f=e=>{const[,t]=(0,d.hQ)();return(0,s.BX)(u,{$isHighlighted:e.highlightedIndex===e.index,...e.getItemProps({index:e.index}),children:[(0,s.tZ)(m,{children:(0,s.tZ)(h.Z,{name:"LocationMarkerOutlined",size:"24",color:t.colors.contentTertiary})}),(0,s.BX)(y,{children:[(0,s.tZ)(v,{children:e.location.addressLine1}),(0,s.tZ)(Z,{children:e.location.addressLine2})]})]})},_=(0,d.zo)("ul",(e=>{let{$theme:t}=e;return{background:t.colors.backgroundPrimary,margin:"0 -24px"}})),D=e=>{let t=null;return e.isOpen&&(t=e.showTryAgainMessage?(0,s.tZ)(p,{getItemProps:e.getItemProps}):e.locations.map(((t,i)=>(0,s.tZ)(f,{index:i,location:t,getItemProps:e.getItemProps,highlightedIndex:e.highlightedIndex},i)))),(0,s.tZ)(_,{...e.getMenuProps(),children:t})};var T=i(48402),I=i(69404),L=i(74369),z=i(40606),b=i(62851),x=i(71996),$=i(43406),S=i(63649),P=i(43779),k=i(45142),C=i(37573),E=i(40832),B=i(7708),w=i(90200),O=i(81282),R=i(33535),X=i(92703),V=i(93685),M=i(26336);const A=(0,d.zo)("h1",(e=>{let{$theme:t}=e;return{...t.typography.HeadingLarge,marginBottom:"16px"}})),H=(0,d.zo)("span",g.E2),N=(0,d.zo)("div",{marginBottom:"12px"}),F=(0,d.w1)(b.U,{marginBottom:"24px"}),U=(0,d.w1)(x.Z,{paddingTop:0}),Y=(0,d.w1)(b.U,{height:"48px",marginBottom:"12px"}),q=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,marginBottom:"8px"}})),j=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,marginBottom:"8px",marginTop:"24px"}})),G=(0,d.zo)("div",{display:"flex",justifyContent:"center"});function W(e){const{instructionsDraft:t,updateInstructionsDraft:i,updateLocationDraft:o}=(0,E.a8)(),n=(0,r.T)(),a=(0,R.ZP)(),{guestCheckoutEnabled:d}=(0,C.Z)(),c=e.overrideDiningMode,p=e.selectedDeliveryLocation?.address?.label||"",[g,h]=(0,L.useState)(p);(0,L.useEffect)((()=>{h(p)}),[p]);const[u,m]=(0,L.useState)(!1),y=(0,k.Z)();(0,L.useEffect)((()=>{o(e.ephemeralLocation)}),[e.ephemeralLocation,o]);const v=()=>m(!1);if(u)return(0,s.tZ)(V.Z,{onRemoveAddress:e.onRemoveAddress,onKeepAddress:v});return(0,s.BX)(s.HY,{children:[(0,s.tZ)(A,{children:(0,s.tZ)(X.Z,{diningMode:c,pickup:(0,s.tZ)(l.v,{id:"components.checkout.pickup_details"}),delivery:(0,s.tZ)(l.v,{id:"components.checkout.delivery_details"}),dineIn:(0,s.tZ)(l.v,{id:"components.checkout.dine_in_details"})})}),(0,s.BX)(F,{children:[(0,s.tZ)(U,{iconType:"Pin",children:e.ephemeralLocation?.address?.eaterFormattedAddress||e.ephemeralLocation?.address?.address1||""}),(0,s.tZ)(H,{children:n("shared.changeAddress")})]}),"DELIVERY"===c||"SHIPMENT"===c?(0,s.BX)(s.HY,{children:[(0,s.tZ)(q,{children:(0,s.tZ)(l.v,{id:"components.delivery.delivery_options"})}),(0,s.tZ)(z.Z,{source:e.ephemeralLocationInstruction,loaded:e=>{let{availableInteractionTypes:o}=e;return(0,s.tZ)(N,{children:1===o.length?(0,s.tZ)(Y,{children:y(o[0])}):(0,s.tZ)(P.Z,{customIcon:(0,s.tZ)(M.Z,{interactionType:t.interactionType}),onChange:e=>{i("interactionType",e.target.value),a("eats:delivery_preference_switch",{option:e.target.value}),e.currentTarget&&e.currentTarget.focus()},value:t.interactionType,ariaLabel:n("shared.selectdeliverymethod"),"data-testid":"drop-off-select",children:o.map((e=>(0,s.tZ)(P.W,{value:e,children:y(e)},e)))})})},loading:()=>(0,s.tZ)(Y,{}),error:()=>(0,s.tZ)(Y,{})}),(0,s.tZ)(z.Z,{source:e.ephemeralLocationInstruction,loaded:()=>"door_to_door"===t.interactionType||"leave_at_door"===t.interactionType?(0,s.BX)(s.HY,{children:[(0,s.tZ)(N,{children:(0,s.tZ)($.Z,{placeholder:n("shared.aptOrSuiteLabel"),onChange:e=>i("aptOrSuite",e.target.value),value:t.aptOrSuite})}),(0,s.tZ)(N,{children:(0,s.tZ)($.Z,{placeholder:n("shared.businessNameLabel"),onChange:e=>i("businessName",e.target.value),value:t.businessName})})]}):null,loading:()=>(0,s.BX)(s.HY,{children:[(0,s.tZ)(Y,{}),(0,s.tZ)(Y,{})]}),error:()=>(0,s.tZ)(Y,{})}),(0,s.tZ)(S.Z,{placeholder:n("shared.deliveryNotesLabel"),onChange:e=>{i("notes",e.target.value),e.target.style.height="inherit";const t=e.target.scrollHeight;e.target.style.height=`${t}px`},value:t.notes,ariaLabel:n("shared.deliveryNotesLabel"),rows:"2"})]}):null,d?null:(0,s.BX)(s.HY,{children:[(0,s.tZ)(j,{children:(0,s.tZ)(l.v,{id:"components.delivery.save_this_address"})}),(0,s.tZ)(O.Z,{address:g,setAddress:h})]}),e.showRemoveAddress?(0,s.tZ)(G,{children:(0,s.tZ)(w.Z,{selectedDeliveryLocation:e.selectedDeliveryLocation,onRemoveAddress:()=>{m(!0)}})}):null,(0,s.tZ)(B.Z,{addressLabel:g,selectedDeliveryLocation:e.selectedDeliveryLocation,onAddressSaved:()=>{e.onAddressSaved(e.selectedDeliveryLocation)}})]})}var J=i(75241),K=i(52298),Q=i(83949),ee=i(34626),te=i(47986),ie=i(43978),oe=i(95747),ne=i(79609),re=i(74057),le=i(37649),ae=i(31809),de=i(84089),se=i(56899),ce=i(66041),pe=i(59210),ge=i(55758),he=i(46700),ue=i(1765),me=i(32857),ye=i(68065);const ve=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{borderRadius:t.borders.radius300,overflow:"hidden"}})),Ze=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} 0`,display:"flex",justifyContent:"flex-end",alignItems:"center",gap:t.sizing.scale600}})),fe=e=>{let{onBack:t,onConfirm:i,coordinates:n,pinConstraints:l}=e;const a=(0,R.ZP)(),[d,c]=o.useState(!0),[p,g]=o.useState(n),h=(0,r.T)(),u=h("location_manager.drop_off_pin_marker_title");return o.useEffect((()=>{a("eats:location_manager_pin_drop_impression")}),[a]),(0,s.BX)(s.HY,{children:[(0,s.tZ)(pe.Jf,{marginBottom:"scale600",marginTop:"scale900",children:h("location_manager.edit_mode_pin_title")}),(0,s.tZ)(ve,{children:(0,s.tZ)(ue.Z,{pinConstraints:l,coordinates:n,zoom:18,height:"480px",showZoomButtons:!0,markerLabel:u,draggable:!0,onChange:g,noZoomOnMouseWheelScroll:!0,setCanSubmit:c})}),(0,s.tZ)(pe.aM,{marginTop:"scale600",marginBottom:"scale600",children:h("location_manager.edit_pin_description")}),(0,s.BX)(Ze,{children:[(0,s.tZ)(me.Z,{onClick:t,kind:ye.TO.tertiary,children:h("back")}),(0,s.tZ)(me.Z,{disabled:!d,onClick:()=>{d&&i(p)},children:h("shared.confirm")})]})]})};var _e=i(9242),De=i(77947),Te=i(36154),Ie=i(66473),Le=i(85301),ze=i(69955),be=i(92717),xe=i(1795),$e=i(11841),Se=i(85427),Pe=i(97130),ke=i("__fusion__1684"),Ce=i(59696),Ee=i(3899);const Be=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{color:t.colors.negative,display:"flex",alignItems:"center",justifyContent:"center"}})),we=e=>{let{placeId:t,provider:i}=e;const[n,r]=o.useState(!1),a=(0,Ce.F)(),d=()=>a.mutate({placeId:t,provider:i});return n?(0,s.tZ)(de.Z,{isOpen:!0,closeable:!1,size:se.NO.auto,children:(0,s.tZ)(ce.fe,{children:(0,s.tZ)(Ee.Z,{onKeepAddress:()=>r(!1),onRemoveAddress:d})})}):(0,s.tZ)(me.Z,{startEnhancer:()=>(0,s.tZ)(Be,{children:(0,s.tZ)(ke.default,{size:"16"})}),onClick:()=>r(!0),kind:ye.TO.secondary,size:ye.NO.compact,shape:ye.X3.pill,children:(0,s.tZ)(l.v,{id:"components.address_entry.remove_address"})})};var Oe=i(22023),Re=i(11362),Xe=i(69420),Ve=i(71110),Me=i("__fusion__695"),Ae=i(31913),He=i(52200),Ne=i(25470);const Fe=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{height:"140px",width:"100%",display:"flex",position:"relative",justifyContent:"center",alignItems:"center",borderTopLeftRadius:t.sizing.scale600,borderTopRightRadius:t.sizing.scale600,overflow:"hidden"}})),Ue=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{padding:`${t.sizing.scale600} ${t.sizing.scale800}`}})),Ye=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingMedium,marginBottom:t.sizing.scale300,width:"100%"}})),qe=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",border:t.sizing.scale600,overflow:"hidden"}})),je=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,width:"100%"}})),Ge=(0,d.zo)("img",{width:"500px",height:"auto",maxHeight:"100%",objectFit:"cover"}),We=(0,d.zo)("ul",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",margin:`0 ${t.sizing.scale800} 0 ${t.sizing.scale800}`}})),Je=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"row",border:`${t.sizing.scale0} solid ${t.colors.borderOpaque}`,borderRadius:t.sizing.scale300,padding:`0 ${t.sizing.scale300}`,justifyContent:"space-between",alignItems:"center",marginBottom:t.sizing.scale600,cursor:"pointer"}})),Ke=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",padding:`${t.sizing.scale500} ${t.sizing.scale300}`}})),Qe=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentSecondary}})),et=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",padding:`${t.sizing.scale500} ${t.sizing.scale300}`,alignItems:"center",marginRight:t.sizing.scale300}})),tt=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",color:t.colors.contentInverseTertiary,padding:`${t.sizing.scale600} ${t.sizing.scale300}`,marginLeft:"auto"}})),it=(0,d.zo)("div",{display:"flex",flexDirection:"row",alignItems:"center",flex:1});function ot(e){const{setAddressInfo:t}=(0,E.a8)(),{goToEditDeliveryDetailsReplace:o}=(0,Pe.X)(),n=(0,R.ZP)();if((0,Ne.Z)((()=>{n("eats:location_manager_flawless_dropoff_impression")})),!e.addressEntryForm||!e.addressEntryForm.form)return null;const r=e.addressEntryForm.form.residenceTypeFieldsMap,a=r?.OTHER?.rows&&r?.OTHER?.rows.length>1?r?.OTHER?.rows[1]:null,d=a?.fields&&a?.fields.length>0?a?.fields[0]?.property:null,c=(a?.fields&&a?.fields.length>0?a?.fields[0]?.key?.addressFieldKey:"")||"",p=d&&"dropDownInputProperty"===d.type?d.dropDownInputProperty:{},g=("residenceTypePayload"===p?.payload?.type?p?.payload?.residenceTypePayload:null)?.residenceTypeItemPayload;return g?(0,s.BX)(qe,{children:[(0,s.tZ)(Fe,{children:(0,s.tZ)(Ge,{src:(0,Ve.pZ)(i(19551))})}),(0,s.BX)(Ue,{children:[(0,s.tZ)(Ye,{children:(0,s.tZ)(l.v,{id:"deliveryDetails.buildingType.title"})}),(0,s.tZ)(je,{children:(0,s.tZ)(l.v,{id:"deliveryDetails.buildingType.subtitle"})})]}),(0,s.tZ)(We,{children:g.map(((e,i)=>(0,s.BX)(Je,{onClick:()=>{t({[c]:e?.residenceType||""}),n("eats:location_manager_flawless_dropoff_select_click"),o()},children:[(0,s.BX)(it,{children:[(0,s.tZ)(et,{children:(0,s.tZ)(He.ZP,{illustration:e.illustration.illustration})}),(0,s.BX)(Ke,{children:[(0,s.tZ)(Ae.ZP,{text:e.title,__font:{style:"LABEL_DEFAULT",weight:"MEDIUM"}}),e.subtitle?(0,s.tZ)(Qe,{children:e.subtitle.richTextElements[0].text.text.text}):null]})]}),(0,s.tZ)(tt,{children:(0,s.tZ)(Me.default,{size:20,color:"primary400"})})]},i)))})]}):null}var nt=i(62083);const rt=(0,d.w1)(ce.mz,(e=>{let{$theme:t}=e;return{gap:t.sizing.scale600,display:"flex",justifyContent:"flex-end",marginLeft:0,marginRight:0,paddingTop:0,paddingBottom:0}})),lt=(0,d.zo)("div",{height:"600px"}),at=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{marginBottom:t.sizing.scale600}})),dt=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} ${t.sizing.scale800}`,display:"flex",justifyContent:"flex-end",alignItems:"center",gap:t.sizing.scale600}})),st=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`0 ${t.sizing.scale800} 0 ${t.sizing.scale800}`}})),ct=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`0 ${t.sizing.scale800} 0 ${t.sizing.scale800}`}})),pt=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} 0`}}));function gt(e){const t=(0,Xe.k6)(),i=()=>t.goBack(),n=(0,R.ZP)(),l=e.selectedDeliveryLocationV2?.location?.id||"",a=e.selectedDeliveryLocationV2?.location?.provider||"",[d,c]=o.useState(!1),p=(0,be.z)({referenceInfo:{placeID:l,provider:a}},{queryObserverOptions:{staleTime:0}}),g=(0,r.T)(),h=g("location_manager.address_label_title"),u=g("components.delivery.add_a_label"),[m,y]=o.useState(!0),[v,Z]=(0,L.useState)(e.selectedDeliveryLocationV2?.personalPayload?.label||""),{deliveryInstructionV2:f,setDeliveryInstructionV2:_,setAddressInfo:D}=(0,E.a8)(),T=f?.interactionType||e.selectedDeliveryLocationV2?.deliveryPayload?.selectedInteractionType||Le.lq,I="unknown"===T?Le.lq:T,z=e.selectedDeliveryLocationV2?.deliveryPayload?.deliveryInstructions?.[I]?.pinDropInfo?.coordinate||e.selectedDeliveryLocationV2?.location?.coordinate||{},b=e.selectedDeliveryLocationV2?.deliveryConfig?.constraint,{ephemeralInstruction:x,setEphemeralInstruction:$,ephemeralInteractionType:S,setEphemeralInteractionType:P,goToPinDrop:k,goToDropOff:C,isCurrentLocation:B,goToEditDeliveryDetailsReplace:w}=(0,Pe.X)({instruction:f?.deliveryNotes,interactionType:I}),[O,X]=o.useState(z),[V,M]=o.useState(!1);o.useEffect((()=>{if(m){const{deliveryPayload:t}=e.selectedDeliveryLocationV2||{},{deliveryInstructions:i,type:o}=t||{},n=i?.[I];"USER_INPUT_MISSING"===o&&c(!0),_((e=>e?{...e,interactionType:I,...n}:{interactionType:I,...n})),y(!1)}}),[m,e.selectedDeliveryLocationV2,I,_]);const A=e=>{X(e),U({pinDropInfo:{coordinate:e}}),i()},H=e.selectedDeliveryLocationV2?.deliveryConfig?.deliveryInteractionDetailsViewConfig||{},N=e.selectedDeliveryLocationV2?.deliveryConfig?.deliveryInstructionInputViewModels?.[I],F=()=>{U({interactionType:S,deliveryNotes:x}),i()},U=e=>{let{interactionType:t,deliveryNotes:i,pinDropInfo:o}=e;_((e=>e?{...e,...t?{interactionType:t}:{},...o?{pinDropInfo:o}:{},deliveryNotes:i}:{...t?{interactionType:t}:{},...o?{pinDropInfo:o}:{},deliveryNotes:i}))};if(o.useEffect((()=>{n("eats:location_manager_delivery_details_v2_impression")}),[n]),o.useEffect((()=>()=>{D(Se.jq),_(null)}),[D,_]),p?.isLoading||p?.isFetching)return(0,s.tZ)(lt,{children:(0,s.tZ)(xe.Z,{})});const{initialResidenceType:Y}=p?.data?.form||{};if(Y!=nt.G.OTHER&&"flawlessdropoff"===e.stepType)w();else if("flawlessdropoff"===e.stepType)return(0,s.BX)(s.HY,{children:[(0,s.tZ)(ot,{addressEntryForm:p?.data}),(0,s.tZ)(ct,{children:(0,s.BX)(rt,{children:[(0,s.tZ)(me.Z,{onClick:()=>{n("eats:location_manager_flawless_dropoff_back_button"),i()},kind:ye.TO.tertiary,children:g("back")}),(0,s.tZ)(me.Z,{onClick:()=>{w(),n("eats:location_manager_flawless_dropoff_skip_click")},kind:ye.TO.secondary,children:g("shared.skip")})]})})]});return"pindrop"===e.stepType?(0,s.tZ)(st,{children:(0,s.tZ)(fe,{coordinates:O,onConfirm:A,onBack:i,pinConstraints:b})}):"dropoff"===e.stepType?(0,s.BX)(st,{children:[(0,s.tZ)(Ie.Z,{ephemeralInstruction:x,setEphemeralInstruction:$,setEphemeralInteractionType:P,ephemeralInteractionType:S,deliveryInteractionDetailsViewConfig:H}),(0,s.BX)(rt,{children:[(0,s.tZ)(me.Z,{onClick:i,kind:ye.TO.tertiary,children:g("back")}),(0,s.tZ)(me.Z,{onClick:F,children:g("components.ConfirmMobile.update")})]})]}):(0,s.BX)(s.HY,{children:[(0,s.tZ)(pe.Jf,{marginBottom:"scale600",marginTop:"scale900",marginLeft:"scale800",children:g("location_manager.edit_mode_title")}),(0,s.tZ)(st,{children:(0,s.tZ)(he.Z,{coordinates:O,onClick:k})}),(0,s.tZ)(st,{children:(0,s.tZ)(Te.Z,{getAddressEntryFormPayload:p?.data,shouldHighlightRequired:V,setShouldHighlightRequired:M})}),(0,s.tZ)(pt,{children:(0,s.tZ)(Oe.I,{$size:Re.N.module})}),(0,s.BX)(st,{children:[(0,s.tZ)(De.Z,{selectedInteraction:I,deliveryInteractionViewConfig:e.selectedDeliveryLocationV2?.deliveryConfig?.deliveryInteractionViewConfig,onClick:C}),(0,s.tZ)(ze.Z,{ephemeralInstruction:f?.deliveryNotes,onChange:e=>U({deliveryNotes:e}),deliveryInstructionInputViewModel:N})]}),(0,s.tZ)(pt,{children:(0,s.tZ)(Oe.I,{$size:Re.N.module})}),(0,s.tZ)(st,{children:(0,s.BX)(at,{children:[(0,s.tZ)(pe.D9,{marginBottom:"scale300",marginTop:"scale600",children:h}),(0,s.tZ)($e.Z,{value:v,onChange:e=>Z(e.target.value),placeholder:u,clearOnEscape:!0})]})}),d||B(e.selectedDeliveryLocationV2)?null:(0,s.tZ)(st,{children:(0,s.tZ)(we,{placeId:l,provider:a})}),(0,s.BX)(dt,{children:[(0,s.tZ)(me.Z,{onClick:e.onBack,kind:ye.TO.tertiary,children:g("back")}),(0,s.tZ)(_e.Z,{selectedDeliveryLocationV2:e.selectedDeliveryLocationV2,getAddressEntryFormPayload:p?.data,onAddressSaved:e.onAddressSaved,label:v,setShouldHighlightRequired:M})]})]})}var ht=i(31704),ut=i(13218),mt=i(73057),yt=i(45106),vt=i(54731);const Zt=(0,d.w1)(Oe.I,{marginTop:"0"}),ft=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} ${t.sizing.scale800}`,minHeight:"385px"}})),_t=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} ${t.sizing.scale800} ${t.sizing.scale300} ${t.sizing.scale800}`}})),Dt=e=>{let{onAddressSaved:t,targetDiningMode:i,isSchedulable:n,deliveryDetails:l,guestCheckoutEnabled:a,isLoggedIn:d,deliveryTime:c,storeUuid:p,isFlawlessDropoffEnabled:g}=e;const h=(0,yt.Z)(),u=(0,r.T)(),m=(0,R.ZP)(),{goToEditDeliveryDetails:y,goToFlawLessDropOff:v}=(0,Pe.X)(),{query:Z,locations:f,isLoading:_,highlightedIndex:L,showTryAgainMessage:z,reset:b,getItemProps:x,getMenuProps:$,getInputProps:S}=(0,ie.Z)({onLocationSelectedV2:e=>{const t=(0,ut._W)(e?.location,e?.personalPayload);l.setSelectedDeliveryLocationV2(e),null!=e.deliveryPayload?.type&&e.deliveryPayload?.type!=vt.xk.USER_INPUT_MISSING||!g?a||d?(y(),l.onTypeaheadLocationSelected(t)):l.saveDeliveryDetailsLoggedOut(t):v()},initialQuery:"",id:"location-manager",initialIsClosed:!0,overrideDiningMode:i}),P=()=>h?null:(0,s.BX)(s.HY,{children:[(0,s.tZ)(Zt,{$size:Re.N.module}),(0,s.tZ)(_t,{children:(0,s.tZ)(pe.fH,{margin:0,children:u("location_manager.schedule_title")})}),(0,s.tZ)(mt.Z,{deliveryTime:c,storeUuid:p,isSchedulable:n})]});return o.useEffect((()=>{m("eats:location_manager_address_entry_impression")}),[m]),(0,s.tZ)(s.HY,{children:(0,s.BX)(I.Z,{children:[(0,s.tZ)(_t,{children:(0,s.tZ)(T.Z,{query:Z,getInputProps:S,reset:()=>{l.setShowDeliveryDetails(!1),b()},placeholder:u("location_manager.search_placeholder"),isLoading:_,iconType:"Search",backgroundColor:"inputFill",borderStyle:"rounded",highlightFocus:!1,dataTestid:"location-typeahead-input"})}),(a||d)&&""===Z?(0,s.BX)(s.HY,{children:[(0,s.tZ)(_t,{children:(0,s.tZ)(pe.fH,{margin:0,children:u("location_manager.suggestions_section_title")})}),(0,s.tZ)(ht.Z,{deliveryLocations:l.deliveryLocationsV2,onAddressSaved:t,onEditClick:e=>{y(),l.setSelectedDeliveryLocationV2(e),l.onTypeaheadLocationSelected((0,ut._W)(e.location,e.personalPayload))}}),(0,s.tZ)(P,{})]}):(0,s.tZ)(ft,{children:(0,s.tZ)(D,{locations:f.data||[],getMenuProps:$,getItemProps:x,highlightedIndex:L,showTryAgainMessage:z,isOpen:!0})})]})})};var Tt=i(96881),It=i(60849);const Lt=(0,d.zo)("label",g.E2),zt=(0,d.zo)("h1",(e=>{let{$theme:t}=e;return{...t.typography.HeadingLarge,marginBottom:"16px"}})),bt=(0,d.zo)("div",{margin:"0 -24px"}),xt=(0,d.zo)("div",(e=>{let{$theme:t,$removeTopPadding:i}=e;return{...i?null:{marginTop:t.sizing.scale600},marginBottom:t.sizing.scale800}})),$t=e=>{const t=(0,n.TH)(),i=(0,Xe.k6)(),d=(0,r.T)(),{guestCheckoutEnabled:c}=(0,C.Z)(),{storeUuid:p="",isSchedulable:g=!0,stepType:h="",locationManagerOrigin:u=""}=(0,te.kPj)(e.modalContext||"")||{},{deliveryLocation:m,deliveryTime:y}=(0,re.Z)(p,!0),{isAddressPickerRevampEnabled:v,redirectUrl:Z}=(0,Pe.X)(),f=(0,te.nyP)(t),_=(0,ge.d)(),L="edit"===h||"edit"===e.modalContext,z="feed"===u||"feed"===e.modalContext,b="store"===u||"store"===e.modalContext,x=t.state?.deliveryLocation,$="DELIVERY_LOCATION_MANAGER"===e.modalContext?"DELIVERY":_,S=x||m,P=(0,ne.Z)({deliveryLocation:S,disableRedirectToFeed:b,isEditMode:L}),k=(0,It.ip)({...Tt.s.enable_eats_web_flawless_dropoff,defaultValue:!1}),{user:E}=(0,ee.Z)(),B="flawlessdropoff"===h,w="edit"===h||"pindrop"===h||"dropoff"===h||B,O=(0,oe.Z)(),R=E.data?.isLoggedIn||!1,V=e?.XP_OVERRIDES_DO_NOT_USE?.Title||zt,M=e?.XP_OVERRIDES_DO_NOT_USE?.dialogProps?.onClose,A=o.useCallback((()=>i.push(Z({storeUuid:p,isSchedulable:Boolean(g)}))),[i,g,Z,p]),H=()=>{if("dropoff"!==h&&"pindrop"!==h){if("edit"!==h)return v?(M&&M(),void i.push((0,te.C45)(t))):O((0,te.C45)(t));i.replace(Z({storeUuid:p,isSchedulable:Boolean(g)}))}else i.goBack()},N=i=>{if(!i)return;const o=e?.XP_OVERRIDES_DO_NOT_USE?.onLocationSelected;L||f||z?P.onDone(i):o?o?.(i):O((0,te.C45)((0,te.gOP)(t,i)))},{query:F,placeholder:U,locations:Y,isLoading:q,highlightedIndex:j,isOpen:G,showTryAgainMessage:he,openMenu:ue,reset:me,getItemProps:ye,getMenuProps:ve,getInputProps:Ze,getLabelProps:fe}=(0,ie.Z)({onLocationSelected:t=>{const i=e?.XP_OVERRIDES_DO_NOT_USE?.onLocationSelected;!c&&!R||b?P.saveDeliveryDetailsLoggedOut(t):(P.setShowDeliveryDetails(!0),P.onTypeaheadLocationSelected(t)),i?.(t)},initialQuery:"",id:"location-manager",initialIsClosed:!0,overrideDiningMode:$});o.useEffect((()=>{w&&!P.selectedDeliveryLocationV2&&A()}),[P.selectedDeliveryLocationV2,A,i,w,g,Z,p]);const _e={Dialog:{style:e=>{let{$theme:t}=e;return{marginTop:t.sizing.scale1000}}},DialogContainer:{style:{alignItems:"flex-start"}}},De=B?{..._e,Close:{style:e=>{let{$theme:t}=e;return{background:"rgba(255,255,255, 0.6)",borderRadius:t.borders.radiusFull,height:"32px",width:"32px"}}}}:_e;return v?(0,s.BX)(de.Z,{onClose:H,closeable:!0,isOpen:!0,animate:!0,autoFocus:!0,size:se.NO.default,role:se.HB.dialog,overrides:De,children:[w?null:(0,s.tZ)(ce.xB,{children:(0,s.tZ)(pe.Jf,{margin:"0",children:d("location_manager.modal_title")})}),(0,s.BX)(xt,{$removeTopPadding:B,children:[(0,s.tZ)(le.Z,{eventName:"eats:enter_delivery_address_start",eventPayload:{address:S?.address?.address1,latitude:S?.latitude,longitude:S?.longitude}}),w&&!b&&P.selectedDeliveryLocationV2?(0,s.tZ)(gt,{onBack:()=>i.replace(Z({storeUuid:p,isSchedulable:Boolean(g)})),selectedDeliveryLocationV2:P.selectedDeliveryLocationV2,onAddressSaved:N,stepType:h}):(0,s.tZ)(Dt,{deliveryDetails:P,deliveryTime:y,guestCheckoutEnabled:c,isLoggedIn:R,isSchedulable:Boolean(g),onAddressSaved:N,storeUuid:p,targetDiningMode:$,isFlawlessDropoffEnabled:k})]})]}):(0,s.tZ)(a.ZP,{...P.showDeliveryDetails&&!L?{hasBackButton:!0,onClose:()=>{P.setShowDeliveryDetails(!1)}}:{backLocation:(0,te.C45)(t)},...e.XP_OVERRIDES_DO_NOT_USE?.dialogProps||{},children:(0,s.BX)(a.HF,{children:[(0,s.tZ)(le.Z,{eventName:"eats:enter_delivery_address_start",eventPayload:{address:S?.address?.address1,latitude:S?.latitude,longitude:S?.longitude}}),P.showDeliveryDetails&&!b?(0,s.tZ)(W,{overrideDiningMode:$,selectedDeliveryLocation:P.selectedDeliveryLocation,ephemeralLocation:P.ephemeralLocation,ephemeralLocationInstruction:P.ephemeralLocationInstruction,onAddressSaved:N,onRemoveAddress:P.removeTaggedLocation,showRemoveAddress:(0,ae.e)(P?.selectedDeliveryLocation,P?.taggedLocations?.data,m)}):(0,s.BX)(s.HY,{children:[(0,s.tZ)(V,{...e?.XP_OVERRIDES_DO_NOT_USE?.titleProps,children:(0,s.tZ)(X.Z,{diningMode:$,pickup:(0,s.tZ)(l.v,{id:"component.location_typeahead_mobile.pickup_near"}),delivery:(0,s.tZ)(l.v,{id:"component.location_typeahead_mobile.deliver_to"}),dineIn:(0,s.tZ)(l.v,{id:"component.location_typeahead_mobile.dine_in_near"})})}),(0,s.BX)(I.Z,{"data-testid":"location-typeahead-wrapper",children:[(0,s.tZ)(Lt,{...fe(),children:d("shared.combobox.a11y_instructions")}),(0,s.tZ)(T.Z,{query:F,getInputProps:Ze,reset:()=>{P.setShowDeliveryDetails(!1),me()},placeholder:U,isLoading:q,iconType:"Pin",backgroundColor:"inputFill",onFocus:()=>{ue()},dataTestid:"location-typeahead-input"}),(c||R)&&""===F?(0,s.BX)(s.HY,{children:[(0,s.tZ)(K.ZP,{$height:8}),(0,s.tZ)(bt,{children:(0,s.tZ)(J.Z,{taggedLocations:P.taggedLocations,onAddressSaved:N,onEditClick:e=>{P.setShowDeliveryDetails(!0),P.onTypeaheadLocationSelected(e)}})}),(0,s.tZ)(Q.Z,{onDone:()=>O((0,te.C45)(t))})]}):(0,s.BX)(s.HY,{children:[(0,s.tZ)(K.ZP,{$height:8}),(0,s.tZ)(D,{locations:Y.data||[],getMenuProps:ve,getItemProps:ye,highlightedIndex:j,showTryAgainMessage:he,isOpen:G})]})]})]})]})})}}}]);