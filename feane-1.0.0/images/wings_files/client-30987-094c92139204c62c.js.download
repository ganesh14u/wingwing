"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[30987],{36746:(e,t,i)=>{i.d(t,{Z:()=>m});var o=i(74369),r=i(92300),n=i(16782),l=i(28333),s=i(79810),a=i(84036);const d=(0,s.zo)("div",(e=>({...(0,a.d5)({$positive:!1,...e,$hasIconTrailing:!1}),width:e.$resize?"fit-content":"100%"})));d.displayName="StyledTextAreaRoot";const c=(0,s.zo)("div",(e=>(0,a.hB)({$positive:!1,...e})));c.displayName="StyledTextareaContainer";const u=(0,s.zo)("textarea",(e=>({...(0,a.Hx)(e),resize:e.$resize||"none"})));u.displayName="StyledTextarea";var h=i(59924);class p extends o.Component{static defaultProps={autoFocus:!1,disabled:!1,readOnly:!1,error:!1,name:"",onBlur:()=>{},onChange:()=>{},onKeyDown:()=>{},onKeyPress:()=>{},onKeyUp:()=>{},onFocus:()=>{},overrides:{},placeholder:"",required:!1,rows:3,size:n.NO.default};state={isFocused:this.props.autoFocus||!1};onFocus=e=>{this.setState({isFocused:!0}),this.props.onFocus(e)};onBlur=e=>{this.setState({isFocused:!1}),this.props.onBlur(e)};render(){const{overrides:e={}}=this.props,[t,i]=(0,r.jb)(e.Root,d),o=(0,r.aO)({Input:{component:u},InputContainer:{component:c}},e);return(0,h.tZ)(t,{"data-baseweb":"textarea",$isFocused:this.state.isFocused,$isReadOnly:this.props.readOnly,$disabled:this.props.disabled,$error:this.props.error,$positive:this.props.positive,$required:this.props.required,$resize:this.props.resize,...i,children:(0,h.tZ)(l.Z,{...this.props,type:n.iB.textarea,overrides:o,onFocus:this.onFocus,onBlur:this.onBlur,resize:this.props.resize})})}}const m=p},51640:(e,t,i)=>{i.d(t,{Z:()=>n});var o=i(15649),r=i(49201);const n=e=>{const t=(0,o.Z)();return(0,r.xG)(t,e.currencyCode,e.value,e.options)}},82733:(e,t,i)=>{i.d(t,{Z:()=>n});var o=i(96881),r=i(60849);const n=function(){return(0,r.ip)({...o.s.enable_custom_replacement_flow_by_upt,defaultValue:!1})}},21491:(e,t,i)=>{i.d(t,{IJ:()=>c,ZP:()=>x,xf:()=>u});var o=i(74369),r=i(36278),n=i(31913),l=i(62091),s=i(91931),a=i(213),d=i(59924);const c="48px",u=c,h=(0,s.zo)("div",(e=>{let{$theme:t,$selected:i}=e;return{boxSizing:"border-box",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:"16px",border:`3px solid ${i?t.colors.borderSelected:"transparent"}`,borderRadius:"8px",cursor:"pointer"}})),p=(0,s.zo)(l.Z,(e=>{let{$theme:t}=e;return{flex:"0 0 auto",height:c,width:u,objectFit:"cover",border:`1px solid ${t.colors.borderOpaque}`,borderRadius:c}})),m=(0,s.zo)("div",{flex:"1 1 auto",display:"flex",flexDirection:"column",justifyContent:"center"}),g=(0,s.zo)("div",{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),Z=(0,s.zo)("div",{flex:"1 1 auto",textOverflow:"ellipsis",whiteSpace:"nowrap"}),b=(0,s.zo)("div",{flex:"0 0 auto",whiteSpace:"nowrap"}),f=(e,t)=>{const{storeWithProducts:i,selected:o,onClick:l}=e,{storeUuid:s,leadingImageUrl:c,leadingTitle:u,trailingTitle:f,leadingLabel1:x,leadingLabel2:y,leadingLabel3:v,trailingLabel1:w,tags:S}=i;return(0,d.BX)(h,{$selected:o,onClick:()=>l(s||""),ref:t,"data-testid":"canonical-item-store-selector-option",children:[(0,d.tZ)(p,{src:c||""}),(0,d.tZ)(r.IQ,{}),(0,d.BX)(m,{children:[(0,d.BX)(g,{children:[(0,d.tZ)(Z,{children:(0,d.tZ)(n.ZP,{text:u})}),f?(0,d.BX)(d.HY,{children:[(0,d.tZ)(r.sA,{}),(0,d.tZ)(b,{children:(0,d.tZ)(n.ZP,{text:f})})]}):null]}),(0,d.BX)(g,{children:[x?(0,d.tZ)(Z,{children:(0,d.tZ)(n.ZP,{text:x})}):null,w?(0,d.BX)(d.HY,{children:[(0,d.tZ)(r.sA,{}),(0,d.tZ)(b,{children:(0,d.tZ)(n.ZP,{text:w})})]}):null]}),(0,d.tZ)(g,{children:y?(0,d.tZ)(Z,{children:(0,d.tZ)(n.ZP,{text:y})}):null}),(0,d.tZ)(g,{children:v?(0,d.tZ)(Z,{children:(0,d.tZ)(n.ZP,{text:v})}):null}),S?(0,d.tZ)(g,{children:(0,d.tZ)(a.A,{tags:S})}):null]})]})};f.displayName="CanonicalItemStoreSelectorOption";const x=o.forwardRef(f)},13003:(e,t,i)=>{i.d(t,{Z:()=>m});var o=i(74369),r=i(58092),n=i(91931),l=i(36278),s=i(14770),a=i(46933),d=i(48734),c=i(59924);const u=(0,n.zo)("div",{flexDirection:"column",maxWidth:"328px",fontSize:"14px",fontWeight:"500",lineHeight:"16px"}),h=(0,n.zo)("div",{display:"flex",flexDirection:"column",justifyContent:"center"}),p=e=>{let{children:t,isMobile:i,placement:n,shouldShowTooltip:p=!0}=e;const{shouldShowTooltip:m}=(0,d.Z)(),[g,Z]=(0,o.useState)(p);(0,o.useEffect)((()=>{p&&Z(m)}),[p,m]);const b=()=>{Z(!1)};return(0,c.tZ)(r.Z,{isOpen:g,placement:n,returnFocus:!1,autoFocus:!1,onClickOutside:b,ignoreBoundary:!0,overrides:{Body:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundInversePrimary,outline:"none",borderTopLeftRadius:t.borders.radius300,borderTopRightRadius:t.borders.radius300,borderBottomRightRadius:t.borders.radius300,borderBottomLeftRadius:t.borders.radius300,maxWidth:i?"270px":"392px"}}},Arrow:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundInversePrimary}}},Inner:{style:e=>{let{$theme:t}=e;return{outline:"none",backgroundColor:t.colors.backgroundInversePrimary,color:t.colors.contentInversePrimary,borderTopLeftRadius:t.borders.radius300,borderTopRightRadius:t.borders.radius300,borderBottomRightRadius:t.borders.radius300,borderBottomLeftRadius:t.borders.radius300,display:"flex",flexDirection:"row",paddingLeft:t.sizing.scale600,paddingRight:t.sizing.scale600,paddingTop:t.sizing.scale600,paddingBottom:t.sizing.scale600}}}},showArrow:!0,content:()=>(0,c.BX)(c.HY,{children:[(0,c.tZ)(u,{children:(0,c.tZ)(a.v,{id:"storeSelector.tooltipText"})}),(0,c.tZ)(l.ZP,{$width:"12px"}),(0,c.tZ)(h,{children:(0,c.tZ)(s.Z,{onClick:b,iconSize:"15px"})})]}),children:t})};p.displayName="CanonicalItemStoreSelectorTooltip";const m=p},25905:(e,t,i)=>{i.d(t,{Z:()=>_e});var o=i(74369),r=i(14016),n=i(33535),l=i(31139),s=i("__fusion__476"),a=i(91931),d=i(36278),c=i(31913),u=i(62091),h=i(213),p=i(59924);const m="48px",g=(0,a.zo)("div",(e=>{let{$theme:t,$selected:i,$width:o,$imagePosition:r}=e;return{height:"120px",boxSizing:"border-box",display:"grid",gridTemplateColumns:"left"===r?"auto 1fr":"1fr auto",columnGap:t.sizing.scale600,...o?{minWidth:`${o}`}:{},...o?{maxWidth:`${o}`}:{},justifyContent:"flex-start",alignItems:"center",padding:i?"16px":"17px",border:`${i?"3px":"2px"} solid ${i?t.colors.borderSelected:t.colors.borderOpaque}`,borderRadius:"8px",cursor:"pointer",overflow:"hidden"}})),Z=(0,a.zo)(u.Z,(e=>{let{$theme:t}=e;return{flex:"0 0 auto",height:m,width:"48px",objectFit:"cover",border:`1px solid ${t.colors.borderOpaque}`,borderRadius:m}})),b=(0,a.zo)("div",{flex:"1 1 auto",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"}),f=(0,a.zo)("div",{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",overflow:"hidden"}),x=(0,a.zo)("div",(e=>{let{$couldHaveTwolines:t=!1}=e;return{flex:"1 1 165px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",...t?{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}:{}}})),y=(0,a.zo)("div",{flex:"0 0 auto",whiteSpace:"nowrap"}),v=o.forwardRef(((e,t)=>{let{storeWithProducts:i,selected:o,width:r,onClick:n,showPrice:l=!0}=e;const{storeUuid:s,leadingImageUrl:a,leadingTitle:u,trailingTitle:m,leadingLabel1:v,trailingLabel1:w,leadingLabel2:S,tags:$}=i,z=0===$?.length,_=m?"left":"right";return(0,p.BX)(g,{ref:t,$selected:o,$width:r,$imagePosition:_,onClick:()=>n(s||""),"data-testid":"canonical-item-compact-store-selector-option",children:["left"===_?(0,p.tZ)(Z,{src:a||""}):null,(0,p.BX)(b,{children:[(0,p.BX)(f,{children:[l||o?(0,p.tZ)(x,{$couldHaveTwolines:z,children:(0,p.tZ)(c.ZP,{text:u,whiteSpace:z?"normal":"nowrap"})}):null,m&&(l||o)?(0,p.BX)(p.HY,{children:[(0,p.tZ)(d.sA,{}),(0,p.tZ)(y,{children:(0,p.tZ)(c.ZP,{text:m})})]}):null]}),(0,p.BX)(f,{children:[v?(0,p.tZ)(x,{$couldHaveTwolines:z,children:(0,p.tZ)(c.ZP,{text:v,whiteSpace:z?"normal":"nowrap"})}):null,w?(0,p.BX)(p.HY,{children:[(0,p.tZ)(d.sA,{}),(0,p.tZ)(y,{children:(0,p.tZ)(c.ZP,{text:w})})]}):null]}),(0,p.tZ)(f,{children:S?(0,p.tZ)(x,{children:(0,p.tZ)(c.ZP,{text:S})}):null}),$?(0,p.tZ)(f,{children:(0,p.tZ)(h.A,{tags:$})}):null]}),"right"===_?(0,p.tZ)(Z,{src:a||""}):null]})}));v.displayName="CanonicalItemCompactStoreSelectorOption";const w=v;var S=i("__fusion__589"),$=i(87444),z=i(67848),_=i(41491),C=i(13003),P=i(79406),k=i(69744),B=i("__fusion__577"),L=i(86695),I=i(68065),T=i(94579);const R=e=>{let{shouldShowControllers:t=null,handlePageChange:i,isNextPageDisabled:o,isPreviousPageDisabled:r}=e;const n=s.useCallback(((e,i)=>((e,t,i,o,r)=>{const n="left"===e&&t||"right"===e&&i;return{position:"absolute",[e]:r.sizing.scale400,top:r.sizing.scale1000,backgroundColor:r.colors.backgroundPrimary,boxShadow:r.shadows.floatingButton,zIndex:T.I_.cover,opacity:o?n?0:1:0,...null===o||n?{}:{animationDuration:"0.3s",animationTimingFunction:"ease-in-out",animationName:{"0%":{opacity:o?0:1},"100%":{opacity:o?1:0}}}}})(e,r,o,t,i)),[o,r,t]);return(0,p.BX)(p.HY,{children:[(0,p.tZ)(L.zx,{kind:L.TO.tertiary,shape:I.X3.circle,size:I.NO.compact,overrides:{BaseButton:{style:e=>{let{$theme:t}=e;return n("right",t)}}},onClick:()=>i("forward"),children:(0,p.tZ)(S.default,{})}),(0,p.tZ)(L.zx,{kind:L.TO.tertiary,shape:I.X3.circle,size:I.NO.compact,overrides:{BaseButton:{style:e=>{let{$theme:t}=e;return n("left",t)}}},onClick:()=>i("back"),children:(0,p.tZ)(B.default,{})})]})};var D=i(96911),U=i(53308),X=i(24484),O=i(70401);const W=(0,a.zo)("div",(()=>({display:"flex",flexDirection:"column"})));(0,a.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingXSmall,color:t.colors.contentPrimary,whiteSpace:"pre-wrap"}})).displayName="StoreCountHeading";const M=(0,a.zo)("div",(e=>{let{$theme:t,$hasScrollControllers:i=!1}=e;return{display:"flex",flexDirection:"row",alignItems:"center",gap:"8px",overflowX:"auto",WebkitOverflowScrolling:"touch",scrollbarWidth:"none","::-webkit-scrollbar":{display:"none"},...i&&{paddingLeft:t.sizing.scale800}}})),F=(0,a.zo)("a",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentPrimary,textDecoration:"none",textAlign:"center",cursor:"pointer",whiteSpace:"nowrap",display:"flex",flexDirection:"column",alignItems:"center",minWidth:t.sizing.scale2400,aspectRatio:"1:1"}}));F.displayName="ShowMore";const H=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{marginBottom:t.sizing.scale300}})),N=(0,a.zo)("span",(e=>{let{$theme:t}=e;return{paddingTop:t.sizing.scale500}})),j=(0,a.zo)("div",{position:"relative"}),q=e=>{let{defaultSelectedStoreUuid:t,storesWithProducts:i=[],isMobile:r,onSelectStore:l,onExpandList:a,expandListLabel:d,title:u,showHeader:h=!0,tooltip:m,isInCart:g=!1,showPrice:Z=!0}=e;const b=(0,n.ZP)(),[f,x]=s.useState(null),{containerRef:y,getPageProps:v,isPreviousPageDisabled:B,isNextPageDisabled:L,handlePageChange:I}=(0,D.Z)({scrollOffset:-228}),T=(0,U.I0)(),q=i.findIndex((e=>e.storeUuid===t));(0,o.useEffect)((()=>{y?.current&&(y.current.scrollLeft=-228*-q)}),[y,q]);const E=(0,$.Z)("enable_canonical_pdp_split_cart_tooltip");(0,o.useEffect)((()=>{m&&E&&b("eats:split_cart_nudge_prompt_shown")}),[m,E,b]);const A=(0,O.Z)(x,200);return 0===i.length?null:(0,p.BX)(W,{onMouseEnter:()=>{i.length>1&&A(!0)},onMouseLeave:()=>{A(!1)},children:[h?(0,p.tZ)(H,{children:(0,p.tZ)(c.ZP,{text:u})}):null,E&&m?(0,p.tZ)(z.j,{kind:_.TO.info,overrides:{Root:{style:e=>{let{$theme:t}=e;return{marginLeft:0,marginRight:0,backgroundColor:t.colors.backgroundSecondary}}}},children:(0,p.tZ)(c.ZP,{text:m})}):null,(0,p.tZ)(C.Z,{isMobile:r,placement:r?P.r4.topLeft:P.r4.left,shouldShowTooltip:!g,children:(0,p.BX)(j,{children:[r?null:(0,p.tZ)(R,{shouldShowControllers:f,handlePageChange:I,isPreviousPageDisabled:B,isNextPageDisabled:L}),(0,p.BX)(M,{ref:y,$hasScrollControllers:!r,children:[i.map(((e,o)=>(0,p.tZ)("div",{onClick:()=>{T((0,X.tK)(y.current?.scrollLeft||0)),l(e,o)},...v(o,i.length),children:(0,p.tZ)(w,{storeWithProducts:e,selected:e.storeUuid===t,onClick:k.Z,width:1===i.length?"100%":"280px",showPrice:Z})},e.storeUuid))),a?(0,p.tZ)(p.HY,{children:(0,p.BX)(F,{onClick:a,role:"button",children:[(0,p.tZ)(S.default,{}),(0,p.tZ)(N,{children:d})]})}):null]})]})})]})};q.displayName="CanonicalItemHorizontalStoreSelector";const E=q;var A=i(52298),Q=i(99527),V=i(48734),Y=i(73448);const G=(0,a.zo)("div",{display:"flex",flexDirection:"column"});(0,a.zo)("a",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentPrimary,textDecoration:"none",textAlign:"center",cursor:"pointer"}})).displayName="ShowMore";const K=e=>{let{defaultSelectedStoreUuid:t,storesWithProducts:i=[],isMobile:r,onSelectStore:l,onExpandList:a,expandListLabel:d,title:u,showHeader:h=!0,tooltip:m,showPrice:g=!0}=e;const Z=s.useRef(null),b=s.useRef(null),{scrollIntoView:f}=(0,Q.Z)({ref:Z,scrollDelay:0,scrollIntoViewOptions:{behavior:"smooth",block:"center",inline:"center"}}),x=(0,n.ZP)(),{shouldShowTooltip:y}=(0,V.Z)(),v=(0,$.Z)("enable_canonical_pdp_split_cart_tooltip");return(0,o.useEffect)((()=>{m&&v&&x("eats:split_cart_nudge_prompt_shown")}),[m,v,x]),s.useEffect((()=>{b.current!==Z.current&&(f(),b.current=Z.current)}),[f]),0===i.length?null:(0,p.BX)(G,{"data-testid":"canonical-item-compact-store-selector-container",children:[h?(0,p.tZ)(c.ZP,{text:u}):null,(0,p.tZ)(A.ZP,{$height:8}),v&&m?(0,p.tZ)(z.j,{kind:_.TO.info,overrides:{Root:{style:e=>{let{$theme:t}=e;return{marginLeft:0,marginRight:0,backgroundColor:t.colors.backgroundSecondary}}}},children:(0,p.tZ)(c.ZP,{text:m})}):null,i.map(((e,i)=>(0,p.BX)("div",{onClick:()=>l(e,i),children:[0===i?null:(0,p.tZ)(A.ZP,{$height:8}),(0,p.tZ)(Y.Z,{condition:0===i&&y,wrapper:t=>(0,p.tZ)(C.Z,{placement:P.r4.left,isMobile:r,children:t},`store-${e.storeUuid}`),children:(0,p.tZ)(w,{storeWithProducts:e,selected:e.storeUuid===t,onClick:k.Z,ref:e.storeUuid===t?Z:void 0,showPrice:g})},i)]},`store-${e.storeUuid}`))),a?(0,p.BX)(p.HY,{children:[(0,p.tZ)(A.ZP,{$height:6}),(0,p.tZ)(L.zx,{kind:L.TO.monochromatic,onClick:a,children:d})]}):(0,p.tZ)(A.ZP,{$height:4})]})};K.displayName="CanonicalItemCompactStoreSelector";const J=K;var ee=i(46933),te=i(75161),ie=i(91086),oe=i(33259),re=i(34217),ne=i(70589),le=i(4909),se=i(54669);const ae=e=>{let{storesWithProducts:t=[],defaultSelectedStoreUuid:i,onSelectStore:r,onExpandList:l,expandListLabel:s,onClose:a,title:d,showPrice:u=!0}=e;const[h,m]=o.useState(null);null===h&&i&&m(i);const g=o.useCallback((e=>{e.storeUuid&&m(e.storeUuid)}),[]),Z=(0,n.ZP)(),b=(0,se.Z)(),f=o.useCallback((()=>{const e=t.findIndex((e=>e.storeUuid===h)),i=t[e];i&&r(i,e),Z("eats:canonical_product_details_merchant_selector_done_selection_click",{storeUuid:h??void 0,hasAddress:Boolean(b)}),a()}),[b,Z,a,r,h,t]);return(0,p.BX)(te.u_,{onClose:a,children:[(0,p.tZ)(ie.xB,{isExpanded:!0,leftButton:(0,p.tZ)(oe.hQ,{onClick:a}),title:(0,p.tZ)(c.ZP,{text:d})}),(0,p.tZ)(re.f,{$removeMarginTop:!0,children:(0,p.tZ)(J,{isMobile:!1,storesWithProducts:t,maxStoresInitiallyDisplayed:t.length,defaultSelectedStoreUuid:h,showHeader:!1,onSelectStore:g,onExpandList:l,expandListLabel:s,title:d,showPrice:u})}),(0,p.tZ)(ne.m,{children:(0,p.tZ)(le.V,{onClick:f,children:(0,p.tZ)(ee.v,{id:"shared.done"})})})]})};var de=i(58679),ce=i(34567);const ue=(0,a.w1)(de._g,(e=>{let{$theme:t}=e;return{background:"white",padding:t.sizing.scale600,position:"sticky",top:0}})),he=(0,a.zo)("footer",(e=>{let{$theme:t}=e;return{background:"white",padding:t.sizing.scale600,position:"sticky",bottom:0,boxShadow:t.lighting.deepBelow}})),pe=e=>{let{storesWithProducts:t=[],defaultSelectedStoreUuid:i,onSelectStore:r,onExpandList:l,expandListLabel:s,onClose:a,title:d,showPrice:u=!0}=e;const[h,m]=o.useState(null);null===h&&i&&m(i);const g=o.useCallback((e=>{e.storeUuid&&m(e.storeUuid)}),[]),Z=(0,n.ZP)(),b=(0,se.Z)(),f=o.useCallback((()=>{const e=t.findIndex((e=>e.storeUuid===h)),i=t[e];i&&r(i,e),Z("eats:canonical_product_details_merchant_selector_done_selection_click",{storeUuid:h??void 0,hasAddress:Boolean(b)}),a()}),[a,r,h,Z,t,b]);return(0,p.BX)(de.R1,{onClose:a,children:[(0,p.tZ)(ue,{children:(0,p.tZ)(c.ZP,{text:d})}),(0,p.tZ)(de.bd,{children:(0,p.tZ)(J,{isMobile:!0,storesWithProducts:t,maxStoresInitiallyDisplayed:t.length,defaultSelectedStoreUuid:h,onExpandList:l,expandListLabel:s,onSelectStore:g,showHeader:!1,title:d,showPrice:u})}),(0,p.tZ)(he,{children:(0,p.tZ)(ce.Z,{onClick:f,children:(0,p.tZ)(ee.v,{id:"shared.done"})})})]})};var me=i("__fusion__690");const ge=(0,a.zo)(u.Z,(e=>{let{$theme:t}=e;return{flex:"0 0 auto",height:"40px",width:"40px",objectFit:"cover",border:`1px solid ${t.colors.borderOpaque}`,borderRadius:"40px;"}})),Ze=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",gap:t.sizing.scale600,height:t.sizing.scale1200,justifyContent:"space-between",cursor:"pointer"}})),be=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{width:"100%",display:"flex",flexDirection:"column",gap:t.sizing.scale100,overflow:"hidden",...t.typography.LabelMedium}})),fe=(0,a.zo)("p",(e=>{let{$theme:t}=e;return{color:t.colors.contentSecondary,...t.typography.ParagraphSmall}})),xe=(0,a.zo)("p",(e=>{let{$theme:t}=e;return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",...t.typography.LabelMedium}})),ye=(0,a.zo)("div",{display:"flex"}),ve=(0,a.zo)(me.default,(e=>{let{$theme:t}=e;return{color:t.colors.contentStateDisabled}})),we=e=>{let{selectedStore:t,onOpenPopup:i,hiddenStores:o}=e;const n=(0,r.T)(),l=`${o&&o>1?n("canonical_item.store_selector.compare_at_x_store",{count:o}):n("canonical_item.store_selector.compare_at_1_store")}`;return(0,p.BX)(Ze,{onClick:i,children:[(0,p.tZ)(ge,{src:t.leadingImageUrl||""}),(0,p.BX)(be,{children:[(0,p.tZ)(xe,{children:t.merchantName}),(0,p.tZ)(fe,{children:o&&o>0?l:null})]}),(0,p.tZ)(ye,{children:(0,p.tZ)(ve,{size:24})})]})};var Se=i(19912);const $e=[],ze=(e,t,i)=>{const o=e.findIndex((e=>e.storeUuid===t)),r=o>=0?e[o]:null;return o<i||!r?e.slice(0,i):[r,...e].slice(0,i)},_e=e=>{let{expansionMode:t="show_more",displayType:i="vertical",title:s,...a}=e;const{storesWithProducts:d=$e,maxStoresInitiallyDisplayed:c=3,showMoreIncrement:u=6,isMobile:h,productUuid:m,onSelectStore:g,tooltip:Z,defaultSelectedStoreUuid:b,isInCart:f=!1}=a,x=(0,n.ZP)(),y=(0,r.T)(),{canonicalItemStoreUuid:v,setCanonicalItemStoreUuid:w,menuItem:S}=(0,l.e3)(),[z,_]=o.useState(c),C=d.length-z,P=Math.min(C,u),k=o.useRef(0),[B,L]=o.useState(!1),I="show_more"===t?y("show_x_more",{count:P}):y("canonical_item.store_selector.see_all"),T=o.useMemo((()=>ze(d,v,z)),[v,z,d]),[R,D]=o.useState(T);T!==R&&D(T);const U=d.length===R.length,X=o.useCallback((e=>{const t=ze(d,e.storeUuid,z);D(t)}),[d,z]),O=o.useCallback(((e,t)=>{w(e.storeUuid),x("eats:merchant_selected_in_product_page",{productDetails:{canonicalPDP:{canonicalProductUuid:String(m||""),selectedMerchant:e,selectedMerchantIndex:t}}})}),[x,m,w]),W=o.useCallback(((e,t)=>{O(e,t),X(e)}),[O,X]),M=o.useCallback((()=>{const e=z+P,{title:t,uuid:i}=S?.data||{};k.current=k.current+1,_(e),x("eats:product_details_merchant_selector_see_more_clicked",{productDetails:{itemName:t,itemUuid:i,canonicalPDP:{numberOfMerchantsVisible:e,totalNumberOfMerchants:d.length,totalNumberOfClicks:k.current}}})}),[x,z,S?.data,P,d.length]),F=(0,se.Z)(),H=o.useCallback((()=>{const e=a.storesWithProducts?.map((e=>e.storeUuid))?.filter(Boolean);x("eats:canonical_product_details_merchant_selector_expanded_click",{storeUuids:e,hasAddress:Boolean(F)}),L(!0)}),[a.storesWithProducts,F,x]),N=o.useCallback((()=>L(!1)),[]),j="show_more"===t?M:H,q=o.useMemo((()=>d.find((e=>e.storeUuid===v))??d[0]),[v,d]),A="horizontal"===i?E:J,Q=h?pe:ae,V=!(0,$.Z)("canonical_pdp_show_prices_on_merchant_selector")||f,Y=(0,Se.Z)({eventName:"eats:canonical_product_details_merchant_selector_impression",eventPayload:{storeUuid:q?.storeUuid??void 0,hasAddress:Boolean(F)}});return(0,p.BX)("span",{ref:Y,children:["dropdown"===i?q?(0,p.tZ)(we,{selectedStore:q,hiddenStores:C,onOpenPopup:H}):null:(0,p.tZ)(A,{...a,defaultSelectedStoreUuid:f?b:v,storesWithProducts:R,onSelectStore:g??O,onExpandList:U?null:j,expandListLabel:U?null:I,title:s,tooltip:Z,isInCart:f,showPrice:V}),B?(0,p.tZ)(Q,{...a,defaultSelectedStoreUuid:f?b:v,onSelectStore:g??W,onClose:N,title:s,showPrice:V}):null]})}},213:(e,t,i)=>{i.d(t,{A:()=>s});var o=i(93778),r=i(91931),n=i(59924);const l=(0,r.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",gap:t.sizing.scale300,marginTop:t.sizing.scale200}})),s=e=>{let{tags:t}=e;return t?(0,n.tZ)(l,{children:t.map(((e,t)=>(0,n.tZ)(o.Z,{tag:e},`tag-${t}`)))}):null}},48734:(e,t,i)=>{i.d(t,{Z:()=>s});var o=i(74369),r=i(68799),n=i(61127),l=i(87444);const s=()=>{const e=(0,l.Z)("canonical_product_store_selector_v2_enabled")?"uev2.store-selector-tooltip-v2":"uev2.store-selector-tooltip",[t,i]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const t=(0,r.Z7)(e),o=(0,n.Z)(t)||t.show;i(o),o&&setTimeout((()=>{(0,r.pc)(e,{show:!1})}),300)}),[e]),{shouldShowTooltip:t}}},74820:(e,t,i)=>{i.d(t,{r:()=>s});var o=i(91931),r=i(12675),n=i(59924);const l=(0,o.zo)("h1",(e=>{let{$theme:t,$overrides:i}=e;return{...t.typography.HeadingLarge,marginBottom:t.sizing.scale600,...i}})),s=(0,o.Le)(l,(e=>function(t){const{modalTitleRef:i}=(0,r.v)();return(0,n.tZ)(e,{ref:i,$overrides:t.overrides??{},children:t.children})}))},52945:(e,t,i)=>{i.d(t,{R:()=>S,T:()=>w});var o=i(34337),r=i(91931),n=i(86695),l=i(68065),s=i(46933),a=i(21491),d=i(59924);const c=(0,r.zo)("div",{height:"100vh",position:"relative"}),u=(0,r.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale300} ${t.sizing.scale600} ${t.sizing.scale600} ${t.sizing.scale600}`,display:"flex",flexDirection:"column",gap:t.sizing.scale300}})),h=(0,r.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale800} ${t.sizing.scale600}`,display:"flex",flexDirection:"column",gap:t.sizing.scale300}})),p=(0,r.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"row",gap:t.sizing.scale300,overflow:"hidden"}})),m=(0,r.zo)("div",(e=>{let{$theme:t}=e;return{border:`3px solid ${t.colors.borderOpaque}`,padding:t.sizing.scale600,borderRadius:t.borders.radius400,display:"flex",flexDirection:"column",gap:t.sizing.scale300}})),g=(0,r.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.sizing.scale300}})),Z=(0,r.zo)("div",(e=>{let{$theme:t}=e;return{border:`3px solid ${t.colors.borderOpaque}`,padding:`${t.sizing.scale600} ${t.sizing.scale700}`,borderRadius:t.borders.radius400,display:"flex",gap:t.sizing.scale600,alignItems:"center"}})),b=(0,r.zo)("div",(e=>{let{$theme:t,$isSticky:i=!0}=e;return{boxShadow:i?t.shadows.floatingButton:"none",position:i?"absolute":"inherit",bottom:0,width:"100%"}})),f=(0,r.zo)("div",{display:"flex",flexDirection:"column",gap:"2px"}),x=(0,r.zo)("div",(e=>{let{$theme:t}=e;return{padding:`${t.sizing.scale500} ${t.sizing.scale600}`}})),y=()=>(0,d.BX)(m,{children:[(0,d.tZ)(o.Z,{height:"20px",width:"124px",animation:!0}),(0,d.tZ)(o.Z,{height:"20px",width:"124px",animation:!0})]}),v=()=>(0,d.BX)(Z,{children:[(0,d.BX)(f,{children:[(0,d.tZ)(o.Z,{height:"20px",width:"72px",animation:!0}),(0,d.tZ)(o.Z,{height:"20px",width:"184px",animation:!0}),(0,d.tZ)(o.Z,{height:"20px",width:"167px",animation:!0}),(0,d.tZ)(o.Z,{height:"20px",width:"55px",animation:!0})]}),(0,d.tZ)(o.Z,{width:a.IJ,height:a.xf,overrides:{Root:{style:{borderRadius:"50%"}}}})]}),w=e=>{let{showHeader:t=!1}=e;return(0,d.BX)(g,{children:[t?(0,d.tZ)(o.Z,{height:"28px",animation:!0}):null,(0,d.BX)(p,{children:[(0,d.tZ)(v,{}),(0,d.tZ)(v,{})]})]})},S=()=>(0,d.BX)(c,{children:[(0,d.tZ)(o.Z,{height:"211px"}),(0,d.BX)(u,{children:[(0,d.tZ)(o.Z,{height:"24px",animation:!0}),(0,d.tZ)(o.Z,{height:"24px",width:"174px",animation:!0}),(0,d.tZ)(o.Z,{height:"24px",width:"58px",animation:!0})]}),(0,d.BX)(h,{children:[(0,d.tZ)(o.Z,{height:"28px",animation:!0}),(0,d.BX)(p,{children:[(0,d.tZ)(y,{}),(0,d.tZ)(y,{}),(0,d.tZ)(y,{})]})]}),(0,d.tZ)(x,{children:(0,d.tZ)(w,{showHeader:!0})}),(0,d.tZ)(b,{$isSticky:!1,children:(0,d.tZ)(n.zx,{size:l.NO.large,disabled:!0,overrides:{BaseButton:{style:e=>{let{$theme:t}=e;return{margin:t.sizing.scale600,width:"calc(100% - 32px)"}}}},children:(0,d.tZ)(s.v,{id:"shared.add_to_cart"})})})]})},95768:(e,t,i)=>{i.d(t,{Z:()=>R});var o=i("__fusion__476"),r=i(74369),n=i(14016),l=i(91931),s=i(33497),a=i(57444),d=i(57597),c=i(66958),u=i(87444),h=i(53213),p=i(53890),m=i(44606),g=i(72179),Z=i(78422),b=i(32857),f=i(33535),x=i(59924);const y=e=>`${e}px`,v=36,w=y(v),S=(e,t)=>!e||!t||t<v?v:t+8,$=(e,t)=>-(60-S(e,t)/2),z=(0,l.zo)("div",(e=>{let{$theme:t,disabled:i,$isSecondary:o,$isClosed:r,$hasQuantity:n,$quantityWidth:l}=e;return{position:"relative",width:y(r?S(n,l):120),height:y(36),transition:"width 100ms linear",borderRadius:t.borders.pillButtonBorderRadius,overflow:"hidden",background:t.colors.buttonPrimaryFill,color:t.colors.buttonPrimaryText,cursor:"auto",...o&&{background:t.colors.buttonSecondaryFill,color:t.colors.buttonSecondaryText},...i&&{...(0,a.Z)(t)}}})),_=(0,l.zo)("div",(e=>{let{$isClosed:t,$hasQuantity:i,$quantityWidth:o}=e;return{position:"absolute",right:i&&t?y($(i,o)):0,transition:"right 100ms linear",width:y(120),display:"flex",justifyContent:"space-between",alignItems:"center"}})),C=(0,l.zo)("button",(e=>{let{$theme:t,$isSecondary:i,$isClosed:o,$hasQuantity:r,$quantityWidth:n}=e;return{...(0,s.Z)({$theme:t,radius:"pillButtonBorderRadius"}),width:w,minWidth:w,height:w,minHeight:w,padding:0,display:"flex",justifyContent:"center",alignItems:"center",background:"transparent","@media (hover: hover)":{":hover":{background:i?t.colors.buttonSecondaryHover:t.colors.contentTertiary}},":active":{background:i?t.colors.buttonSecondaryHover:t.colors.contentTertiary},":disabled":{color:t.colors.contentStateDisabled,fill:t.colors.disabled,background:"transparent"},...o&&{width:y(S(r,n)),minWidth:y(S(r,n)),height:y(v),minHeight:y(v),margin:0,...Boolean(n)&&{padding:"0 4px"}}}})),P=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{position:"absolute",left:"50%",transform:"translateX(-50%)",...t.typography.LabelLarge,display:"flex",justifyContent:"center",alignItems:"center",whiteSpace:"nowrap",textAlign:"center"}})),k=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelSmall,textWrap:"nowrap"}})),B=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",justifyContent:"space-between",alignItems:"center",minWidth:y(88),backgroundColor:t.colors.backgroundSecondary,borderRadius:t.sizing.scale700}})),L=e=>(0,x.tZ)(b.Z,{kind:"secondary",size:"compact",shape:"circle",onClick:e.onClick,overrides:{BaseButton:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundSecondary,":hover":{backgroundColor:t.colors.backgroundSecondary}}}}},...e,children:e.children}),I=e=>{const t=(0,n.T)();return(0,x.tZ)(L,{disabled:e.isDisabled||e.getQuantityLimit()!==d.y.BELOW_LIMIT,onClick:e.onPlus,"aria-label":t("shared.increment"),children:(0,x.tZ)(Z.Z,{name:"PlusSmallFilled",size:20})})},T=e=>{let{type:t="primary",isClosable:i=!1,isDisabled:l=!1,item:s,storeUuid:a,quantity:b,updateQuantity:y,isRemovable:v=!0,overrideQuantityConstraints:w,overridingMeasurementType:S,analyticsLabel:$}=e;const{isCartDrafting:T}=(0,g.Z)(),R=m.Tf.from(b),D=(0,d.Z)({item:s,storeUuid:a,cartQuantity:R.toInt(),overrideQuantityConstraints:w}),U=(0,n.T)(),X="secondary"===t,O="primary"===t,W=(0,u.Z)("price_items_by_weight")&&(0,c.jx)(s,S),M=(0,c.L5)(s,w),F=W&&M.minimumQuantity||1,H=m.Tf.from(b).lte(F),N=(0,f.ZP)(),j=o.useRef(!1),q=(0,r.useMemo)((()=>W?`${R.toFloat()} ${(0,c.YP)(s)||""}`:R.toFloat()),[R,W,s]);(0,r.useEffect)((()=>{j.current&&N("eats:item_quantity_update",{quantity:R.toFloat(),analyticsLabel:$}),j.current=!1}),[$,R,N]);const[E,A]=(0,r.useState)(!1),Q=i&&!E,V=(0,r.useCallback)((()=>{y(p.TX.decrement),j.current=!0,i&&H&&A(!1)}),[i,H,y]),Y=(0,r.useCallback)((()=>{i&&A(!0)}),[i]),G=(0,r.useCallback)((()=>{y(p.TX.increment),j.current=!0}),[y]),[K,J]=(0,r.useState)(0),ee=(0,r.useRef)(null);(0,r.useEffect)((()=>{q&&ee.current?.clientWidth&&J(ee.current.clientWidth)}),[q]);const te=(0,r.useRef)(null);(0,h.Z)(te,(()=>{A(!1)}),i&&E);const ie=l||(v?R.isLt(F):R.isLte(F));return T&&O&&!b?(0,x.tZ)(I,{isDisabled:l,getQuantityLimit:D,onPlus:G}):T&&X||T&&O&&Boolean(b)?(0,x.BX)(B,{children:[(0,x.tZ)(L,{disabled:l,onClick:V,"aria-label":U("shared.decrement"),"data-test":"item-stepper-dec",children:R.isGt(F)||!v?(0,x.tZ)(Z.Z,{name:"MinusSmallFilled",size:20}):H?(0,x.tZ)(Z.Z,{name:"TrashCanOutlined",size:16}):null}),(0,x.tZ)(k,{ref:ee,children:q}),(0,x.tZ)(I,{isDisabled:l,getQuantityLimit:D,onPlus:G})]}):(0,x.tZ)(z,{ref:te,disabled:l,$isSecondary:X,$isClosed:Q,$hasQuantity:Boolean(b),$quantityWidth:K,"data-test":"item-stepper",children:(0,x.BX)(_,{$isClosed:Q,$hasQuantity:Boolean(b),$quantityWidth:K,children:[(0,x.tZ)(C,{disabled:ie,$isSecondary:X,$isClosed:Q,onClick:V,"aria-label":U("shared.decrement"),"data-test":"item-stepper-dec",children:R.isGt(F)||!v?(0,x.tZ)(Z.Z,{name:"MinusSmallFilled",size:20}):H?(0,x.tZ)(Z.Z,{name:"TrashCanFilled",size:16}):null}),(0,x.tZ)(C,{disabled:l||D()!==d.y.BELOW_LIMIT,$isSecondary:X,$isClosed:Q,onClick:G,"aria-label":U("shared.increment"),"data-test":"item-stepper-inc",children:(0,x.tZ)(Z.Z,{name:"PlusSmallFilled",size:20})}),(0,x.tZ)(P,{"data-test":"item-stepper-quantity",children:Q&&b?(0,x.tZ)(C,{disabled:l,$isSecondary:X,$isClosed:Q,$hasQuantity:Boolean(b),$quantityWidth:K,onClick:Y,children:(0,x.tZ)("div",{ref:ee,children:q})}):(0,x.tZ)("div",{ref:ee,children:q})})]})})},R=o.memo(T)},99527:(e,t,i)=>{i.d(t,{Z:()=>n});var o=i(75514),r=i(74369);const n=e=>{let{ref:t,scrollDelay:i,scrollIntoViewOptions:n={behavior:"smooth",block:"start"}}=e;return{scrollIntoView:(0,r.useCallback)((()=>{let e;const r=t?.current;if(r){if(o.Z&&r){const t=r.getBoundingClientRect().top,l=o.Z.innerHeight;t>=0&&t<=l||(i?e=setTimeout((()=>{r.scrollIntoView(n)}),i):r.scrollIntoView(n))}return()=>clearTimeout(e)}}),[t,i,n])}}}}]);