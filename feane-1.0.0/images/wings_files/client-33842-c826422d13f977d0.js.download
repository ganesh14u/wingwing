"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[33842],{34911:(e,t,r)=>{r.d(t,{Z:()=>w});var n=r(14016),i=r(91931),a=r(29194),o=r(36278),l=r(67780),d=r(11652),s=r(62146),c=r(55811),u=r(33535),h=r(59924);const m=(0,i.zo)("div",{display:"flex"}),f={width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center"},p=(0,i.w1)(l.c,f),g=(0,i.zo)(p,(e=>{let{$isTransparent:t,$theme:r}=e;return{...t?{backgroundColor:r.colors.borderTransparent,color:r.colors.contentInversePrimary,":hover":{background:`${r.colors.backgroundOverlay}`},":active":{background:r.colors.backgroundOverlayArt},":disabled":{color:r.colors.contentStateDisabled,backgroundColor:r.colors.borderTransparent,cursor:"not-allowed"}}:{}}})),b=(0,i.zo)("button",(e=>{let{disabled:t,$theme:r}=e;return{...f,cursor:t?"not-allowed":"pointer",color:t?r.colors.contentStateDisabled:r.colors.contentPrimary}})),w=e=>{let{backwardEnabled:t,forwardEnabled:r,analyticsLabel:i,customEventMetadata:l,transparent:f,onPageChange:p}=e;const w=(0,a.gm)(),Z=(0,n.T)(),v="postmates"===(0,c.Z)(),y=(0,u.ZP)(),x=v?b:g,I=v?s.Z:d.Z;return(0,h.BX)(m,{children:[(0,h.tZ)(x,{"data-testid":"previous-arrow-carousel",onClick:()=>{p("back"),y("eats:carousel_arrow_click",{param_value:"back",label:i,...l||{}})},disabled:!t,"aria-label":Z("shared.previous"),$isTransparent:f,children:(0,h.tZ)(I,{size:16,rotate:"ltr"===w?0:180})}),(0,h.tZ)(o.ZP,{$width:"4px"}),(0,h.tZ)(x,{"data-testid":"next-arrow-carousel",onClick:()=>{p("forward"),y("eats:carousel_arrow_click",{param_value:"forward",label:i,...l||{}})},disabled:!r,"aria-label":Z("shared.next"),$isTransparent:f,children:(0,h.tZ)(I,{size:16,rotate:"ltr"===w?180:0})})]})}},55117:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(74369),i=r(73518),a=r(59924);function o(e,t){return(0,a.tZ)(i.Z,{viewBox:"0 0 24 24",ref:t,...e,children:(0,a.tZ)("path",{d:"M12 1C5.9 1 1 5.9 1 12s4.9 11 11 11 11-4.9 11-11S18.1 1 12 1zm1.5 18h-3v-8h3v8zM12 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})})}const l=n.forwardRef(o)},76173:(e,t,r)=>{r.d(t,{Z:()=>K});var n=r(91931),i=r(29194),a=r(14016),o=r(46933),l=r(36278),d=r(11652),s=r(62146),c=r(67780),u=r(34274),h=r(74369),m=r(17222),f=r(29802),p=r(47986),g=r(99317),b=r(94813),w=r(59924);const Z=(0,n.zo)("div",(e=>{let{$height:t,$shouldPulse:r,$theme:n}=e;return{...n.typography.LabelMedium,borderRadius:"40px",...(0,g.WQ)({height:t,shouldPulse:r,theme:n})}})),v=(0,n.zo)("div",(e=>{let{$shouldShowHiddenMessage:t}=e;return{position:"relative",top:"-50%",transition:"transform 0.4s ease",transform:t?"translate(0, 50%)":"none",width:"100%"}})),y=(0,n.zo)("div",(e=>{let{$height:t}=e;return{alignItems:"center",display:"flex",height:t?t-16+"px":"auto",justifyContent:"center",padding:"8px 16px",textAlign:"center"}})),x=(0,n.zo)("div",(e=>({display:"flex",justifyContent:"center",padding:"8px 16px",textAlign:"center",transition:"font-size 0.2s linear",...e.$shouldShrinkText?{fontSize:"10px"}:null}))),I=e=>{const t=(0,b.TH)(),{countdown:r,formattedTimeLeft:n,minuteMessage:i,shouldPulse:a,shouldShowMinuteMessage:o}=(0,f.Z)("BANDWAGON",{createTimer:!0,feedItemUuid:e.feedItemUuid||""}),[l,d]=h.useState(void 0),s=h.useRef(null);if(h.useEffect((()=>{const e=s?.current;e&&!l&&d(e.clientHeight)}),[l,s]),!r)return null;const c=r.storefrontTimerMessage.replace("%1$s",n);return(0,w.tZ)(m.rU,{to:(0,p.Xvz)({location:t,feedItemUuid:e.feedItemUuid}),children:(0,w.tZ)(Z,{$height:l,$shouldPulse:a,children:(0,w.BX)(v,{$shouldShowHiddenMessage:o,children:[(0,w.tZ)(y,{$height:l,children:i}),(0,w.tZ)(x,{$shouldShrinkText:o,ref:s,children:c})]})})})};var U=r(55811),$=r(55117),k=r(74938),T=r(92496),z=r(38379),S=r(45474);const C=(0,n.w1)(S.b,{marginTop:0}),L=()=>{const{rankingBottomSheet:e}=(0,k.Z)(),{showEuDisclaimer:t}=(0,T.Z)();return t?(0,w.BX)(w.HY,{children:[(0,w.tZ)(l.sA,{}),(0,w.tZ)(S.ZP,{id:"carousel-eu-disclaimer",children:t=>{let{isHovering:r}=t;return(0,w.BX)(w.HY,{children:[(0,w.tZ)($.Z,{color:"contentTertiary",size:14}),e?(0,w.tZ)(C,{$isVisible:r,children:(0,w.tZ)(z.y,{bottomSheet:e})}):null]})}})]}):null};var D=r(14966),A=r(85218);const B=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentSecondary,marginTop:"4px"}})),P=(0,n.zo)("div",(e=>{let{$cuisineFilterEnabled:t}=e;return{...t?{marginBottom:"16px"}:{marginBottom:"24px"},display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative"}})),E=(0,n.zo)("div",{alignItems:"start",display:"flex",flexDirection:"row",flex:"2 1 0%"}),M=(0,n.zo)("div",{display:"flex",justifyContent:"center",flex:"1 1 0%",padding:"0 24px"}),F=(0,n.zo)("div",(e=>({display:"flex",alignItems:"center",justifyContent:"flex-end",flex:"2 1 0%",..."ltr"===e.$direction?{right:0}:{left:0}}))),X=(0,n.zo)("div",{display:"flex",alignItems:"center"}),_={width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},H=(0,n.w1)(c.c,_),O=(0,n.zo)("button",(e=>{let{disabled:t,$theme:r}=e;return{..._,cursor:t?"not-allowed":"pointer",color:t?r.colors.contentStateDisabled:r.colors.contentPrimary}})),V=(0,n.zo)("div",(e=>{let{$theme:t,$as:r}=e;return{..."h3"===r?t.typography.HeadingSmall:t.typography.DisplayBoldXSmall,display:"flex",flexGrow:0,alignItems:"center"}})),j=(0,n.w1)(D.hh,(e=>{let{$theme:t}=e;return t.typography.LabelMedium})),K=e=>{const t=(0,i.gm)(),r=(0,u.Z)({feedItemUuid:e.feedItemUuid||""}),n=(0,a.T)(),c="postmates"===(0,U.Z)(),h=c?O:H,m=c?s.Z:d.Z,f=(0,A.Z)();return(0,w.BX)(P,{$cuisineFilterEnabled:f,children:[(0,w.tZ)(E,{onClick:e.onClickTitle,children:(0,w.BX)("div",{children:[(0,w.BX)(V,{$as:e.$as,children:[e.title,e.title?(0,w.tZ)(L,{}):null]}),e.subtitle?(0,w.tZ)(B,{children:e.subtitle}):null]})}),r&&e.feedItemUuid?(0,w.tZ)(M,{children:(0,w.tZ)(I,{feedItemUuid:e.feedItemUuid})}):null,(0,w.BX)(F,{$direction:t,children:[e.viewAllLocation?(0,w.tZ)(j,{onClick:t=>{"function"==typeof e.onViewAllClick&&e.onViewAllClick(t)},to:e.viewAllLocation,children:e.viewAllTitle?e.viewAllTitle:(0,w.tZ)(o.v,{id:"carousel.view_all"})}):null,e.paginated?(0,w.BX)(w.HY,{children:[(0,w.tZ)(l.ZP,{$width:"40px"}),(0,w.BX)(X,{children:[(0,w.tZ)(h,{onClick:t=>e.onPageChange("back",t),disabled:!e.backwardEnabled,"aria-label":n("shared.previous"),children:(0,w.tZ)(m,{size:16,rotate:"ltr"===t?0:180})}),(0,w.tZ)(l.ZP,{$width:"2px"}),(0,w.tZ)(h,{onClick:t=>e.onPageChange("forward",t),disabled:!e.forwardEnabled,"aria-label":n("shared.next"),children:(0,w.tZ)(m,{size:16,rotate:"ltr"===t?180:0})})]})]}):null]})]})}},74938:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(92496),i=r(89151),a=r(2237),o=r(62459);var l=r(14016);const d=function(){const{showEuDisclaimer:e,showFrenchDisclaimer:t}=(0,n.Z)(),r=(0,l.T)(),d=function(e,t){const r=(0,o.Z)("getFeedEuDisclaimerV1"),n=(0,a.H)("getFeedEuDisclaimerV1",e);return(0,i.useQuery)({queryKey:n,queryFn:e=>{let{queryKey:t}=e;return r.request("getFeedEuDisclaimerV1",t[1])},...t?.queryObserverOptions})}(void 0,{queryObserverOptions:{enabled:e}}),s={title:{text:r("euDisclaimer.HeaderTitle")},body:{textFormat:`<span>${r("euDisclaimer.Body")}, <span style="text-decoration: underline;text-decoration-color:#545454;text-underline-offset:4;"><a href=https://www.uber.com/legal/document/?name=rankings-on-uber-eats>${r("euDisclaimer.clickHereText")}</a></span></span>`},buttonText:r("euDisclaimer.dismissText"),paragraphs:null};return{ratingLink:"https://www.uber.com/legal/document/?name=ratings-and-reviews-on-uber-eats",rankingDisclaimer:d.data?.markup,rankingBottomSheet:t?d.data?.bottomSheet:s}}},29802:(e,t,r)=>{r.d(t,{Z:()=>g});var n=r(74369),i=r(14016),a=r(53308),o=r(15070),l=r(59147),d=r(8057),s=r(8109),c=r(32504),u=r(99317),h=r(9829),m=r(95761),f=r(34274),p=r(70247);function g(e,t){const r=(0,a.I0)(),g=(0,i.T)(),{cacheKey:Z}=(0,c.Z)(),{feedItemsUpdate:v,getFeedItemsUpdate:y}=(0,s.Z)(),x=(0,o.v)((e=>{let{countdowns:t}=e;return t})),I=(0,o.v)((e=>{let{feed:t}=e;return(0,h._z)(t,Z)})),{serverCart:U}=(0,p.iQ)(),$=(0,f.Z)({storeUuid:U.data?.storeUuid}),k=(0,u.VA)({countdowns:x&&x.data||[],countdownLabel:e,feedItemUuid:t.feedItemUuid,storeUuid:t.storeUuid}),T=(0,u.VA)({countdowns:I&&I.data&&I.data.countdowns||[],countdownLabel:e,feedItemUuid:t.feedItemUuid,storeUuid:t.storeUuid}),z=T?.timestamp.end||k?.timestamp.end,[S,C]=(0,n.useState)(w(z)),[L,D]=(0,n.useState)(Math.floor(S/60));(0,n.useEffect)((()=>{let e;return t.createTimer&&(e=setTimeout((()=>{const e=w(z);e!==S&&C(e)}),1e3)),()=>clearTimeout(e)}),[z,t.createTimer,S]),(0,n.useEffect)((()=>{if(0===S&&!v.isLoading&&!v.hasLoaded){const e=t.feedItemUuid||t.storeUuid;r((0,l.X2)(e)),r((0,d.hW)()),r((0,h.iO)({cacheKey:Z,feedItemOrStoreUuid:e})),r((0,m.Lu)("ASAP"))}}),[Z,r,v.hasLoaded,v.isLoading,t.feedItemUuid,t.storeUuid,S]),(0,n.useEffect)((()=>{0===S&&!v.isLoading&&!v.hasLoaded&&t.feedItemUuid&&k&&T&&k.timestamp.end===T.timestamp.end&&y([t.feedItemUuid])}),[k,T,v.hasLoaded,v.isLoading,y,t.feedItemUuid,S]),(0,n.useEffect)((()=>{S>0&&!v.isLoading&&v.hasLoaded&&(r((0,h.A5)({cacheKey:Z})),$&&r((0,m.Lu)("BANDWAGON")))}),[Z,r,v.hasLoaded,v.isLoading,$,S]);const A=Math.floor(S/60),B=[0,1].includes(S%60)&&A>0;B&&L!==A&&D(A);const P=L>1?g("bandwagon.x_minutes_left",{time:L}):g("bandwagon.one_minute_left"),E=T?.totalDurationInSeconds||k?.totalDurationInSeconds;return{countdown:k,formattedTimeLeft:b(S),percentTimeLeft:S/(E||S),minuteMessage:P,shouldPulse:S<=61,shouldShowMinuteMessage:B,timeLeft:S}}const b=e=>{const t=Math.floor(e/60);let r=String(e%60);return 1===r.length&&(r=`0${r}`),`${t}:${r}`},w=e=>{if(null==e)return-1;const t=Date.now(),r=parseInt(""+(e-t)/1e3);return r>0?r:0}},8109:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(74369),i=r(15070),a=r(71576),o=r(9829),l=r(32504);const d=()=>{const{cacheKey:e}=(0,l.Z)(),t=(0,i.v)((t=>{let{feed:r}=t;return(0,o._z)(r,e)})),r=(0,a.Z)("getFeedItemsUpdateV1"),d=(0,n.useCallback)((t=>r({cacheKey:e,feedItemUuids:t})),[e,r]);return{feedItemsUpdate:t.data?.feedItemsUpdate||{...o.Fo},feedItemUuids:t.data?.feedItemsUpdate?.feedItemUuids||[],getFeedItemsUpdate:d}}}}]);