"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[76979],{76979:(e,t,i)=>{i.d(t,{Z:()=>b});var r=i(74369),n=i(99015),l=i(96911),a=i(86745),o=i(91931),d=i(58531),s=i(71454),c=i.n(s),h=i(60849),g=i(43426),p=i(54192),u=i(7760),Z=i(59924);const m=(0,o.zo)("ul",(e=>{let{$theme:t,$supportsScrollSnapping:i,$textDirection:r}=e;const n=t.sizing.scale800;return{display:"flex",flexShrink:0,flexGrow:0,flexBasis:"100%",width:"100%",...i?{scrollSnapAlign:"start"}:{},..."ltr"===r?{marginRight:n}:{marginLeft:n}}})),f=(0,o.zo)("li",(e=>{let{$theme:t,$textDirection:i}=e;const r="22px";return{..."ltr"===i?{marginRight:r}:{marginLeft:r}}})),b=e=>{let{featuredStores:{stores:t,header:i},feedItemUuid:o,customEventMetadata:s,position:b,feedItem:x}=e;const{containerRef:w,getPageChunks:y,getPageProps:$,isPreviousPageDisabled:v,isNextPageDisabled:C,handlePageChange:k,supportsScrollSnapping:I,textDirection:P}=(0,l.Z)(),S=w.current?.parentElement?Math.round(w.current.parentElement.offsetWidth/152):8,B=(0,r.useMemo)((()=>{const e=t?.map(((e,i)=>(0,Z.tZ)(f,{$textDirection:P,children:(0,Z.tZ)(n.ZP,{store:e,metadata:{isDesktop:!0},imageSettings:{diameter:130,useLazyLoad:i>=S},analyticsInfo:{customEventMetadata:s,feedItemUuid:o,positionOnCarousel:i,positionOnFeed:b,carouselSize:t.length,feedItemType:x?.type}})},i)))??[];return y(e,S)}),[t,y,P,s,o,S,b,x]),{onScroll:A}=(0,p.Z)(w,o),z=(0,h.rj)({...g.J["carousel.scroll.throttling_interval"],defaultValue:500}),{onScroll:L}=(0,u.g)(),H=c()((e=>{A(e),L()}),z);return(0,Z.tZ)(d.Z,{header:i,onPageChange:k,showPaginationButtons:(t?.length??0)>S,backwardEnabled:!v,forwardEnabled:!C,analyticsLabel:s?.analyticsLabel,children:(0,Z.tZ)(a.Bb,{ref:w,$supportsScrollSnapping:I,onScroll:H,children:B.map(((e,t,i)=>(0,Z.tZ)(m,{...$(t,i.length),children:e},t)))})})}},58531:(e,t,i)=>{i.d(t,{Z:()=>P});var r=i(91931),n=i(29194),l=i(74369),a=i(46933),o=i(14966),d=i(19354),s=i(65717),c=i(40841),h=i(59924);const g=(0,r.w1)(o.UA,(e=>{let{$theme:t}=e;return t.typography.LabelMedium})),p=e=>{let{callToAction:t,onViewAllClick:i,showArrow:r}=e;const n=(0,d.ZP)(),o=(0,s.Z)()?c.q:n(t?.actionUrl),p=t?.text||(0,h.tZ)(a.v,{id:"carousel.view_all"}),u=l.useCallback((()=>{"function"==typeof i&&i()}),[i]);return(0,h.tZ)(g,{"data-testid":"view-all-external-button",onClick:u,href:o,children:p})};var u=i(34911),Z=i(57994),m=i(62091),f=i(36278),b=i(54669),x=i(64189),w=i(94672),y=i(67311);const $=(0,r.zo)("div",{display:"flex",alignItems:"center",justifyContent:"flex-end"}),v=(0,r.zo)("div",(e=>{let{$marginBottom:t}=e;return{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",...t?{marginBottom:t}:{marginBottom:"24px"}}})),C=(0,r.zo)("div",{display:"flex"}),k=(0,r.zo)("div",{position:"relative",paddingRight:"12px"}),I=(0,r.zo)(m.Z,(e=>{let{$textDirection:t,$size:i,$border:r,$borderRadius:n,$theme:l}=e;const a="large"===i?l.sizing.scale1400:l.sizing.scale1000;return{display:"flex",height:`${a}`,width:`${a}`,border:r,borderRadius:n,..."rtl"===t?{right:0,transform:"scaleX(-1)"}:{left:0}}})),P=e=>{let{header:t,backwardEnabled:i,forwardEnabled:r,showPaginationButtons:l,analyticsLabel:a,onPageChange:o,onViewAllClick:d,isExternalCTA:s,children:c,customEventMetadata:g,seoHeader:m,headerTypography:P,endIconProps:S,hideEndIcon:B,feedItemUuid:A}=e;const z=(0,b.Z)(),L=(0,n.gm)(),{callToAction:H}=t||{},D=B?null:t?.endIcon,E=H&&H.actionUrl&&H.actionUrl.includes("/search?")&&!z||A===y.G,X=s||(0,w.Z)(H?.actionUrl||""),U=(0,h.BX)($,{children:[H&&!E?X?(0,h.tZ)(p,{callToAction:H,onViewAllClick:d}):(0,h.tZ)(x.ZP,{callToAction:H,onViewAllClick:d,analyticsLabel:a}):null,H&&l?(0,h.tZ)(f.ZP,{$width:"40px"}):null,l?(0,h.tZ)(u.Z,{backwardEnabled:i,forwardEnabled:r,analyticsLabel:a,onPageChange:o,customEventMetadata:g}):null]});return m?(0,h.BX)(h.HY,{children:[(0,h.BX)(v,{children:[(0,h.BX)(C,{children:[(0,h.tZ)(Z.ZP,{header:t,headerTypography:P}),m&&D?(0,h.tZ)(k,{children:(0,h.tZ)(I,{src:D,$textDirection:L,$size:"small"})}):null]}),U]}),c]}):(0,h.BX)(h.HY,{children:[(0,h.BX)(v,{$marginBottom:"16px",children:[(0,h.BX)(C,{children:[D?(0,h.tZ)(k,{children:(0,h.tZ)(I,{src:D,$textDirection:L,$size:"large",$border:S?.border||"unset",$borderRadius:S?.borderRadius||"unset"})}):null,(0,h.tZ)(Z.ZP,{header:t,headerTypography:"HeadingSmall"})]}),U]}),c]})}},73970:(e,t,i)=>{i.d(t,{AI:()=>w,ZJ:()=>$,ZP:()=>k,gC:()=>y,jr:()=>C,pO:()=>v});var r=i(74369),n=i(91931),l=i(99248),a=i(67206),o=i(45257),d=i(25750),s=i(52298),c=i(94579),h=i(97415),g=i(47144),p=i(11890),u=i(59924);const Z=(0,n.zo)("div",{overflow:"hidden",position:"relative"}),m=(0,n.zo)("div",{overflow:"hidden",position:"relative",width:"fit-content",display:"inline-flex"}),f=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{...(0,a.Z)({$theme:t}),backgroundSize:"100vw 100%",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:c.I_.background}})),b=(0,n.zo)("div",{display:"flex"}),x=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{position:"relative","::before":{backgroundColor:t.colors.backgroundPrimary,position:"absolute",top:0,bottom:0,left:`-${o.wl/2}px`,right:`-${o.wl/2}px`,content:'""'}}})),w=e=>{let{miniStoreItemSize:t,hideHeader:i}=e;const r=g.cu/g.qL;return(0,u.BX)(Z,{children:[(0,u.tZ)(f,{}),i?null:(0,u.BX)(u.HY,{children:[(0,u.tZ)(h.gD,{width:"240px",height:"24px"}),(0,u.tZ)(h.CB,{$height:"24px"})]}),(0,u.tZ)(d.Z,{separator:()=>(0,u.tZ)(h.CB,{$height:"24px"}),children:[...Array(g.qL)].map(((e,i)=>(0,u.tZ)(o.rj,{children:(0,u.tZ)(d.Z,{separator:()=>(0,u.tZ)(x,{}),children:[...Array(r)].map(((e,i)=>(0,u.tZ)(o.bL,{span:12/r,children:(0,u.tZ)(l.s,{size:t})},`loading_${i}`)))})},`row_${i}`)))})]})},y=e=>{let{heroImageHeight:t=g.zi,hideHeader:i,colCount:r=3}=e;return(0,u.BX)(Z,{children:[(0,u.tZ)(f,{}),i?null:(0,u.BX)(u.HY,{children:[(0,u.tZ)(h.gD,{width:"240px",height:"24px"}),(0,u.tZ)(h.CB,{$height:"24px"})]}),(0,u.tZ)(o.rj,{children:(0,u.tZ)(d.Z,{separator:()=>(0,u.tZ)(x,{}),children:[...Array(r)].map(((e,i)=>(0,u.tZ)(o.bL,{span:12/r,children:(0,u.tZ)(l.Z,{heroImageHeight:t})},`loading_${i}`)))})})]})},$=()=>(0,u.BX)(Z,{children:[(0,u.tZ)(f,{}),(0,u.BX)("div",{children:[(0,u.tZ)(h.gD,{width:"240px",height:"24px"}),(0,u.tZ)(h.CB,{$height:"12px"}),(0,u.tZ)(h.gD,{width:"180px",height:"18px"})]})]}),v=e=>{let{colCount:t=8}=e;return(0,u.BX)(m,{children:[(0,u.tZ)(f,{}),(0,u.tZ)(b,{children:(0,u.tZ)(d.Z,{separator:()=>(0,u.tZ)(h.CB,{$width:"8px"}),children:[...Array(t)].map(((e,t)=>(0,u.tZ)(r.Fragment,{children:(0,u.tZ)(p.Z,{$width:"80px",$height:"36px",$bgColor:"backgroundPrimary"})},`row_${t}`)))})})]})},C=e=>{let{rowCount:t=3,colCount:i=3,rowSpacerHeight:r=80,heroImageHeight:n,hideHeader:l}=e;return(0,u.tZ)(d.Z,{separator:()=>(0,u.tZ)(s.ZP,{$height:r}),children:[...Array(t)].map(((e,t)=>(0,u.tZ)(y,{heroImageHeight:n,hideHeader:l,colCount:i},t)))})},k=C},86745:(e,t,i)=>{i.d(t,{AA:()=>f,Bb:()=>b,JL:()=>w,T3:()=>x,ZP:()=>$,gK:()=>m,sc:()=>y});var r=i(74369),n=i(94813),l=i(21519),a=i(76173),o=i(36337),d=i(73970),s=i(47986),c=i(91931),h=i(8109),g=i(46933),p=i(96911),u=i(33535),Z=i(59924);const m=3,f=24,b=(0,c.zo)("div",(e=>{let{$supportsScrollSnapping:t}=e;return{overflowX:"scroll",display:"flex",scrollbarWidth:"none","::-webkit-scrollbar":{display:"none"},cursor:"pointer",...t?{scrollSnapType:"x mandatory"}:{}}})),x=(0,c.zo)("ul",(e=>{let{$supportsScrollSnapping:t,$textDirection:i}=e;return{display:"flex",flexShrink:0,flexGrow:0,flexBasis:"100%",width:"100%",..."ltr"===i?{marginRight:`${f}px`}:{marginLeft:`${f}px`},...t?{scrollSnapAlign:"start"}:{}}})),w=(0,c.zo)("li",(e=>{let{$textDirection:t}=e;const i="24px";return{flexShrink:0,flexGrow:0,width:"calc(33.333% - 18px)",..."ltr"===t?{marginRight:i}:{marginLeft:i}}})),y=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,background:t.colors.backgroundSecondary,height:"240px",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",padding:"16px"}})),$=e=>{const{feedItemUuids:t}=(0,h.Z)(),{stores:i,analyticsLabel:c,$as:$="h2"}=e,v=(0,n.TH)(),{containerRef:C,getPageChunks:k,getPageProps:I,isPreviousPageDisabled:P,isNextPageDisabled:S,handlePageChange:B,supportsScrollSnapping:A,textDirection:z}=(0,p.Z)({scrollOffset:f}),L=r.useMemo((()=>e.viewAllLocation?e.viewAllLocation:e.carouselId?(0,s.Xqq)(v,{carouselId:e.carouselId}):null),[e.viewAllLocation,e.carouselId,v]),H=i.map(((t,i)=>{const r=e.storesMap[t.uuid];return r?(0,Z.tZ)(w,{$textDirection:z,children:(0,Z.tZ)(l.Z,{store:r,heroImageHeight:e.heroImageHeight,showFavorite:e.showFavorite,location:v,trackingCode:t.trackingCode,position:i,trackingSource:e.trackingSource,styleOverrides:e.styleOverrides,analyticsLabel:c})},i):null})).filter(Boolean),D=r.useMemo((()=>i.map((e=>e.uuid))),[i]),E=k(H,m),X=(0,u.ZP)();return r.useEffect((()=>{X("eats:legacy_feed_store_carousel_impression")}),[X]),e.feedItemUuid&&t.includes(e.feedItemUuid)?(0,Z.tZ)(o.Z,{analyticsLabel:c,entityUuids:D,carouselLayoutType:"store",children:(0,Z.BX)("section",{children:[(0,Z.tZ)(a.Z,{$as:$,title:e.title,subtitle:e.subtitle,viewAllLocation:L,paginated:!0,onPageChange:B,backwardEnabled:!1,forwardEnabled:!1,feedItemUuid:e.feedItemUuid,onViewAllClick:e.onViewAllClick}),(0,Z.tZ)(d.gC,{hideHeader:!0,heroImageHeight:e.heroImageHeight})]})}):(0,Z.tZ)(o.Z,{analyticsLabel:c,entityUuids:D,carouselLayoutType:"store",children:(0,Z.BX)("section",{children:[(0,Z.tZ)(a.Z,{$as:$,title:e.title,subtitle:e.subtitle,viewAllLocation:L,paginated:i.length>m,onPageChange:B,backwardEnabled:!P,forwardEnabled:!S,feedItemUuid:e.feedItemUuid,onViewAllClick:e.onViewAllClick}),0===i.length?(0,Z.tZ)(y,{children:(0,Z.tZ)(g.v,{id:"bandwagon.no_restaurants"})}):(0,Z.tZ)(b,{ref:C,$supportsScrollSnapping:A,children:E.map(((e,t,i)=>(0,Z.tZ)(x,{...I(t,i.length),children:e},t)))})]})})}}}]);