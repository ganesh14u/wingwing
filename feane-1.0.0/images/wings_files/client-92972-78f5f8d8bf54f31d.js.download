"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[92972,25856],{__fusion__869:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});var n=r(74369),i=r(59924);const o=n.forwardRef((function(e,t){let{title:r="Person add",titleId:n,size:o="1em",...a}=e;return(0,i.BX)("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",ref:t,"aria-labelledby":n,...a,children:[void 0===r?(0,i.tZ)("title",{id:n,children:"Person add"}):r?(0,i.tZ)("title",{id:n,children:r}):null,(0,i.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11Zm13 5h-3v-3h-3v3h-3v3h3v3h3v-3h3v-3ZM1 23h12.1c-1-1.2-1.6-2.8-1.6-4.5 0-1.7.6-3.3 1.6-4.5H7c-3.3 0-6 2.7-6 6v3Z",fill:"currentColor"})]})}))},86547:(e,t,r)=>{r.d(t,{DY:()=>n,_b:()=>i});Object.freeze({UNKNOWN:"UNKNOWN",ACTIVE:"ACTIVE",DELETED:"DELETED",DELETING:"DELETING"});const n=Object.freeze({UNKNOWN:"UNKNOWN",MEAL_PLAN_VIEW:"MEAL_PLAN_VIEW",CARTS_VIEW:"CARTS_VIEW",MEAL_PLAN_VIEW_COMPACT:"MEAL_PLAN_VIEW_COMPACT"}),i=Object.freeze({CREATOR:"CREATOR",PARTICIPANT:"PARTICIPANT",UNKNOWN:"UNKNOWN"})},940:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(74369),i=r(73518),o=r(59924);function a(e,t){return(0,o.tZ)(i.Z,{viewBox:"0 0 20 20",ref:t,...e,children:(0,o.tZ)("path",{d:"M12 5.5L14.5 8 4.165 18.333h-2.5v-2.5L11.999 5.5zM15.893 1.658L13.83 3.72l2.475 2.475 2.062-2.063-2.475-2.474z"})})}const l=n.forwardRef(a)},34771:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(74369),i=r(70247),o=r(24316);const a=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{isBundledOrder:t,draftOrderUUID:r,primaryDraftOrderUUID:a}=(0,i.Dz)(),{setActiveDraftOrder:l}=(0,o.Z)();(0,n.useEffect)((()=>{e&&t&&r!==a&&l(a)}),[e,r,t,a,l])}},72147:(e,t,r)=>{r.d(t,{C:()=>oe});var n=r("__fusion__476"),i=r(27871),o=r(91931),a=r(52945),l=r(25905),s=r(5639),d=r(40606),c=r(74369),u=r(62393),h=r(83163),p=r(92300),m=r(35397),g=r(32857),f=r(68065),Z=r(30772),v=r(79810);const _=Object.freeze({xSmall:"xSmall",small:"small",medium:"medium",large:"large"}),y=Object.freeze({center:"center",topLeft:"topLeft",topCenter:"topCenter",topRight:"topRight",bottomLeft:"bottomLeft",bottomCenter:"bottomCenter",bottomRight:"bottomRight"}),b=(e,t)=>{const r={top:"auto",right:"auto",bottom:"auto",left:"auto"};switch(e){case y.topLeft:return{...r,top:t,left:t};case y.topCenter:return{...r,top:t,left:"50%",transform:"translateX(-50%)"};case y.topRight:return{...r,top:t,right:t};case y.bottomLeft:return{...r,bottom:t,left:t};case y.bottomCenter:return{...r,bottom:t,left:"50%",transform:"translateX(-50%)"};case y.bottomRight:return{...r,bottom:t,right:t};case y.center:return{...r,top:"50%",left:"50%",transform:"translate(-50%, -50%)"};default:return r}},C=e=>{const t={[y.topLeft]:["translateY(16px)","translateY(0px)"],[y.topCenter]:["translateX(-50%) translateY(16px)","translateX(-50%) translateY(0px)"],[y.topRight]:["translateY(16px)","translateY(0px)"],[y.bottomLeft]:["translateY(16px)","translateY(0px)"],[y.bottomCenter]:["translateX(-50%) translateY(16px)","translateX(-50%) translateY(0px)"],[y.bottomRight]:["translateY(16px)","translateY(0px)"],[y.center]:["translateX(-50%) translateY(calc(-50% + 16px))","translateX(-50%) translateY(-50%)"]};return{animationDuration:"400ms",animationTimingFunction:"cubic-bezier(0.22, 1, 0.36, 1)",animationName:{from:{opacity:0,transform:t[e][0]},to:{opacity:1,transform:t[e][1]}}}},P={[_.xSmall]:"480px",[_.small]:"640px",[_.medium]:"800px",[_.large]:"100%"},S=(0,v.zo)("div",(e=>{let{$theme:t,$size:r,$placement:n=y.center}=e;const i="16px",o="40px";return{display:"flex",flexDirection:"column",alignItems:"center",position:"fixed",maxHeight:"calc(100vh - (2 * 40px))",maxWidth:"calc(100% - (2 * 40px))",borderRadius:t.borders.radius500,boxShadow:t.lighting.shallowBelow,backgroundColor:t.colors.backgroundPrimary,color:t.colors.contentPrimary,overflow:"hidden",border:"none",paddingBottom:t.sizing.scale800,width:P[r],...b(n,o),...C(n),"@media (max-width: 599px)":{width:"calc(100% - (2 * 16px))",paddingBottom:0,maxWidth:"none",...b(y.bottomCenter,i),...C(y.bottomCenter)}}}));S.displayName="StyledRoot";const I=(0,v.zo)("div",(e=>{let{$theme:t}=e;return{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:t.colors.backgroundOverlay,animationDuration:"100ms",animationName:{from:{opacity:0},to:{opacity:1}}}}));I.displayName="StyledOverlay";const w=(0,v.zo)("div",(()=>({flex:1,overflowY:"auto",position:"relative",width:"100%"})));function B(e){return 1===e?{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:`${e}`,WebkitBoxOrient:"vertical"}}const O=(0,v.zo)("div",(e=>{let{$theme:t,$numHeadingLines:r=2,$shiftLeft:n}=e;return{position:"sticky",top:0,paddingTop:t.sizing.scale800,paddingLeft:t.sizing.scale800,paddingRight:n?"52px":t.sizing.scale800,paddingBottom:t.sizing.scale300,"@media (max-width: 599px)":{paddingLeft:t.sizing.scale600,paddingRight:n?"52px":t.sizing.scale600},backgroundColor:t.colors.backgroundPrimary,...B(r),...t.typography.HeadingMedium}}));O.displayName="StyledHeading";const M=(0,v.zo)("div",(e=>{let{$theme:t}=e;return{marginBottom:t.sizing.scale800,paddingLeft:t.sizing.scale800,paddingRight:t.sizing.scale800,"@media (max-width: 599px)":{paddingLeft:t.sizing.scale600,paddingRight:t.sizing.scale600},...t.typography.ParagraphLarge}}));M.displayName="StyledBody";var x=r(59924);function k(e){if((0,c.isValidElement)(e))return e;if("function"==typeof e){const t=e;return(0,x.tZ)(t,{})}return null}const z=e=>{const t={...e.overrides,BaseButton:{...e.overrides?.BaseButton,style:{position:"absolute",top:"16px",right:"8px",backgroundColor:"rgba(255, 255, 255, 0.6)",zIndex:1,...e.overrides?.BaseButton?.style}}};return(0,x.tZ)(g.Z,{kind:f.TO.secondary,shape:f.X3.circle,...e,overrides:t,children:(0,x.tZ)(Z.Z,{size:36})})},L=e=>{let{artwork:t,buttonDock:r,children:n,onDismiss:i,showDismissButton:o=!0,hasOverlay:a=!0,heading:l,isOpen:s,overrides:d={},placement:g=y.center,numHeadingLines:f=2,size:Z=_.xSmall,autoFocus:v=!0}=e;const[b,C]=(0,p.jb)(d.Root,S),[P,B]=(0,p.jb)(d.ScrollContainer,w),[L,E]=(0,p.jb)(d.Heading,O),[T,U]=(0,p.jb)(d.Overlay,I),[D,A]=(0,p.jb)(d.Body,M),[$,R]=(0,p.jb)(d.ButtonDock,m.Z),[N,H]=(0,p.jb)(d.DismissButton,z),W=(0,c.useRef)(null),X=(0,c.useRef)("undefined"!=typeof document?document?.body?.style?.overflow:"");return(0,c.useEffect)((()=>{const e=X.current;return document.body.style.overflow=s&&a?"hidden":e,()=>{document.body.style.overflow=e}}),[s,a]),s?(0,x.BX)(h.Z,{onDocumentClick:function(e){e.target&&e.target instanceof HTMLElement&&e.target.contains(W.current)&&i&&i()},onEscape:function(){i&&i()},children:[a&&(0,x.tZ)(T,{ref:W,...U}),(0,x.tZ)(u.ZP,{returnFocus:!0,autoFocus:v,children:(0,x.BX)(b,{$size:Z,$placement:g,role:"dialog","aria-labelledby":"dialog-title",...C,children:[i&&o&&(0,x.tZ)(N,{onClick:()=>i(),...H}),(0,x.BX)(P,{...B,tabIndex:0,children:[k(t),(0,x.tZ)(L,{$numHeadingLines:f,$shiftLeft:o,id:"dialog-title",...E,children:l}),(0,x.tZ)(D,{...A,children:n})]}),r&&(0,x.tZ)($,{...r,...R})]})})]}):null};var E=r(59210),T=r(14016),U=r(46933),D=r(86695),A=r(53308),$=r(15070),R=r(24484);var N=r(33535),H=r(58092),W=r(79406),X=r("__fusion__1029"),G=r(68799),Y=r(61127),V=r(81231),F=r(80341),K=r(20196),j=r(83059),q=r("__fusion__702");const Q=(e,t)=>{const r=e?t.sizing.scale600:0,n=e?0:t.sizing.scale800;return`${r} ${n} ${t.sizing.scale600} ${n}`},J=(0,o.zo)("div",(e=>{let{$theme:t,$isMobile:r=!1}=e;return{margin:Q(r,t)}})),ee=e=>{let{defaultSelectedStoreUuid:t}=e;const{cmpQuery:r}=(0,i.ZP)(["storeSwitcherActionableBannerPayload"]),o=n.useRef(!1),a=(0,N.ZP)(),{isMobile:l}=(0,s.hU)(),{enqueue:c}=(0,K.Ds)(),u=(0,T.T)(),h=n.useCallback((e=>{c({message:u("smart_cart.banner_snackbar.text",{storeName:e}),startEnhancer:()=>(0,x.tZ)(q.default,{})},j.t.short)}),[c,u]),{onSelectStore:p}=(0,F.R)(t);return(0,x.tZ)(d.a,{source:r,enableLoadingForRefetch:!0,loading:()=>null,error:()=>null,loaded:e=>{const t=e?.checkoutPayloads?.storeSwitcherActionableBannerPayload;t?.actionableBanner&&!o.current&&(a("eats:smart_cart_switch_suggestion_shown",{suggestedStorePosition:"unknown"}),o.current=!0);const r=t?.actionableBanner?.actionMetadata,n=r?.switchStoreMetadata;return t?.actionableBanner?.bannerModel?(0,x.tZ)(J,{$isMobile:l,children:(0,x.tZ)(V.Z,{viewModel:t.actionableBanner?.bannerModel,onClick:()=>{n?.storeWithProduct&&(a("eats:smart_cart_switch_suggestion_click"),p(n?.storeWithProduct),h(n?.storeWithProduct?.merchantName))},noMargin:!0})}):null}})},te="uev2.smart-cart-ftux-tooltip.seen",re=(0,o.zo)("div",(e=>{let{$theme:t,$isMobile:r=!1}=e;return{margin:`${r?t.sizing.scale600:0} 0 0 0 !important`}})),ne=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{padding:`${t.sizing.scale400} 0`,width:"256px",display:"flex",justifyContent:"space-between",alignItems:"center",...t.typography.ParagraphSmall}})),ie=(0,o.zo)(X.default,{cursor:"pointer"}),oe=e=>{let{defaultSelectedStoreUuid:t}=e;const{cmpQuery:r}=(0,i.ZP)(["canonicalProductStorePickerPayload"]),{onSelectStore:o,isLoading:c,error:u,resetErrorState:h}=(0,F.R)(t),{isMobile:p}=(0,s.hU)(),m=(0,T.T)(),[g,f]=n.useState(!1);n.useEffect((()=>{const e=(0,G.Z7)(te);(0,Y.Z)(e)&&f(!0),(0,Y.Z)(e)&&g&&(0,G.pc)(te,{seen:!0})}),[g]);const Z=(0,N.ZP)(),v=n.useRef(!1),_=(0,A.I0)(),y=(0,$.v)((e=>e?.smartCart?.hasPreviouslyLoaded||!1)),b=(0,$.v)((e=>e?.smartCart?.storeWithProducts||[])),C=(0,$.v)((e=>e?.smartCart?.scrollPosition||0));return c?(0,x.tZ)(a.T,{}):u?(0,x.tZ)(L,{isOpen:Boolean(u),heading:m("components.genericError.title"),buttonDock:{primaryAction:(0,x.tZ)(D.zx,{onClick:()=>{h()},children:m("ducks.uiModalAlertGeneric.defaultConfirmLabel")?.toUpperCase()})},children:(0,x.tZ)(E.Yl,{children:(0,x.tZ)(U.v,{id:"shared.genericServerError"})})}):(0,x.tZ)(d.a,{source:r,enableLoadingForRefetch:!0,loading:()=>y?(0,x.tZ)(a.T,{}):null,error:()=>null,loaded:e=>{const r=e?.checkoutPayloads?.canonicalProductStorePickerPayload?.storesWithProductPayload;r?.storesWithProduct&&!v.current&&(Z("eats:smart_cart_shown"),v.current=!0);let n=r?.storesWithProduct;return n&&r?.defaultSelectedStoreUuid?(y||(n=((e,t)=>{const r=e.find((e=>e.storeUuid===t));return r&&(e.splice(e.indexOf(r),1),e.unshift(r)),e})(n,r?.defaultSelectedStoreUuid)),y&&b&&(n=((e,t,r)=>{const n=e.findIndex((e=>e.storeUuid===r)),i=t.find((e=>e.storeUuid===r)),o=t.sort(((t,r)=>{const n=e.findIndex((e=>e.storeUuid===t.storeUuid)),i=e.findIndex((e=>e.storeUuid===r.storeUuid));return(-1===n?Number.MAX_SAFE_INTEGER:n)-(-1===i?Number.MAX_SAFE_INTEGER:i)}));return i&&n>2&&(o.splice(o.indexOf(i),1),o.unshift(i)),o})(b,n,r?.defaultSelectedStoreUuid),n[0]?.storeUuid===r?.defaultSelectedStoreUuid&&C>0&&_((0,R.tK)(0))),(0,x.tZ)(H.Z,{content:()=>(0,x.BX)(ne,{children:[(0,x.tZ)(U.v,{id:"smart_cart.ftux_tooltip.text"}),(0,x.tZ)(ie,{onClick:()=>f(!1)})]}),showArrow:!0,placement:p?W.r4.bottom:W.r4.bottomLeft,isOpen:g,overrides:{Body:{style:e=>{let{$theme:t}=e;return{marginLeft:p?0:t.sizing.scale800}}}},children:(0,x.BX)(re,{$isMobile:p,children:[(0,x.tZ)(ee,{defaultSelectedStoreUuid:t}),(0,x.tZ)(l.Z,{displayType:"horizontal",storesWithProducts:n,onSelectStore:e=>{if(e.storeUuid===r?.defaultSelectedStoreUuid)return;y||_((0,R.M4)()),n&&_((0,R.qw)(n));const t=r?.storesWithProduct?.findIndex((t=>t.storeUuid===e?.storeUuid));Z("eats:smart_cart_store_switched",{positionOfSelectedStore:t?.toString()||"unknown",signposts:e?.tags&&e?.tags[0]?.text?e?.tags[0]?.text:""}),o(e)},expansionMode:"show_all",defaultSelectedStoreUuid:r?.defaultSelectedStoreUuid,title:r.title,isInCart:!0,isMobile:p})]},e?.draftOrderUUID)})):null}})}},37740:(e,t,r)=>{r.d(t,{Z:()=>I});var n=r(69420),i=r(14016),o=r(47986),a=r(91931),l=r(33497),s=r(74369),d=r(73518),c=r(59924);function u(e,t){return(0,c.tZ)(d.Z,{viewBox:"0 0 24 24",ref:t,...e,children:(0,c.tZ)("path",{d:"M12 1C5.9 1 1 5.9 1 12s4.9 11 11 11 11-4.9 11-11S18.1 1 12 1zm6 13h-8V4h3v7h5v3z"})})}const h=s.forwardRef(u);var p=r(36278),m=r(83960),g=r(940),f=r(52298),Z=r(20485),v=r(29194),_=r(50262),y=r(94813);const b=(0,a.zo)("button",(e=>{let{disabled:t,$theme:r}=e;return{...(0,l.Z)({$theme:r}),background:r.colors.backgroundSecondary,justifyContent:"left",display:"flex",flexDirection:"row",cursor:t?"default":"pointer"}})),C=(0,a.zo)("div",(e=>{let{$textDirection:t}=e;return{display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"ltr"===t?"left":"right"}})),P=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium}})),S=(0,a.zo)("div",{marginLeft:"auto"}),I=e=>{const t=(0,y.TH)(),r=(0,n.k6)(),a=(0,i.T)(),l=(0,m.Z)(),s=l.isDraftOrderCreator,{cartLockOptions:d}=l||{},u=(0,Z.Z)(d?.deadline),I=(0,v.gm)(),w=u?d?.deadline.lockBeforeScheduledInMinutes||!s?a("go.order_by.date_and_time",{shortDateTime:u}):a(d?.autoSubmit?"go.order_will_be_placed_automatically":"go.deadline.gobs.text",{shortDateTime:u}):null;return(0,c.BX)(c.HY,{children:[(0,c.BX)(b,{onClick:()=>{r.push((0,o.vN_)(t,"editGroupOrderDeadline"))},disabled:!s,children:[(0,c.tZ)(h,{size:22}),(0,c.tZ)(p.sA,{}),(0,c.tZ)(C,{$textDirection:I,children:(0,c.tZ)(P,{children:d?.deadline.lockAtInMs||d?.deadline.lockBeforeScheduledInMinutes?w:a("go.no_order_deadline")})}),s?(0,c.BX)(c.HY,{children:[(0,c.tZ)(p.sA,{}),(0,c.tZ)(S,{children:(0,c.tZ)(g.Z,{size:16,color:"contentInverseTertiary"})})]}):null]}),(0,c.tZ)(f.ZP,{$height:24}),(0,c.tZ)(_.a,{gutterWidth:e.gutterWidth})]})}},30586:(e,t,r)=>{r.d(t,{Z:()=>ae});var n=r("__fusion__476"),i=r(46933),o=r(17222),a=r(69420),l=r(69744),s=r(33535),d=r(83395),c=r(10825),u=r(91931),h=r(14016),p=r(55758);function m(e){const t=(0,p.d)(),r=e.diningMode||t;if(!r)return e.delivery;switch(r){case"PICKUP":return e.pickup;case"DINE_IN":return e.dineIn;case"ON_PREMISE_DELIVERY":return e.onPremiseDelivery?e.onPremiseDelivery:e.delivery;default:return e.delivery}}var g=r(64388),f=r(70247),Z=r(15649),v=r(60362),_=r(83960),y=r(29192),b=r(59924);const C=(0,u.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,color:t.colors.contentSecondary}})),P=()=>{const e=(0,h.T)(),{serverCart:t}=(0,f.iQ)(),{store:r}=(0,g.ZP)(t.data?.storeUuid),n=(0,Z.Z)(),{deliveryAddress:i,deliveryTime:o,diningMode:a=y.k5.DELIVERY}=(0,_.Z)();if(!o||!i||!a)return null;const{date:l,endTime:s}="date"in o&&o||{},d={userAddress:i?.address.address1,storeAddress:r.data?.location.streetAddress,...l&&void 0!==s&&{time:(0,v.CJ)(n,s),date:(0,v.u4)(n,l)}},[c,u,p]=l?(0,v.Y3)(l)?[e("multicart.deliver_scheduled_today",d),e("multicart.dine_in_scheduled_today",d),e("multicart.pickup_scheduled_today",d)]:(0,v.Ei)(l)?[e("multicart.deliver_scheduled_tomorrow",d),e("multicart.dine_in_scheduled_tomorrow",d),e("multicart.pickup_scheduled_tomorrow",d)]:[e("multicart.deliver_scheduled",d),e("multicart.dine_in_scheduled",d),e("multicart.pickup_scheduled",d)]:[e("multicart.deliverNow",d),e("multicart.dineInNow",d),e("multicart.pickupNow",d)];return(0,b.tZ)(C,{children:(0,b.tZ)(m,{diningMode:a,delivery:c,dineIn:u,pickup:p})})};var S=r(19496),I=r(34456),w=r(82133),B=r(80341),O=r(87444),M=r(58442),x=r(94813),k=r(91066),z=r(10312),L=r(76150),E=r(19759);const T=(0,u.zo)(o.rU,(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium}})),U=(0,u.zo)("span",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.action}}));const D=function(e){let{mealPlanUUID:t,isGroupOrderOwner:r}=e;const n=(0,x.TH)(),{mealPlan:i}=(0,k.Z)(t),o=(0,h.T)(),{closeSidebarCart:a}=(0,L.Lb)(),l=(0,s.ZP)(),d=(0,M.P)(o("shared.orderInfo.part_of"),{displayText:(0,b.tZ)(U,{children:i?.name})});return(0,b.tZ)(T,{to:(0,z.P1)(n,t),onClick:()=>{l("eats:meal_plan_view_button",{mealPlanUUID:t,role:(0,E.cY)(r,!0),source:"cart-subtitle"}),a()},children:d})};var A=r(72179),$=r(32857),R=r(68065),N=r(10015),H=r(5639),W=r("__fusion__1557"),X=r("__fusion__869"),G=r(79857),Y=r(34626),V=r(47986),F=r(26705),K=r(19681),j=r(230),q=r(89917);const Q=(0,u.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",gap:t.sizing.scale600}})),J=(0,u.zo)("div",(e=>{let{$theme:t}=e;return{flex:1,gap:t.sizing.scale100}})),ee=(0,u.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingLarge,padding:0,overflowWrap:"anywhere"}})),te=(0,u.zo)(o.rU,(e=>{let{$theme:t,$isCartDrafting:r}=e;return{...r?{...t.typography.DisplayBold4XSmall}:{...t.typography.HeadingLarge},":hover":{borderBottom:`1px solid ${t.colors.blackHover}`}}})),re=(0,u.zo)(o.rU,(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium}})),ne=()=>{const{restaurantLink:e,restaurantLinkNode:t,onGoToStore:r}=(0,d.Z)();return(0,b.tZ)(re,{to:e,onClick:r,children:t})},ie=e=>{const{isMobile:t}=(0,H.hU)(),{isBundledOrder:r,isGroupOrder:n}=(0,f.Dz)(),{storeTitle:o,restaurantLink:a,title:l,onGoToStore:s}=(0,d.Z)(),c=n||e.shouldShowSmartCartTitle;return r?(0,b.tZ)(ee,{children:(0,b.tZ)(i.v,{id:"cart.title.bundled_order"})}):!e.isCartDrafting||c||t?c?(0,b.tZ)(ee,{children:l}):(0,b.tZ)(te,{$isCartDrafting:e.isCartDrafting,to:a,onClick:s,children:o}):(0,b.tZ)(N.GP,{labelSize:"large"})},oe=e=>{const t=(0,a.k6)(),r=(0,x.TH)(),{user:n}=(0,Y.Z)(),{isMobile:i}=(0,H.hU)(),{isCartDrafting:o}=(0,A.Z)(),l=(0,G.Z)(),{isBundledOrder:s,isGroupOrder:d}=(0,f.Dz)(),{allowGroupOrder:c}=(0,F.j)({store:e.store});return i&&c?(0,b.tZ)("div",{children:o&&l&&!s?d&&n.data?.isLoggedIn?(0,b.tZ)($.Z,{"data-testid":"share-group-order",kind:R.TO.tertiary,onClick:()=>t.push((0,V.vN_)(r,"shareGroupOrder")),children:(0,b.tZ)(X.default,{size:20})}):(0,b.tZ)($.Z,{"data-testid":"start-group-order",kind:R.TO.tertiary,onClick:()=>t.push((0,V.Ljk)(r,(0,V.Btk)(e.store))),children:(0,b.tZ)(W.default,{size:20})}):null}):null},ae=e=>{let{store:t,onCartClose:r=l.Z,onClearCart:i,cartActionsType:o}=e;const{isCartDrafting:a}=(0,A.Z)(),d=(0,s.ZP)(),u=(0,q.Z)(),h=(0,c.Z)(),p=(0,f.Dz)(),{isGroupOrder:m,isBundledOrder:g,mealPlanUUID:Z,isGroupOrderOwner:v}=p,[_,y]=n.useState(!1),C=()=>y(!1),M=(0,w.xZ)(),{isMobile:x}=(0,H.hU)();n.useEffect(h,[]);const k=(0,O.Z)("canonical_product_smart_cart"),z=(0,O.Z)("orchid_analytics_event_bridge_enabled"),{currentCartIsSmartCart:L}=(0,B.R)(),E=L&&k,T=n.useRef(!0),U="bottomsheet"===o,$=(0,j.Z)();return n.useEffect((()=>{T.current&&(d("eats:cart_view",{draftOrderUuid:p.draftOrderUUID,isMulticart:"true",storeUuid:p.storeUUID??"",isGroupOrder:String(p.isGroupOrder),isDraftOrderParticipant:String(p.isGroupOrderParticipant),isBillSplitOrder:String(p.isBillSplitOrder),cartView:M,isBundledOrder:p.isBundledOrder,isAddOnOrder:p.isAddOnOrder,deliveryType:p.draftOrder?.deliveryType,isScheduledOrder:p.isScheduledOrder,...p.isBundledOrder&&{storePreCheckoutBundling:{sourceType:"BUNDLED_STORE"}},isDrafting:a}),$&&z&&u({type:"VIEW_CART"})),T.current=!1}),[d,p,M,a,$,z,u]),(0,b.BX)(Q,{"data-test":"cart-header",children:[(0,b.BX)(J,{children:[(0,b.tZ)(ie,{isCartDrafting:a,shouldShowSmartCartTitle:E}),m&&(0,b.BX)(b.HY,{children:[Z?(0,b.tZ)(D,{mealPlanUUID:Z,isGroupOrderOwner:v}):(0,b.tZ)(ne,{}),(0,b.tZ)(S.Z,{})]}),a&&m&&!g||a&&!m&&!g&&x?(0,b.tZ)(P,{}):null]}),(0,b.tZ)(oe,{store:t}),!a||x?(0,b.tZ)(K.Z,{store:t,onClearCart:i,onCartClose:r,onCloseCartActions:C,bottomSheet:U,openCartActions:()=>y(!0)}):null,U?(0,b.tZ)(I.O,{store:t,onCartClose:r,onClearCart:i,onCloseList:C,cartActionsOpen:_}):null]})}},49062:(e,t,r)=>{r.d(t,{l:()=>f});var n=r(74369),i=r(91931),o=r(72179),a=r(27871),l=r(80443),s=r(69420),d=r(94813),c=r(47986),u=r(33535),h=r(81077),p=r(32135),m=r(59924);const g=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{boxShadow:t.lighting.shallowAbove}})),f=()=>{const e=(0,s.k6)(),t=(0,d.TH)(),{isCartDrafting:r}=(0,o.Z)(),{passBanner:i}=(0,a.ZP)([...r?["passBanner"]:[]]).checkoutPayloads,f=(0,u.ZP)(),Z=i?i.oneClickMembershipBannersOnFooter:null,v=Z?Z[0]:{},_=v?.bannerViewModel,y=v?.passCampaign,b=v?.accessPoint,C=v?.membershipAnalyticsMeta,P=v?.deeplink;let S;switch(_?.type){case"listContentViewModel":S=_.listContentViewModel}return(0,n.useEffect)((()=>{S&&f("eats:membership_renew_cart_banner_impression",{...(0,h.ur)(p.n7.MEMBERSHIP_CHECKOUT_RENEW_BANNER,C??{},b??p.xr.UNKNOWN,y??p.xn.UNKNOWN)})}),[b,f,C,y,S]),S?(0,m.tZ)(g,{children:(0,m.tZ)(l.Z,{viewModel:S,onClick:()=>{f("eats:membership_renew_cart_banner_click",{...(0,h.ur)(p.n7.MEMBERSHIP_CHECKOUT_RENEW_BANNER,C??{},b??p.xr.UNKNOWN,y??p.xn.UNKNOWN)}),e.push((0,c.c9t)(t,P??"",{defaultModalName:"membershipCheckout",defaultModalContext:"renew_with_benefit_carousel"}))}})}):null}},19496:(e,t,r)=>{r.d(t,{Z:()=>f});var n=r(40017),i=r(40606),o=r(49201),a=r(46933),l=r(15649),s=r(83960),d=r(91931),c=r(22395),u=r(69630),h=r(70247),p=r(59924);const m=(0,d.zo)("span",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentTertiary}})),g=(0,d.zo)("span",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentPrimary}})),f=()=>{const e=(0,l.Z)(),{draftOrderMaybe:t}=(0,h.Dz)(),{hasGroupOrder:r}=(0,s.Z)(),d=(0,u.Z)();return r?(0,p.tZ)(i.Z,{source:t,loaded:t=>{const r=t.spendingLimitAmount,n=r.currencyCode;if(!r||!n)return null;const i=r.amount,l=(0,o.xG)(e,n,i);return(0,p.tZ)(p.HY,{children:d?(0,p.BX)(p.HY,{children:[(0,p.tZ)(c.Z,{spaces:2,color:"contentTertiary"}),(0,p.tZ)(g,{children:(0,p.tZ)(a.v,{id:"go.spending_limit",data:{spendingLimit:l}})})]}):(0,p.BX)(p.HY,{children:[(0,p.tZ)(c.Z,{spaces:2,color:"contentTertiary"}),(0,p.tZ)(m,{children:(0,p.tZ)(a.v,{id:"go.spending_limit_summary.v2",data:{spendingLimit:l}})})]})})},error:()=>null,loading:()=>(0,p.tZ)(n.sM,{$width:"200px"})}):null}},10892:(e,t,r)=>{r.d(t,{Z:()=>v});var n=r(74369),i=r(74057),o=r(43330),a=r(230),l=r(94813),s=r(64388),d=r(47986),c=r(87444),u=r(15070),h=r(75892),p=r(1257),m=r(27871),g=r(71051),f=r(33535),Z=r(17557);const v=function(e){const t=(0,u.v)((e=>{let{checkoutPresentation:t}=e;return t})),r=(0,u.v)((e=>{let{upsell:t}=e;return t})),v=r?.upsellFeed?.storeUUID===e?r:null,_=(0,u.v)((e=>{let{user:t}=e;return t.data?.isLoggedIn??!1})),y=(0,l.TH)(),{store:b}=(0,s.ZP)(e),{diningMode:C}=(0,i.Z)(e),{hasValidPayment:P}=(0,o.J)(),S=(0,n.useRef)(P),{entryPoint:I}=(0,d.RAN)(y,["entryPoint"]),w=(0,a.Z)()&&"editOrder"===I,B=(0,c.Z)("upsell_use_catalog_section"),O=Boolean(b?.data?.isOpen),M=(0,Z.Z)(),x=(0,p.Z)((0,m.B0)("upsellFeed"))??v?.upsellFeed,k=x?.feedItems,z=x?.catalogSections,L=(0,n.useMemo)((()=>k||[]),[k]),E=(0,n.useMemo)((()=>z??[]),[z]),T=(0,n.useContext)(g.k7),U=(0,f.ZP)(),D=(0,n.useMemo)((()=>{const e=L.filter((e=>!e.hasCustomizations&&!(0,h.q)(e)));let t=[];return e.length>=3?t=e.slice(0,5):(t=[],U("eats:magic_upsell_too_few_items",{feedItems:e})),t}),[U,L]);return(0,n.useEffect)((()=>{const e=L.filter(h.q);e.length&&U("eats:magic_upsell_invalid_items",{feedItems:e})}),[U,L]),(0,n.useMemo)((()=>{const r=_&&!w&&(M||S.current)&&!t.data?.validationErrors?.length&&e&&T.get("checkoutUpsellClosedStoreUuid")!==e&&"SHIPMENT"!==C&&(D.length>0||B&&E.length>0)&&O;return{canShow:r,title:x?.title?.text??"",upsellItems:r?D:[],catalogSections:r?E:[]}}),[_,w,M,t.data?.validationErrors?.length,e,T,C,D,B,E,O,x?.title?.text])}},75892:(e,t,r)=>{r.d(t,{q:()=>n});const n=e=>!e.price||!e.title?.text},43330:(e,t,r)=>{r.d(t,{J:()=>a});var n=r(56993),i=r(27871),o=r(15070);const a=()=>{const e=(0,o.v)((e=>{let{draftOrder:t}=e;return t})),t=Boolean(e.draftOrder.data?.draftOrder.businessDetails?.voucherUUID),r=(0,i.B0)("total"),{selectedPersonalPayment:a,selectedBusinessPayment:l,paymentIntent:s,currentStep:d}=(0,n.IM)(),c=t&&0===r.data?.total.value.amountE5,u=Boolean("personal"===s&&(a?.uuid||c)),h=Boolean("business"===s&&"COMPLETE"===d&&l?.paymentProfileUuid);return{hasValidPayment:u||h,validPersonalPayment:u,validBusinessPayment:h}}},51741:(e,t,r)=>{r.d(t,{Z:()=>y});var n=r(59210),i=r(91931),o=r(14016),a=r(46933),l=r(55722),s=r(52298),d=r(45106),c=r(35586),u=r(83960),h=r(91028),p=r(93633),m=r(59924);const g=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",height:"48px",padding:"24px",position:"sticky",top:0,zIndex:1,background:t.colors.backgroundPrimary}})),f=(0,i.zo)("div",{padding:"0 24px"}),Z=(0,i.zo)("div",{display:"flex",flexDirection:"column"}),v=(0,i.zo)("div",{padding:0}),_=(0,i.zo)("button",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:t.borders.radiusFull}})),y=()=>{const e=(0,u.Z)(),t=(0,d.Z)(),r=(0,o.T)(),{cartsWithItems:i,cartsWithoutItems:y}=(0,c.Z)(),{setIsManagingGroupOrder:b}=(0,p.Z)(),{isDraftOrderCreator:C,hasGroupOrder:P}=e;return P?t?(0,m.tZ)(h.aM,{groupedItems:i}):(0,m.BX)(v,{children:[(0,m.tZ)(g,{children:(0,m.tZ)(_,{onClick:()=>b(!1),children:(0,m.tZ)(l.c.ArrowLeft,{size:24})})}),(0,m.BX)(Z,{children:[(0,m.tZ)(s.ZP,{$height:16}),(0,m.BX)(m.HY,{children:[(0,m.tZ)(f,{children:(0,m.tZ)(n.Ih,{children:C?(0,m.tZ)(a.v,{id:"go.manage.people_header"}):(0,m.tZ)(a.v,{id:"go.manage_guests_participant_header"})})}),(0,m.tZ)(s.ZP,{$height:16}),(0,m.tZ)(h.Ef,{groupedItems:i,groupingTitle:r("go.manage.guests_with_items_label",{numGuests:i.length})}),(0,m.tZ)(h.Ef,{groupedItems:y,groupingTitle:r("go.manage.guests_without_items_label",{numGuests:y.length})})]})]})]}):null}},35972:(e,t,r)=>{r.d(t,{Q:()=>d});var n=r(33157),i=r(52298),o=r(52692),a=r(83960),l=r(90961),s=r(59924);const d=e=>{let{$spaceBefore:t,isCheckout:r}=e;const{isHandledHighCapacityOrder:d}=(0,a.Z)(),c=(0,l.Z)();return d&&c?(0,s.BX)(s.HY,{children:[(0,s.tZ)(i.ZP,{$height:t}),(0,s.tZ)(n.zW,{warning:c}),r?(0,s.BX)(s.HY,{children:[(0,s.tZ)(i.ZP,{$height:t}),(0,s.tZ)(o.Z,{$height:"1px",$margin:"0"}),(0,s.tZ)(i.ZP,{$height:t})]}):null]}):null}},90961:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(82532);function i(){const{isCartUnderMBS:e,cartWarning:t}=(0,n.f)();return e?null:t}},91066:(e,t,r)=>{r.d(t,{Z:()=>l,L:()=>s});var n=r(89151),i=r(2237),o=r(62459);var a=r(86547);const l=(e,t)=>{const r=function(e,t){const r=(0,o.Z)("getMealPlanByUuidV1"),a=(0,i.H)("getMealPlanByUuidV1",e);return(0,n.useQuery)({queryKey:a,queryFn:e=>{let{queryKey:t}=e;return r.request("getMealPlanByUuidV1",t[1])},...t?.queryObserverOptions})}({mealPlanUUID:e,includeParticipantCount:!0,includeAssociatedParticipantInfo:!0},{queryObserverOptions:{staleTime:1e4}}),l=r.data,s=((e,t)=>{const r="getMealPlanDeliveryLocationV1",i=(0,o.Z)(r),a=[r,e];return(0,n.useQuery)({queryKey:a,queryFn:()=>i.request(r,e),...t})})({placeId:l?.mealPlan?.placeReferenceInfo?.placeID??"",provider:l?.mealPlan?.placeReferenceInfo?.provider??""},{enabled:Boolean(l)&&Boolean(t?.fetchDeliveryLocation)}),d=l?.mealPlan?.associatedParticipantInfo;return{deliveryLocationQuery:s,mealPlanQuery:r,mealPlan:l?.mealPlan,isCreator:d?.role===a._b.CREATOR,isParticipant:d?.role===a._b.PARTICIPANT,participantCount:d?.participantCount??0,participantUUID:d?.participantUUID}},s=e=>["getMealPlanByUuidV1",{mealPlanUUID:e}]},97679:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(90867),i=r(51863),o=r(66064),a=r(70247),l=r(55403),s=r(87444),d=r(93801),c=r(59924);const u=e=>{let{store:t,draftOrder:r,loaded:u,isLiveOrder:h=!1}=e;const p=(0,n.Z)(),{isBundledOrder:m}=(0,a.Dz)(),{cmpQuery:g}=(0,l.Z)(),f=(0,s.Z)("canonical_product_smart_cart"),Z=t.isLoading||r?.isLoading||m&&!g.isFetched,v=Boolean(t.hasLoaded)&&Boolean(r?.hasLoaded),_=Boolean(t.data)&&Boolean(r?.data),y=t.error||r?.error,b=!f||g.isFetched;return h?t.error&&!t.data?(0,c.tZ)(d.nQ,{code:500}):t.data&&h&&b?(0,c.tZ)(c.HY,{children:u(t.data,null)}):(0,c.tZ)(i.Z,{}):Z&&!v?(0,c.tZ)(i.Z,{}):y&&!_?(0,c.tZ)(o.Z,{error:y,onClickTryAgain:p}):v&&!_?(0,c.tZ)(o.Z,{error:new Error("Request finished without loading any data"),onClickTryAgain:p}):t.data&&r?.data&&b?(0,c.tZ)(c.HY,{children:u(t.data,r?.data)}):(0,c.tZ)(i.Z,{})}},61559:(e,t,r)=>{r.d(t,{Z:()=>Oe});var n=r(74369),i=r(91931),o=r(33157),a=r(15840),l=r(87444),s=r(49062),d=r(46933),c=r(17222),u=r(81549),h=r(22787),p=r(34567),m=r(73518),g=r(59924);function f(e,t){return(0,g.tZ)(m.Z,{viewBox:"0 0 22 22",ref:t,...e,children:(0,g.tZ)("path",{d:"M15.8 12.5c-4 0-7.2-3.2-7.2-7.2 0-2.1.9-3.9 2.2-5.2C4.8 0 .1 4.8.1 10.6s4.7 10.5 10.5 10.5c5.7 0 10.6-4.6 10.5-10.7-1.4 1.2-3.3 2.1-5.3 2.1z"})})}const Z=n.forwardRef(f);function v(e,t){return(0,g.BX)(m.Z,{viewBox:"0 0 24 24",ref:t,...e,children:[(0,g.tZ)("path",{d:"M22.01 15.01L20 17.02l-2.01-2.01-1.98 1.98L18.02 19l-2.01 2.01 1.98 1.98L20 20.98l2.01 2.01 1.98-1.98L21.98 19l2.01-2.01-1.98-1.98z"}),(0,g.tZ)("path",{d:"M11 0C4.92 0 0 4.92 0 11a10.994 10.994 0 0014.03 10.57A6.5 6.5 0 0120 12.5c.65 0 1.27.09 1.86.27.09-.58.14-1.17.14-1.77 0-6.08-4.92-11-11-11zm2 11.43l-5.83 2.91-1.34-2.68L10 9.57V3h3v8.43z"})]})}const _=n.forwardRef(v);function y(e,t){return(0,g.BX)(m.Z,{viewBox:"0 0 24 24",ref:t,...e,children:[(0,g.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.399 22.998A7.5 7.5 0 0123 10.865V7h-4V1H5v6H1v10c0 3.3 2.7 6 6 6h7.4l-.001-.002zM8 4v3h8V4H8z"}),(0,g.tZ)("path",{d:"M21 13v6h-3v-6h3zM19.5 24a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})]})}const b=n.forwardRef(y);var C=r(93356),P=r(76150),S=r(17604),I=r(32755),w=r(33535),B=r(28222),O=r(27871),M=r(14663),x=r(94813),k=r(83960),z=r(53308),L=r(15070),E=r(47986),T=r(67318),U=r(71279),D=r(62904),A=r(52298),$=r(36278),R=r(7876),N=r(79370),H=r(10892),W=r(94877),X=r(17557);const G=(0,i.zo)("div",(e=>{let{$theme:t,$isMobile:r,$hasSafeAreaBottomSpacing:n}=e;return{background:t.colors.backgroundPrimary,padding:n?`${t.sizing.scale600} ${t.sizing.scale600} ${t.sizing.scale900} ${t.sizing.scale600}`:r?t.sizing.scale600:t.sizing.scale800}})),Y=(0,i.zo)("div",{display:"flex",flexDirection:"row"}),V=(0,i.zo)("span",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,marginBottom:"4px"}})),F=(0,i.zo)("p",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentSecondary}})),K=(0,i.zo)("div",{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),j={$width:"20px"},q=(0,i.w1)(h.Z,(()=>({marginTop:"8px"}))),Q=e=>{let{children:t,isMobile:r,store:n}=e;const i=(0,x.TH)(),o=r?"/cart":void 0,a=(0,T.X)(i,{storeUuid:n.uuid,entryPoint:"multicart"},o);return(0,g.tZ)(p.Z,{$as:c.rU,to:a,children:t})},J=e=>{let{icon:t,title:r,message:n,primaryButton:i,secondaryButton:o}=e;const a=(0,x.TH)(),l=(0,E.dat)(a),{closeSidebarCart:s}=(0,P.Lb)(),u=(0,B.Z)();return(0,g.BX)(g.HY,{children:[(0,g.BX)(Y,{children:[(0,g.tZ)($.KG,{$width:"2px"}),(0,g.tZ)(K,{children:t}),(0,g.tZ)($.KG,{...j}),(0,g.BX)("div",{children:[(0,g.tZ)(V,{children:r}),(0,g.tZ)(F,{children:n})]})]}),(0,g.tZ)(A.ZP,{$height:16}),i||(0,g.tZ)(p.Z,{$as:c.rU,to:l,onClick:s,children:(0,g.tZ)(d.v,{id:"shared.findAnotherStore"})}),o||(i&&!u?(0,g.tZ)(q,{$as:c.rU,to:l,onClick:s,children:(0,g.tZ)(d.v,{id:"shared.findAnotherStore"})}):null)]})},ee=e=>{let{isMobile:t,store:r,validationError:n}=e;const i=(0,z.I0)(),{diningMode:o}=(0,k.Z)(),a=(r.supportedDiningModes||[]).find((e=>{let{mode:t}=e;return"PICKUP"===t})),l="PICKUP"!==o&&Boolean(a?.isAvailable)?(0,g.tZ)(p.Z,{onClick:()=>{i((0,R.A0)(r.uuid,{storeDiningMode:"PICKUP"}))},children:(0,g.tZ)(d.v,{id:"components.checkout.switch_to_pickup"})}):null;return(0,g.tZ)(J,{icon:(0,g.tZ)(b,{size:23}),title:n.alert?.title?.text||"",message:n.alert?.body?.text||"",primaryButton:l})},te=e=>{let{isMobile:t,store:r}=e;const n=(0,C.A4)(),{deliveryAddress:i,diningMode:o}=(0,k.Z)(),a=(0,S.gx)(),l=(0,I.ZP)(),s=Boolean(a?.determinedFromBackend)&&a?.isSchedulable,c=s?(0,g.tZ)(Q,{store:r,isMobile:t,children:(0,g.tZ)(d.v,{id:"shared.reschedule"})}):null,u=r.isOpen?(0,g.tZ)(q,{onClick:()=>{n.updateDraftOrder({overrides:{deliveryTime:{asap:!0},deliveryLocation:i,diningMode:o}})},children:(0,g.tZ)(d.v,{id:"shared.deliverNow"})}):null;return(0,g.tZ)(J,{icon:(0,g.tZ)(_,{size:23}),title:a?.bottomSheetTitleMessage&&s?a.bottomSheetTitleMessage:(0,g.tZ)(d.v,{id:"multicart.validation_not_accepting_orders"}),message:a?.bottomSheetSubtitleMessage&&s?a.bottomSheetSubtitleMessage:(0,g.tZ)(d.v,{id:"multicart.validation_generic_unavailable_store"}),primaryButton:c,secondaryButton:l?.type===D.no?void 0:u})},re=e=>{let{isMobile:t,store:r}=e;const n=(0,S.gx)(),i=Boolean(n?.determinedFromBackend)&&n?.isSchedulable,o=i?(0,g.tZ)(Q,{store:r,isMobile:t,children:(0,g.tZ)(d.v,{id:"shared.scheduleOrder"})}):null;return(0,g.tZ)(J,{icon:(0,g.tZ)(Z,{size:23}),title:n?.bottomSheetTitleMessage&&i?n.bottomSheetTitleMessage:(0,g.tZ)(d.v,{id:"multicart.validation_not_accepting_orders"}),message:n?.bottomSheetSubtitleMessage&&i?n.bottomSheetSubtitleMessage:(0,g.tZ)(d.v,{id:"multicart.validation_generic_unavailable_store"}),primaryButton:o})},ne=e=>{const t=(0,z.I0)(),r=(0,W.k6)(),i=(0,x.TH)(),o=(0,L.v)((e=>{let{user:t}=e;return t.data?.isLoggedIn??!1})),a=(0,I.ZP)(),{isDraftOrderParticipant:l}=(0,k.Z)(),s=(0,O.CF)(),{cartItems:d,upsellFeed:c}=(0,O.ZP)(["cartItems","upsellFeed"]).checkoutPayloads,h=(0,N.Z)(),p=(0,w.ZP)(),m=a?.type===D.Sc,f=h&&d&&(0,U.O)(d),Z=Boolean(a?.alert?.richBody),v=!l&&(s.isLoading||m&&!f),_=(0,M.Z)(),{canShow:y}=(0,H.Z)(e.store.uuid),b=(0,X.Z)();if(n.useEffect((()=>{b&&o&&t({type:"UPSELL_FEED_SUCCESS",payload:c})}),[c,t,b,o]),!l&&Boolean(a?.type)&&!Z){if(p("eats:multicart_error",{error:a}),a?.type===D.pc)return(0,g.tZ)(G,{$isMobile:e.isMobile,$hasSafeAreaBottomSpacing:_,children:(0,g.tZ)(re,{...e})});if(a?.type===D.Ys)return(0,g.tZ)(G,{$isMobile:e.isMobile,$hasSafeAreaBottomSpacing:_,children:(0,g.tZ)(ee,{...e,validationError:a})});if(a?.type===D.no)return(0,g.tZ)(G,{$isMobile:e.isMobile,$hasSafeAreaBottomSpacing:_,children:(0,g.tZ)(te,{...e})})}return(0,g.tZ)(G,{$isMobile:e.isMobile,$hasSafeAreaBottomSpacing:_,children:(0,g.tZ)(u.Z,{$disabled:v,onNavigateToCheckout:e=>{b&&y&&(e.preventDefault(),r.push((0,E.IvK)(i)))}})})};var ie=r(37740),oe=r(3737),ae=r(50262),le=r(73472),se=r(65014),de=r("__fusion__476"),ce=r(17941),ue=r(44997),he=r(83793),pe=r(32857),me=r(68065),ge=r(6264),fe=r(69420),Ze=r(89151),ve=r(3695),_e=r(68799),ye=r(64986);const be="LIVE_ORDER_LATE_EDIT_WARNING",Ce=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{background:t.colors.backgroundPrimary,padding:t.sizing.scale600,display:"flex",flexDirection:"column",gap:t.sizing.scale400}})),Pe=()=>{const[e,t]=de.useState(null),r=(0,Ze.useQueryClient)(),n=(0,x.TH)(),i=(0,fe.k6)(),{hideSidebarCart:o}=(0,P.Lb)(),{liveOrderUuid:a}=(0,ue.W)(),l=(0,w.ZP)(),s=(0,ce.W)({cartType:"LIVE_ORDER",getCartFrom:"workflowId",workflowId:a,selector:e=>e.rawCartData?.liveOrder?.cart?.shoppingCart}),c=(0,ge.W)({getCartFrom:"workflowId",workflowId:a}),u=(0,ye.Z)(),h=(0,he.E6)(s),p="SYNCING"===c.status,m=async()=>{await r.invalidateQueries(["getActiveOrdersV1"]),o(),i.replace((0,E._u3)(n,{uuid:a}))},f=e=>{switch(l("CONFIRM"===e?"eats:loe_update_order_tapped":"eats:loe_discard_updates",{workflowUuid:a}),c.status){case"AVAILABLE":case"SYNCING":c.actions?.confirmCartUpdates({type:e}).then((()=>{"CONFIRM"===e&&l("eats:loe_update_order_succeeded",{workflowUuid:a}),m()})).catch((e=>{const r=(0,_e.Z7)(be);let n=!0;"UPDATE_ORDER_BOTTOM_SHEET"===e?.name?("LIVE_ORDER_LATE_EDIT_WARNING"===e?.payload[0].type?(n=!r?.[a],n&&(0,_e.pc)(be,{...r,[a]:!0},3600),l("eats:loe_update_order_succeeded",{workflowUuid:a})):l("eats:loe_unable_update_order",{workflowUuid:a}),n&&t(e?.payload[0]),c.actions.syncCart({workflowUUID:a,orderUUID:a}),"LIVE_ORDER_LATE_EDIT_WARNING"===e?.payload[0].type&&r?.[a]&&m()):u()}))}};return(0,g.BX)(g.HY,{children:[e?(0,g.tZ)(ve.Z,{orderValidationError:e,onClose:()=>{"LIVE_ORDER_LATE_EDIT_WARNING"===e?.type&&m(),t(null)}}):null,h?(0,g.BX)(Ce,{children:[(0,g.tZ)(pe.Z,{overrides:{BaseButton:{style:()=>({width:"100%"})}},size:me.NO.large,onClick:()=>f("CONFIRM"),disabled:p,children:(0,g.tZ)(d.v,{id:"shared.updateOrder"})}),(0,g.tZ)(pe.Z,{overrides:{BaseButton:{style:()=>({width:"100%",":hover":{backgroundColor:"transparent"},":active":{backgroundColor:"transparent"}})}},kind:me.TO.tertiary,size:me.NO.large,onClick:()=>f("DISCARD"),disabled:p,children:(0,g.tZ)(d.v,{id:"edit_order.discard_button"})})]}):null]})};var Se=r(16389),Ie=r(3948);const we=(0,i.zo)("div",{position:"sticky",bottom:0,margin:"0 !important"}),Be=(0,i.zo)("div",{flexGrow:1}),Oe=e=>{let{hasGroupOrder:t,isMobile:r,store:d,quantitySelectType:c,isLiveOrder:u}=e;const{stopTiming:h}=(0,le.K3)(),{addOnOffer:p}=(0,Ie.J)(),[m,f]=(0,i.hQ)(),Z=(0,l.Z)("cart_checkout_auto_renew_nudge_enabled");return(0,n.useEffect)((()=>{h(se.B.CART_SELECTED_FROM_POPOVER,{shouldEmitTiming:!0})}),[h]),(0,g.BX)(g.HY,{children:[t?(0,g.BX)("div",{children:[(0,g.tZ)(o.IY,{$spaceAfter:16}),(0,g.tZ)(ie.Z,{gutterWidth:16}),(0,g.tZ)(ae.Z,{gutterWidth:16,showAddGuestsBtn:!1,showFacePile:!0,showRemoveParticipantButton:!0})]}):(0,g.tZ)(oe.ZP,{quantitySelectType:c}),(0,g.tZ)(Be,{}),u?(0,g.tZ)(we,{children:(0,g.tZ)(Pe,{})}):(0,g.BX)(we,{children:[p?(0,g.tZ)(Se.u,{styleOverrides:{bottom:f.sizing.scale600,position:"relative"},storeUUID:d.uuid,shouldRedirectToHomeAfterClearCart:!0}):null,Z?(0,g.tZ)(s.l,{}):null,(0,g.tZ)(a.Z,{}),(0,g.tZ)(ne,{isMobile:r,store:d})]})]})}},71279:(e,t,r)=>{r.d(t,{O:()=>I,Z:()=>w});var n=r(46933),i=r(59210),o=r("__fusion__567"),a=r(91931),l=r(7646),s=r(36278),d=r(17604),c=r(32755),u=r(83960),h=r(17222),p=r(47986),m=r(94813),g=r(27871),f=r(79370),Z=r(59924);const v=(0,a.zo)("div",(e=>({display:"flex",flexDirection:"row",padding:"24px 0 16px",borderBottom:`1px solid ${e.$theme.colors.borderOpaque}`}))),_=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentSecondary}})),y=(0,a.zo)("div",{display:"flex",fledDirection:"column",alignItems:"center",justifyContent:"center"}),b=(0,a.zo)("div",{flexGrow:"1"}),C={$width:"21px"},P=()=>{const[,e]=(0,a.hQ)(),t=(0,m.TH)();return(0,Z.BX)(v,{children:[(0,Z.tZ)(y,{children:(0,Z.tZ)(o.default,{size:21,color:e.colors.contentNegative})}),(0,Z.tZ)(s.KG,{...C}),(0,Z.BX)(b,{children:[(0,Z.tZ)(i.Uc,{children:(0,Z.tZ)(n.v,{id:"go.multicart.invalid.item.heading"})}),(0,Z.tZ)(i.aM,{color:e.colors.contentSecondary,children:(0,Z.tZ)(n.v,{id:"go.multicart.invalid.item.subtext"})})]}),(0,Z.tZ)(s.KG,{$width:e.sizing.scale600}),(0,Z.tZ)(y,{children:(0,Z.tZ)(l.Bi,{$as:h.rU,to:(0,p.vN_)(t,"invalidItems"),children:(0,Z.tZ)(n.v,{id:"ro.label.view"})})})]})},S=e=>{let{error:t}=e;const{hasGroupOrder:r,isDraftOrderCreator:c}=(0,u.Z)(),[,h]=(0,a.hQ)(),p=(0,d.Ut)(t),m=(0,d.SV)(t);return p&&0!==m.length?r&&c?(0,Z.tZ)(P,{}):(0,Z.BX)(v,{children:[(0,Z.tZ)(y,{children:(0,Z.tZ)(o.default,{size:21,color:h.colors.contentNegative})}),(0,Z.tZ)(s.KG,{...C}),(0,Z.BX)(b,{children:[(0,Z.tZ)(i.Uc,{children:(0,Z.tZ)(n.v,{id:"multicart.invalid_items_proceed"})}),(0,Z.tZ)(_,{children:m.join(", ")})]}),(0,Z.tZ)(s.KG,{$width:h.sizing.scale600}),(0,Z.tZ)(y,{children:(0,Z.tZ)(l.Bi,{onClick:p,children:(0,Z.tZ)(n.v,{id:"shared.remove"})})})]}):null},I=e=>{const t=e=>e&&e.some((e=>e.cartItemActions&&e.cartItemActions.some((e=>"SCHEDULE"===e.cartItemActionType))));return e.cartItems?t(e.cartItems):!!e.cartItemsGroups&&t(e.cartItemsGroups.flatMap((e=>e.cartItems)))},w=()=>{const e=(0,c.ZP)(),t=(0,f.Z)(),{cartItems:r}=(0,g.ZP)(["cartItems"]).checkoutPayloads;if(!e||!r||t&&r&&I(r))return null;switch(e.type){case"UNAVAILABLE_ITEMS":return(0,Z.tZ)(S,{error:e});default:return null}}},31017:(e,t,r)=>{r.d(t,{X:()=>_});var n=r(7646),i=r(74369),o=r(36278),a=r(91931),l=r(17222),s=r(13865),d=r(65848),c=r(94813),u=r(76150),h=r(47986),p=r(46933),m=r(33535),g=r(41116),f=r(59924);const Z=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{width:t.sizing.scale800,height:t.sizing.scale800,flex:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),v=(0,a.w1)(n.Bi,(e=>{let{$theme:t}=e;return{paddingRight:t.sizing.scale500,paddingLeft:t.sizing.scale300}})),_=()=>{const e=(0,g.g)(),t=(0,c.TH)(),{closeSidebarCart:r}=(0,u.Lb)({transitionMS:500}),n=(0,m.ZP)(),a="treatment_1"===e?(0,h.EOw)(t,{source:"zero_state_cart"}):(0,h.bPf)(t,"zero_state_cart"),_="treatment_1"===e?(0,f.tZ)(s.Z,{size:14}):(0,f.tZ)(d.Z,{size:14}),y=(0,i.useCallback)((()=>n("eats:zero_state_cart_reorder_fav_entrypoints","treatment_1"===e?{cta:"orders"}:{cta:"favorites"})),[n,e]),b="treatment_1"===e?(0,f.tZ)(p.v,{id:"shared.orders"}):(0,f.tZ)(p.v,{id:"header.menu.favourites"});return"treatment_1"!==e&&"treatment_2"!==e?null:(0,f.BX)(v,{$as:l.rU,to:a,onClick:()=>{r(),y()},children:[(0,f.tZ)(Z,{children:_}),(0,f.tZ)(o.Q3,{}),b]})}},73845:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(74369),i=r(33535),o=r(27871),a=r(24316);const l=e=>{let{cartOpen:t,store:r,draftOrder:l}=e;const s=(0,i.ZP)(),d=(0,n.useRef)({startTime:0,storeTime:0,draftOrderTime:0,checkoutPresentationTime:0}),{activeDraftOrderUUID:c}=(0,a.Z)(),u=(0,o.CF)();(0,n.useEffect)((()=>{t&&c&&(d.current.startTime=Date.now())}),[t,c]),(0,n.useEffect)((()=>{if(!d.current.startTime)return;const e=Boolean(r?.hasLoaded&&l?.hasLoaded&&u?.hasLoaded),t=Boolean(r?.data&&l?.data&&u?.data),n=Date.now()-d.current.startTime,i=(e,t)=>t&&!d[e]&&(d[e]=n);i("storeTime",r?.hasLoaded),i("draftOrderTime",l?.hasLoaded),i("checkoutPresentationTime",u?.hasLoaded),e&&d.current.startTime&&(d.current.startTime=0,t&&s("eats:cart_latency",{timing:String(n)}))}),[t,r?.hasLoaded,l?.hasLoaded,u?.hasLoaded])}},2458:(e,t,r)=>{r.d(t,{LS:()=>i,Xj:()=>o,ZP:()=>s,sY:()=>l});var n=r("__fusion__476");const i=259200,o=172800,a=e=>!e||e<=0?"00":e<10?`0${e}`:e.toString(),l=(e,t)=>{switch(t){case"minute":return Math.floor(e/60);case"hours":return Math.floor(e/3600);case"days":return Math.floor(e/86400);default:return e}},s=e=>{const[t,r]=n.useState(e);return n.useEffect((()=>{if(t>0){const e=setInterval((()=>{r(t-1)}),1e3);return()=>clearInterval(e)}}),[t,e]),(e=>({hoursLabel:a(Math.floor(e/3600)),minutesLabel:a(Math.floor(e%86400%3600/60)),secondsLabel:a(Math.round(e%86400%3600%60)),secondsLeft:e}))(t)}},20485:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(15649),i=r(83960),o=r(60362);function a(e,t){const r=(0,i.Z)(),a=(0,n.Z)(),l=t||r.deliveryTime||{};if(!e?.lockAtInMs&&!e?.lockBeforeScheduledInMinutes)return null;if(e.lockAtInMs)return(0,o.w4)(a,e.lockAtInMs);if("number"==typeof e.lockBeforeScheduledInMinutes&&l.scheduled){const t=6e4*e.lockBeforeScheduledInMinutes,r=(0,o.$m)(l.date)||new Date;return(0,o.yn)(r,l.startTime),(0,o.w4)(a,r-t)}}},96911:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(45631),i=r(74369),o=r(16108),a=r(29194),l=r(5639);const s=.5;function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,a.gm)(),r=(0,i.useRef)(null),[d,u]=(0,o.Z)({threshold:s,root:r?.current}),[h,p]=(0,o.Z)({threshold:s,root:r?.current}),m=c(u),g=c(p),f=(0,l.hU)().isSafari,Z=!(f&&"rtl"===t),v=e.scrollOffset||0,_=(0,i.useCallback)((e=>{const{current:n}=r;if(!n||!n.clientWidth)return;const i="forward"===e?n.clientWidth+v:-(n.clientWidth+v),o="ltr"===t?n.scrollLeft+i:n.scrollLeft-i;n.scrollTo?n.scrollTo({left:o,behavior:"smooth"}):n.scrollLeft=o}),[t,v]),y=(0,i.useCallback)(((e,r)=>({...0===e?{ref:d}:{},...e===r-1?{ref:h}:{},$supportsScrollSnapping:Z,$textDirection:t})),[d,h,Z,t]),b=(0,i.useCallback)(((e,t)=>(0,n.Z)(e,t)),[]);return{containerRef:r,getPageChunks:b,getPageProps:y,isPreviousPageDisabled:m,isNextPageDisabled:g,handlePageChange:_,supportsScrollSnapping:Z,textDirection:t}}const c=e=>!!e?.intersectionRatio&&e.intersectionRatio>s},45631:(e,t,r)=>{r.d(t,{Z:()=>n});const n=function(e,t){const r=null==e?0:e.length;if(!r||t<1)return[];let n=0,i=0;const o=new Array(Math.ceil(r/t));for(;n<r;)o[i++]=e.slice(n,n+=t);return o}}}]);