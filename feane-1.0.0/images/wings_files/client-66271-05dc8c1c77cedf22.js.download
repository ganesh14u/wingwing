"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[66271],{90985:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(92300),a=r(95958),o=r(48700),n=r(42209),s=r(59924);const l=e=>{let{children:t,content:r,color:l,shape:d=o.X3.rectangle,placement:c=o.r4.topRight,hierarchy:u,horizontalOffset:h,verticalOffset:p,hidden:g,overrides:m={}}=e;const[Z,y]=(0,i.jb)(m.Badge,a.j8),[v,f]=(0,i.jb)(m.Root,a.Fp),[x,b]=(0,i.jb)(m.Positioner,a.x5),S=(0,n.u)(t);o.r4.topLeft,o.r4.topRight,o.r4.bottomRight,o.r4.bottomLeft;return S?(0,s.BX)(v,{...f,children:[S,(0,s.tZ)(x,{$horizontalOffset:h,$verticalOffset:p,$placement:c,$role:o.HB.badge,...b,children:(0,s.tZ)(Z,{$hierarchy:u,$shape:d,$color:l,$hidden:g,...y,children:r})})]}):(0,s.tZ)(Z,{$hierarchy:u,$shape:d,$color:l,$hidden:g,...y,children:r})}},98470:(e,t,r)=>{r.d(t,{Z:()=>c});var i=r(74369),a=r(92300),o=r(91972),n=r(72525),s=r(59924);class l extends i.Component{static defaultProps={getProgressLabel:(e,t,r)=>`${Math.round((e-r)/(t-r)*100)}% Complete`,infinite:!1,overrides:{},showLabel:!1,size:o.N.medium,steps:1,successValue:100,minValue:0,maxValue:100,value:0};componentDidMount(){0}render(){const{overrides:e={},getProgressLabel:t,value:r,size:o,steps:l,successValue:d,minValue:c,maxValue:u,showLabel:h,infinite:p,errorMessage:g,forwardedRef:m,...Z}=this.props,y=this.props["aria-label"]||this.props.ariaLabel,v=t(r,u,c),f=function(e,t,r,i){return`Step ${Math.ceil((e-r)/(t-r)*i)} of ${i}`}(r,u,c,l),x=y||this.props.infinite?"Loading":this.props.steps>1?f:v,b=100!==u?u:d,[S,$]=(0,a.jb)(e.Root,n.Fp),[_,C]=(0,a.jb)(e.BarContainer,n.d4),[z,w]=(0,a.jb)(e.Bar,n.sQ),[k,T]=(0,a.jb)(e.BarProgress,n.Bd),[I,E]=(0,a.jb)(e.Label,n.ar),[L,B]=(0,a.jb)(e.InfiniteBar,n.ko),P={$infinite:p,$size:o,$steps:l,$successValue:b,$minValue:c,$maxValue:b,$value:r};return(0,s.BX)(S,{ref:m,"data-baseweb":"progress-bar",role:"progressbar","aria-label":x,"aria-valuenow":p?null:r,"aria-valuemin":p?null:c,"aria-valuemax":p?null:b,"aria-invalid":!!g||null,"aria-errormessage":g,...Z,...P,...$,children:[(0,s.tZ)(_,{...P,...C,children:p?(0,s.BX)(i.Fragment,{children:[(0,s.tZ)(L,{$isLeft:!0,$size:P.$size,...B}),(0,s.tZ)(L,{$size:P.$size,...B})]}):function(){const e=[];for(let t=0;t<l;t++)e.push((0,s.tZ)(z,{...P,...w,children:(0,s.tZ)(k,{$index:t,...P,...T})},t));return e}()}),h&&(0,s.tZ)(I,{...P,...E,children:t(r,b,c)})]})}}const d=i.forwardRef(((e,t)=>(0,s.tZ)(l,{forwardedRef:t,...e})));d.displayName="ProgressBar";const c=d},61799:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(46933),a=r(15649),o=r(60362),n=r(59924);const s=e=>{const t=(0,a.Z)(),r={date:(0,o.p6)(t,e.date),startTime:(0,o.CJ)(t,e.startTime),endTime:(0,o.CJ)(t,e.endTime)};return"shared.scheduledFor.dateAndTimeRange"===e.translationKey?(0,n.tZ)(i.v,{id:"shared.scheduledFor.dateAndTimeRange",data:r}):"shared.scheduledDeliveryTime.dateAndTimeRange"===e.translationKey?(0,n.tZ)(i.v,{id:"shared.scheduledDeliveryTime.dateAndTimeRange",data:r}):"shared.scheduledPickupTime.dateAndTimeRange"===e.translationKey?(0,n.tZ)(i.v,{id:"shared.scheduledPickupTime.dateAndTimeRange",data:r}):(0,n.tZ)(i.v,{id:"shared.dateAndTimeRange",data:r})}},9071:(e,t,r)=>{r.d(t,{Z:()=>k});var i=r(74369),a=r(91931),o=r(46329),n=r(33535),s=r(50818),l=r(94579),d=r(53456),c=r(1257),u=r(74057),h=r(28222),p=r(57444),g=r(69420),m=r(47986),Z=r(70471),y=r(87444),v=r(94813),f=r(70971),x=r(79168),b=r(59924);const S=(0,a.zo)("div",(e=>{let{$isFullWidth:t}=e;return{display:"flex",position:"relative",width:t?"100%":"auto"}})),$=(0,a.w1)(d.Z,(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",...t.typography.LabelSmall,textAlign:"center",height:"100%",padding:`0 ${t.sizing.scale550}`,borderRadius:t.borders.pillButtonBorderRadius,transition:l.pB.default}})),_=(0,a.zo)("div",(e=>{let{$theme:t,$background:r,$isDisabled:i}=e;return{background:t.colors[r||"backgroundSecondary"],display:"flex",width:"100%",borderRadius:t.borders.pillButtonBorderRadius,padding:"4px",boxSizing:"border-box",whiteSpace:"nowrap",...i?{...(0,p.Z)(t)}:{}}})),C=(0,a.zo)("div",{display:"grid",gridAutoFlow:"column",gridAutoColumns:"1fr",width:"100%"}),z=(0,a.zo)("div",(e=>{let{$isDisabled:t}=e;return{display:"flex",justifyContent:"center",zIndex:l.I_.surface,...t?{pointerEvents:"none"}:{}}})),w=(0,a.zo)("div",(e=>{let{$background:t,$position:r,$theme:i,$width:a,$hasShadow:o}=e;return{position:"absolute",transform:`translateX(${r}px)`,height:"calc(100% - 8px)",width:`${a||0}px`,background:i.colors[t],borderRadius:i.borders.pillButtonBorderRadius,zIndex:l.I_.base,transition:a?l.pB.default:"none",...o?{boxShadow:i.lighting.shadow400}:{}}})),k=e=>{const t=(0,g.k6)(),r=(0,v.TH)(),a=(0,n.ZP)(),l=(0,i.useRef)([]),d=(0,i.useRef)(!1),[p,k]=(0,i.useState)({position:0,width:0}),{diningModes:T,handleDiningModeClick:I}=(0,o.ZP)(null),E=(0,c.Z)(T),{modalName:L}=(0,m.RAN)(r,["modalName"]),{diningMode:B}=(0,u.Z)();(0,o.OT)({diningModes:E});const P=(0,h.Z)(),R=(0,y.Z)("apple_maps_checkout_dining_mode_listener"),O=(0,Z.Z)(),D=(0,f.T)(),H=e.supportedDiningModes?e.supportedDiningModes:E,A=H&&H.length<2||!e.supportedDiningModes&&!E||D;(0,i.useEffect)((()=>{A||!H||d.current||(d.current=!0,a("eats:dining_mode_selector",{diningModes:(0,s.rG)(H),diningMode:B}))}),[a,H,B,A]),(0,i.useEffect)((()=>{if(!R||!O)return;Boolean(L)||"DELIVERY"===B&&(I("PICKUP"),a("eats:apple_maps_checkout_dining_mode_reset_activated"))}),[L,O,B,I,R,a]),(0,i.useEffect)((()=>{if(H){let e=0;H.forEach(((t,r)=>{const i=l.current[r]?.getBoundingClientRect()||null;B===t.mode&&i&&k({position:e,width:i.width}),e+=i?.width||0}))}}),[H,B]);const M=(0,x.Z)(e.size??(e.smallPill?"small":void 0));if(A)return null;let V;return V=e.isDisabled&&e.inverseColors?"contentStateDisabled":P?"primary":e.inverseColors?"backgroundInversePrimary":"backgroundPrimary",(0,b.tZ)(S,{$isFullWidth:Boolean(e.isFullWidth),"data-testid":"dining-mode-toggle","data-testid-modality":B,children:(0,b.BX)(_,{$isDisabled:e.isDisabled,$style:M,children:[(0,b.tZ)(C,{children:(H||[]).map(((i,o)=>{const n=B===i.mode;let s;return s=e.isDisabled?e.inverseColors&&n?"disabled":"contentStateDisabled":P&&n?"buttonPrimaryText":P&&!n?"contentPrimary":e.inverseColors&&n?"contentInversePrimary":"contentPrimary",(0,b.tZ)(z,{ref:e=>{l.current[o]=e},$isDisabled:e.isDisabled,children:(0,b.tZ)($,{type:"radio",color:s,label:i.title,value:i.mode,checked:n,hideBackground:!0,dataTestid:`modality-option-${i.mode}`,onChange:()=>{e.isDisabled||(a("eats:dining_mode_click",{diningMode:i.mode}),I(i.mode),O&&"DELIVERY"===i.mode&&t.push((0,m.vN_)(r,"locationManager","DELIVERY_LOCATION_MANAGER")))}})},i.mode)}))}),(0,b.tZ)(w,{$background:V,$position:p.position,$width:p.width,$hasShadow:e.hasPillShadow})]})})}},33841:(e,t,r)=>{r.d(t,{Z:()=>d});var i=r(91931),a=r(24187),o=r(52298),n=r(69630),s=r(59924);const l=(0,i.zo)("div",(e=>{let{$theme:t,$isInMulticart:r}=e;return{padding:"24px",position:r?"sticky":"absolute",bottom:0,left:0,right:0,...t.overlays.floatingButtonGradient}}));function d(e){const[t,r]=(0,a.Z)(),i=(0,n.Z)();return(0,s.BX)(s.HY,{children:[i?null:(0,s.tZ)(o.ZP,{$height:t?.height||0}),(0,s.tZ)(l,{$isInMulticart:i,ref:r,children:e.children})]})}},74365:(e,t,r)=>{r.d(t,{c:()=>m});var i=r("__fusion__476"),a=r(74369),o=r(91931),n=r(94579),s=r(14770),l=r(59924);const d=(0,o.zo)("div",{padding:"16px 24px"}),c=(0,o.zo)("div",(e=>({position:"absolute",width:"100%",top:"0",left:"0",backgroundColor:e.$theme.colors[e.$bgColor],zIndex:n.I_.modal}))),u=(0,o.zo)(s.Z,{width:"24px",height:"24px",display:"flex",position:"relative",cursor:"pointer",right:"6px"}),h=(0,o.zo)("div",{position:"relative",marginTop:"8px"}),p=((0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.onNegative}})),(0,o.zo)("div",(e=>{let{$theme:t}=e;return t.typography.LabelMedium}))),g=e=>{const[t,r]=i.useState(!1);(0,a.useEffect)((()=>{r(!1)}),[]);return(0,l.tZ)(l.HY,{children:t?null:(0,l.tZ)(c,{$bgColor:e.$bgColor,children:(0,l.BX)(d,{children:[(0,l.tZ)(u,{onClick:()=>{r(!0)},iconColor:e.$iconFill}),(0,l.tZ)(h,{children:e.children})]})})})},m=e=>(0,l.tZ)(g,{$bgColor:"warning",$iconFill:"onWarning",children:(0,l.tZ)(p,{children:e.children})})},96965:(e,t,r)=>{r.d(t,{Z:()=>T});var i=r(74369),a=r(17222),o=r(14016),n=r(33535),s=r(79908),l=r(45423),d=r(22395),c=r(36278),u=r(91931),h=r(57444),p=r(61799),g=r(22787),m=r(58814);var Z=r(80165),y=r(74057),v=r(54939),f=r(28222),x=r(82794),b=r(71051),S=r(29230),$=r(97130),_=r(59924);const C=e=>{let{$theme:t,$isOnlineOrdering:r,$isDisabled:i}=e;return i?(0,h.Z)(t):r?(e=>{let{$theme:t,disabled:r}=e;return{color:t.colors.onlineOrderingPrimaryInverseText,background:t.colors.onlineOrderingPrimaryInverse,...r?(0,h.Z)(t):{":hover":{background:t.colors.onlineOrderingPrimaryInverseHover},":active":{background:t.colors.onlineOrderingPrimaryInverseActive},...(0,m.Z)(t)}}})({$theme:t}):(0,g.y)({$theme:t})},z=(0,u.zo)(a.rU,(e=>{let{$size:t,$drawBorder:r,$theme:i,$isOnlineOrdering:a,$isDisabled:o}=e;return{...i.typography.LabelSmall,borderRadius:i.borders.pillButtonBorderRadius,display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer",height:"large"===t?"48px":"36px",padding:"8px 12px",boxSizing:"border-box",border:r?`1px solid ${i.colors.onlineOrderingPrimaryInverseActive}`:void 0,minWidth:`${S.Kv.addressMinWidth}px`,flex:"0 1 auto",...C({$theme:i,$isDisabled:o,$isOnlineOrdering:a})}})),w=(0,u.zo)("div",(e=>{let{$theme:t}=e;return{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",flex:`1 1 ${t.sizing.scale1200}`}})),k=(0,u.zo)("div",{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",flex:"0 1 content"}),T=e=>{const{deliveryTime:t,deliveryLocation:r,diningMode:a}=(0,y.Z)(),u=(0,i.useContext)(b.k7),h=(0,o.T)(),g=(0,n.ZP)(),m=(0,Z.WI)("header-location-button"),S=(0,f.Z)(),C=(0,x.d1)()?.customization?.colorInfo?.primary,{shouldOverrideLabel:T,overrideLabel:I}=(0,v.Z)(),{storeUuid:E,isSchedulable:L}=e,{redirectUrl:B}=(0,$.X)();return r?(0,_.BX)(z,{"data-testid":"edit-delivery-location-button",ref:m,$size:e.size,$isDisabled:e.deliveryLocationPickerDisabled,to:()=>B({storeUuid:E,isSchedulable:L}),onClick:t=>{e.deliveryLocationPickerDisabled?t.preventDefault():(g("eats:delivery_details_click"),u.set("addressChangeTouched",!0))},$isOnlineOrdering:S,$drawBorder:Boolean(S&&C),children:[(0,_.tZ)(s.Z,{color:"onHeader",type:"Pin",width:"16px",ariaLabel:h("component.location_typeahead_mobile.deliver_to")}),(0,_.tZ)(c.ZP,{$width:"8px"}),T?I:(0,_.tZ)(w,{"data-testid":"delivery-address-label",children:r.address.address1}),(0,_.tZ)(d.Z,{spaces:2}),(0,_.tZ)(k,{"data-test":"delivery-time",children:"scheduled"in t?(0,_.tZ)(p.Z,{date:t.date,startTime:t.startTime,endTime:t.endTime}):(0,_.tZ)(l.Z,{shortenedTime:!0,diningMode:a})})]}):null}},81707:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(74369),a=r(73518),o=r(59924);function n(e,t){return(0,o.tZ)(a.Z,{viewBox:"0 0 24 24",ref:t,...e,children:(0,o.tZ)("path",{d:"M18 7V2H6v5H1v15h22V7h-5zm-3 0H9V5h6v2z"})})}const s=i.forwardRef(n)},56348:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(74369),a=r(73518),o=r(59924);function n(e,t){return(0,o.tZ)(a.Z,{viewBox:"0 0 24 24",ref:t,...e,children:(0,o.tZ)("path",{d:"M22 6.9v3.8l-10 7.7-10-7.7V6.9l10 7.7 10-7.7z"})})}const s=i.forwardRef(n)},87873:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(74369),a=r(73518),o=r(59924);function n(e,t){return(0,o.tZ)(a.Z,{viewBox:"0 0 20 20",ref:t,...e,children:(0,o.tZ)("path",{d:"M18.834 17l-3.666-3.667c.916-1.333 1.5-2.916 1.5-4.666C16.667 4.333 13.083.75 8.75.75 4.417.75.834 4.333.834 8.667c0 4.333 3.583 7.916 7.917 7.916 1.75 0 3.333-.583 4.666-1.5l3.667 3.667 1.75-1.75zm-15.5-8.25c0-3 2.417-5.417 5.417-5.417s5.416 2.417 5.416 5.417-2.416 5.417-5.416 5.417c-3 0-5.417-2.417-5.417-5.417z"})})}const s=i.forwardRef(n)},53456:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(91931),a=r(37555),o=r(94579),n=r(59924);const s=(0,i.zo)("div",(e=>{let{$color:t,$checked:r,$hideBackground:i,$theme:a,$hasShadow:n}=e;return{...a.typography.LabelSmall,padding:"8px 12px",boxSizing:"border-box",...r?{backgroundColor:a.colors.buttonPrimaryFill,color:a.colors.buttonPrimaryText}:{backgroundColor:a.colors.buttonSecondaryFill,color:a.colors.buttonSecondaryText},...i?{backgroundColor:"initial"}:{},...t?{color:a.colors[t]}:{},cursor:"pointer",userSelect:"none",...n?{boxShadow:a.lighting.shadow400,transition:"box-shadow ease 0ms",transitionDelay:r?o.pB.defaultDuration:"0ms"}:{}}})),l=(0,i.Le)(s,(e=>function(t){return(0,n.tZ)(e,{$color:t.color,$checked:t.checked,$hideBackground:t.hideBackground,$hasShadow:t.hasShadow,role:t.type,"aria-checked":t.checked,tabIndex:0,"aria-label":t.label,onClick:()=>t.onChange(t.value),onKeyDown:e=>e.keyCode===a.Fx&&t.onChange(t.value),$as:t.$as,to:t.to,"data-testid":t.dataTestid,children:t.label})}))},40137:(e,t,r)=>{r.d(t,{Z:()=>u});var i=r(74369),a=r(69420),o=r(5562),n=r(67672),s=r(94813),l=r(47986),d=r(48351),c=r(33535);const u=()=>{const[e,t]=(0,i.useState)(null),[r,u]=(0,i.useState)(!1),{isGeolocationAvailable:h,isGeolocationPermissionsQueryAvailable:p,getGeoLocation:g,queryGeolocationPermissions:m}=(0,o.Z)(),Z=(0,d.Z)(),y=(0,a.k6)(),v=(0,s.TH)(),f=(0,c.ZP)(),x=(0,i.useCallback)(((e,t)=>{const r=(0,l.dat)(v,{coordinates:{latitude:e,longitude:t},entryPoint:"feed_location_request"});(0,n.Z)((0,l.mZy)(r))}),[v]),b=(0,i.useCallback)((async()=>new Promise(((e,t)=>{h||t(new Error("Geolocation not available in this browser")),m((r=>{"prompt"===r&&f("eats:share_location_request_impression"),g(((i,a)=>{if(a)"prompt"===r&&1===a.code&&f("eats:share_location_request_click",{feedLocationSharing:{cta:"deny"}}),t(a);else{const{latitude:a,longitude:o}=i||{};"prompt"===r&&f("eats:share_location_request_click",{feedLocationSharing:{cta:"allow"}}),"number"!=typeof a||"number"!=typeof o?t(new Error("Invalid latitude or longitude")):(f("eats:share_location_success"),e({latitude:a,longitude:o}))}}))}))}))),[m,f,g,h]),S=(0,i.useCallback)((e=>{t(e),y.replace((0,l.Y$z)(v,{mode:"ERROR"}))}),[y,v]),$=(0,i.useCallback)((async()=>{f("eats:share_location_inline_click");try{u(!0);const{latitude:e,longitude:t}=await b();x(e,t)}catch(e){u(!1),S(e)}}),[f,b,x,S]);return{loading:r,addressViaPreciseLocationXpTreatment:Z,isGeolocationPermissionsQueryAvailable:p,queryGeolocationPermissions:m,onAllowLocation:$,geoLocationError:e}}},6573:(e,t,r)=>{r.d(t,{Z:()=>I});var i=r(91931),a=r(46933),o=r(36278),n=r(79908),s=r(94579),l=r(81707),d=r("__fusion__854"),c=r(40137),u=r(19912),h=r(32583),p=r(54361),g=r(8639),m=r(59924);const Z=(0,i.zo)("li",(e=>{let{$theme:t,$isHighlighted:r,$size:i}=e;return{backgroundColor:r?t.colors.menuFillHover:"transparent",padding:"mini"===i?t.sizing.scale500:t.sizing.scale600,display:"flex",cursor:"pointer",transition:s.pB.itemBackground,outline:"none",":hover":{background:t.colors.menuFillHover}}})),y=(0,i.w1)(Z,{position:"relative"}),v=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{position:"absolute",top:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",backgroundColor:(0,g.uE)(t.colors.backgroundPrimary,.5)}})),f=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{width:t.sizing.scale900,height:t.sizing.scale900,flex:"none",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:t.colors.backgroundSecondary,alignSelf:"start",borderRadius:"50%"}})),x=(0,i.zo)("div",{alignSelf:"start"}),b=(0,i.zo)("div",{minWidth:0}),S=(0,i.zo)("div",(e=>{let{$theme:t,$size:r}=e;return{..."mini"===r?t.typography.ParagraphSmall:t.typography.ParagraphMedium,color:t.colors.contentPrimary,textOverflow:"ellipsis",overflow:"hidden"}})),$=(0,i.zo)("div",(e=>{let{$theme:t,$size:r}=e;return{..."mini"===r?t.typography.ParagraphXSmall:t.typography.ParagraphSmall,color:t.colors.contentSecondary,textOverflow:"ellipsis",overflow:"hidden"}})),_=e=>(0,m.BX)(Z,{$isHighlighted:e.highlightedIndex===e.index,...e.getItemProps({index:e.index}),$size:e.size,"data-testid":"location-result",children:[(0,m.tZ)(x,{children:(0,m.tZ)(n.Z,{type:"Pin",background:!0})}),(0,m.tZ)(o.ZP,{$width:"8px"}),(0,m.BX)(b,{children:[(0,m.tZ)(S,{$size:e.size,children:e.location.addressLine1}),(0,m.tZ)($,{$size:e.size,children:e.location.addressLine2})]})]}),C=e=>(0,m.BX)(Z,{$isHighlighted:e.highlightedIndex===e.index,...e.getItemProps({index:e.index}),"data-testid":"location-result-tagged",children:[(0,m.BX)(x,{children:["work"===e.taggedLocation.tag.toLowerCase()?(0,m.tZ)(l.Z,{..."mini"===e.size?{size:20}:{}}):null,"work"!==e.taggedLocation.tag.toLowerCase()?(0,m.tZ)(n.Z,{type:"home"===e.taggedLocation.tag?"Home":"Time",background:!0,..."mini"===e.size?{width:20,height:20}:{}}):null]}),(0,m.tZ)(o.ZP,{$width:"8px"}),(0,m.BX)(b,{children:[(0,m.tZ)(S,{$size:e.size,children:e.taggedLocation.address.address.title}),(0,m.tZ)($,{$size:e.size,children:e.taggedLocation.address.address.subtitle}),e.taggedLocation.interactionString&&e.taggedLocation.instructionNotes?(0,m.tZ)($,{$size:e.size,children:(0,m.tZ)(a.v,{id:"shared.taggedLocationInstructions",data:{interaction:e.taggedLocation.interactionString,notes:e.taggedLocation.instructionNotes}})}):(0,m.tZ)($,{$size:e.size,children:e.taggedLocation.interactionString||e.taggedLocation.instructionNotes})]})]}),z=e=>{const{onAllowLocation:t,loading:r}=(0,c.Z)(),i=(0,u.Z)({eventName:"eats:share_location_inline_impression"});return(0,m.BX)(y,{$isHighlighted:!1,$size:e.size,"data-testid":"location-geolocation-request",ref:i,onClick:r?void 0:t,children:[r?(0,m.tZ)(v,{children:(0,m.tZ)(h.$,{$size:p.N.small})}):null,(0,m.tZ)(f,{children:(0,m.tZ)(d.default,{size:20})}),(0,m.tZ)(o.ZP,{$width:"8px"}),(0,m.BX)(b,{children:[(0,m.tZ)(S,{$size:e.size,children:(0,m.tZ)(a.v,{id:"components.location_manager.allow_location_item_title"})}),(0,m.tZ)($,{$size:e.size,children:(0,m.tZ)(a.v,{id:"components.location_manager.allow_location_item_subtitle"})})]})]})},w=(0,i.zo)("li",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,padding:"16px"}})),k=e=>{let{getItemProps:t}=e;return(0,m.tZ)(w,{...t({index:0}),children:(0,m.tZ)(a.v,{id:"shared.hmmCantFindThisAddress"})})},T=(0,i.zo)("ul",(e=>{let{$hasResults:t,$theme:r,$size:i}=e;return{background:r.colors.menuFill,position:"absolute",top:"100%",left:0,right:0,zIndex:s.I_.foreground,boxShadow:r.shadows.box,...t?{paddingBottom:"8px"}:{},..."mini"===i?{borderRadius:r.borders.inputBorderRadiusMini,marginTop:r.sizing.scale300}:{}}})),I=e=>{let t=null,r=!1;return e.isOpen&&(e.showTryAgainMessage?t=[(0,m.tZ)(k,{getItemProps:e.getItemProps},"try-again-message")]:(t=e.locations.map(((t,r)=>"isTaggedLocation"in t&&t.isTaggedLocation?(0,m.tZ)(C,{index:r,taggedLocation:t,getItemProps:e.getItemProps,highlightedIndex:e.highlightedIndex,size:e.size},r):"isTaggedLocation"in t?void 0:(0,m.tZ)(_,{index:r,location:t,getItemProps:e.getItemProps,highlightedIndex:e.highlightedIndex,size:e.size},r))),r=e.locations.length>0),e.addLocationRequestItem&&(t=[(0,m.tZ)(z,{size:e.size},"location-request"),...t])),(0,m.tZ)(T,{...e.getMenuProps(),$hasResults:r,$size:e.size,"data-testid":"location-typeahead-results",children:t})}},639:(e,t,r)=>{r.d(t,{Z:()=>g});var i=r(14016),a=r(91931),o=r(6573),n=r(33535),s=r(48402),l=r(69404),d=r(54669),c=r(94579),u=r(68568),h=r(59924);const p=(0,a.zo)("label",c.E2),g=e=>{const t=(0,n.ZP)(),r=(0,d.Z)(),a=(0,i.T)(),{query:c,placeholder:g,locations:m,isLoading:Z,highlightedIndex:y,isOpen:v,showTryAgainMessage:f,openMenu:x,reset:b,getItemProps:S,getMenuProps:$,getInputProps:_,getLabelProps:C}=(0,u.Z)({onLocationSelected:e.onLocationSelected,initialQuery:e.initialQuery,id:e.id,initialIsClosed:!0});return(0,h.tZ)(l.Z,{"data-testid":"location-typeahead-wrapper",children:(0,h.BX)("div",{ref:e.registerRef,children:[(0,h.tZ)(p,{...C(),children:a("shared.combobox.a11y_instructions")}),(0,h.tZ)(s.Z,{query:c,getInputProps:_,reset:b,placeholder:g,isLoading:Z,iconType:"Pin",backgroundColor:"inputFill",onFocus:()=>{x(),t("eats:enter_delivery_address_start",{address:r?.address.address1,latitude:r?.latitude,longitude:r?.longitude})},size:e.size,highlightFocus:e.highlightFocus}),(0,h.tZ)(o.Z,{locations:m.data||[],getMenuProps:$,getItemProps:S,highlightedIndex:y,showTryAgainMessage:f,isOpen:v,size:e.size})]})})}},32267:(e,t,r)=>{r.d(t,{Z:()=>f});var i=r(74369),a=r(53308),o=r(94813),n=r(44692),s=r(47986),l=r(69086),d=r(78034),c=r(33535),u=r(54669),h=r(65717),p=r(7819),g=r(41878),m=r(25862),Z=r(65014),y=r(73472);var v=r(59924);const f=e=>{const{searchHomeResults:t=[],sections:r=[],verticalList:f,selectedVertical:x}=e,b=(0,o.TH)(),S=(0,a.I0)(),$=(0,c.ZP)(),_=(0,u.Z)(),{startTiming:C}=(0,y.K3)(),z=(0,h.Z)(),{vertical:w,userQuery:k}=(0,s.RAN)(b,["vertical","userQuery"]),T=JSON.stringify(f.map((e=>e.verticalType))),I=(e,r)=>({itemPosition:r,title:e.titleTerm,type:e.type,sectionItemsCount:t.length-1,sectionPosition:0,sectionTitle:e.type});i.useEffect((()=>{S((0,d.Vw)(f))}),[S,f]);const E=(t,r)=>{C(Z.B.SEARCH_FEED_LOAD_EVENT_NAME),"topCategory"===t?.type?$("eats:search_category",{searchTerm:t?.title,vertical:x}):$("eats:search_term",{searchTerm:t?.title,eventSource:t?.type||"",vertical:x}),$("eats:search_end",{userQuery:t?.title,page:b.pathname,hasDeliveryLocation:Boolean(_),eventSource:t?.type||"",searchType:"suggestion",mvsMeta:{verticalList:f.map((e=>e.verticalType)).join(","),selectedVertical:x}}),e.onItemClick&&e.onItemClick(t,r)};return(0,m.Z)(Z.B.SEARCH_HOME_LOAD_EVENT_NAME),(0,v.tZ)(v.HY,{children:t.map(((e,i)=>{const a=i<t.length-1,o=(0,g.aJ)(e,b,_,z,x),s=`${e.title}-${i}`,d=(e=>{switch(e){case"popularCategory":case"topCategory":case"category":return"CATEGORY";case"textV2":case"text":return"TEXT";case"searchTextV2":case"searchText":return"SEARCH_TEXT";case"store":return"STORE";case"searchHistoryV2":case"searchHistory":return"SEARCH_HISTORY";case"sectionTitle":return"SECTION_TITLE";case"verticalText":return"VERTICAL_TEXT";default:return"UNKNOWN"}})(e.type),c={postion:i,searchTerm:e.title,suggestionType:d,multiVerticalPayload:{verticalList:T,verticalListV2:T,selectedVertical:w,selectedVerticalV2:w,type:"TAB",surface:k?.trim()?"SEARCH_SUGGESTIONS":"ZERO_STATE",searchTermText:e.title}};switch(e.type){case"sectionTitle":return(0,v.tZ)(n.L1,{title:e.title,analyticsPayload:c},s);case"searchHistory":case"searchHistoryV2":return(0,v.tZ)(n.rG,{onClick:()=>{E(t[i],i)},item:{title:e.title||"",url:o,iconType:n.d.CLOCK,eventData:r.length?I(e,i):void 0},hasBorder:a,analyticsPayload:c},s);case"popularCategory":case"topCategory":return(0,v.tZ)(n.rG,{onClick:()=>{E(t[i],i)},item:{title:e.title||"",url:o,iconType:n.d.CATEGORY,iconUrl:e.iconUrl},hasBorder:a,analyticsPayload:c},s);case"searchText":return(0,v.tZ)(n.rG,{onClick:()=>{E(t[i],i)},item:{title:e.title,iconType:n.d.SEARCH,url:o},hasBorder:a,analyticsPayload:c},s);case"store":return(0,v.tZ)(v.HY,{children:e.store?(0,v.tZ)(l.Z,{store:e.store,hasBorder:a,url:(0,p.C)(e.store,z,b),analyticsPayload:c},s):null});default:return null}}))})}},66740:(e,t,r)=>{r.d(t,{Z:()=>y});var i=r(74369),a=r(91931),o=r(97415),n=r(67206),s=r(94579),l=r(59924);const d=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{...(0,n.Z)({$theme:t}),backgroundSize:"100vw 100%",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:s.I_.background}})),c=(0,a.zo)("div",{display:"flex",flex:1}),u=(0,a.zo)("div",{position:"relative",display:"flex"}),h=(0,a.zo)("div",{flex:"none",display:"flex",flexDirection:"column",justifySectionWrapper:"center",alignItems:"center"}),p=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{width:"40px",height:"40px",background:`radial-gradient(transparent 20px, ${t.colors.backgroundPrimary} 20px)`}})),g=(0,a.zo)("div",{display:"flex",flexDirection:"column",flex:1}),m=e=>{let{titleWidth:t}=e;return(0,l.BX)(c,{children:[(0,l.BX)(h,{children:[(0,l.tZ)(o.CB,{$height:"10px",$width:"40px"}),(0,l.tZ)(p,{}),(0,l.tZ)(o.CB,{$height:"10px",$width:"40px"})]}),(0,l.tZ)(o.CB,{$width:"12px"}),(0,l.BX)(g,{children:[(0,l.tZ)(o.CB,{$width:"100%",$grow:!0}),(0,l.tZ)(o.gD,{width:`${t}%`,height:"24px"}),(0,l.tZ)(o.CB,{$width:"100%",$grow:!0})]})]})},Z=e=>{let{itemWidths:t}=e;return(0,l.BX)(g,{children:[(0,l.BX)(g,{children:[(0,l.tZ)(o.CB,{$width:"100%",$height:"16px"}),(0,l.tZ)(o.gD,{width:"40%",height:"30px"}),(0,l.tZ)(o.CB,{$width:"100%",$height:"12px"})]}),(0,l.tZ)(g,{children:t.map(((e,t)=>(0,l.tZ)(m,{titleWidth:e},t)))})]})},y=e=>{const[t]=(0,i.useState)(e.itemNumbers.map((e=>(e=>[...Array(e)].map((()=>Math.floor(50*Math.random())+30)))(e))));return(0,l.BX)(u,{children:[(0,l.tZ)(d,{}),(0,l.tZ)(g,{children:t.map(((e,t)=>(0,l.tZ)(Z,{itemWidths:e},t)))})]})}},69086:(e,t,r)=>{r.d(t,{Z:()=>b});var i=r(60222),a=r.n(i),o=r(91931),n=r(36278),s=r(31913),l=r(6479),d=r(39957),c=r(79857),u=r(2139),h=r(85191),p=r(91377),g=r(59924);const m=(0,o.zo)(d.Z,(e=>{let{$isGrayedOut:t}=e;return{display:"flex",width:"100%",alignItems:"center",opacity:t?.6:void 0}})),Z=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{width:t.sizing.scale950,display:"flex",justifyContent:"center",alignItems:"center"}})),y=(0,o.zo)("div",(e=>{let{$theme:t,$src:r}=e;return{borderRadius:"50%",width:t.sizing.scale950,height:t.sizing.scale950,backgroundImage:`url(${a()(r)})`,backgroundSize:"cover"}})),v=(0,o.zo)("div",(e=>{let{$theme:t,$hasBorder:r}=e;return{padding:`${t.sizing.scale600} 0`,width:"100%",boxSizing:"border-box",...r?{borderBottom:`${t.sizing.scale0} solid ${t.colors.borderOpaque}`}:{}}})),f=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium}})),x=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall}})),b=e=>{const{url:t,hasBorder:r,onClick:i,store:a,position:o,analyticsPayload:d={}}=e,{categories:b=[],title:S="",heroImageUrl:$="",meta1:_,isOrderable:C,storeAd:z}=a||{},w=(0,c.Z)(),k=(0,u.Z)(),T=w&&!k,{adsViewableImpressionRef:I}=(0,l.Z)({storeAd:z,adAttributes:{rank:o},shouldLogImpression:!0}),E=(0,h.t)({impressionEventName:"eats_search_zero_state_item_impression",payload:d});return(0,g.BX)(m,{suggestionAction:t,$isGrayedOut:!1===C,onClick:i,shouldReplaceOnNavigate:T,ref:(0,p.Z)(I,E),children:[(0,g.tZ)(Z,{children:$?(0,g.tZ)(y,{$src:$,title:S,"aria-hidden":!0}):null}),(0,g.tZ)(n.IQ,{}),(0,g.BX)(v,{$hasBorder:r,children:[(0,g.tZ)(f,{children:S}),_?(0,g.tZ)(s.ZP,{text:_}):(0,g.tZ)(x,{children:b.join(" • ")})]})]})}},44692:(e,t,r)=>{r.d(t,{L1:()=>_,d:()=>y,rG:()=>$});var i=r("__fusion__476"),a=r(91931),o=r(78422),n=r(36278),s=r(16108),l=r(39957),d=r(60222),c=r.n(d),u=r(81702),h=r(79857),p=r(2139),g=r(85191),m=r(91377),Z=r(59924);const y={SEARCH:"search",CLOCK:"clock",CATEGORY:"category"},v=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentTertiary,margin:"12px 0 8px 0"}})),f=(0,a.zo)(l.Z,(e=>{let{$theme:t}=e;return{display:"flex",width:"100%",height:"64px",alignItems:"center"}})),x=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexGrow:0,flexShrink:0,boxSizing:"border-box",justifyContent:"center",alignItems:"center",width:"36px",height:"36px",borderRadius:"50%",color:t.colors.contentTertiary}})),b=(0,a.zo)("div",(e=>{let{$theme:t,$hasBorder:r}=e;return{...t.typography.LabelMedium,display:"flex",alignItems:"center",justifyContent:"space-between",flexGrow:1,height:"100%",overflow:"hidden",boxSizing:"border-box",...r?{borderBottom:`${t.sizing.scale0} solid ${t.colors.borderOpaque}`}:{}}})),S=(0,a.zo)("div",(e=>({borderRadius:"50%",width:"40px",height:"40px",backgroundImage:`url(${c()(e.$src)})`,backgroundSize:"cover"}))),$=e=>{let{item:t,hasBorder:r,onClick:a,analyticsPayload:l={}}=e;const{iconType:d,title:c,url:v,iconUrl:$}=t,[_,C]=(0,s.T)({root:null}),{trackSearchHomeItemClick:z,trackSearchHomeItemView:w}=(0,u.Z)(),k=(0,h.Z)(),T=(0,p.Z)(),I=(k||T)&&"link"===v.type,E=(0,g.t)({impressionEventName:"eats_search_zero_state_item_impression",payload:l});return i.useEffect((()=>{t.eventData&&C&&C.isIntersecting&&w(t.eventData)}),[C]),(0,Z.BX)(f,{suggestionAction:v,ref:(0,m.Z)(_,E),onClick:()=>{t.eventData&&z(t.eventData),a&&a(c)},shouldReplaceOnNavigate:I,children:[(0,Z.tZ)(x,{children:d===y.CLOCK?(0,Z.tZ)(o.Z,{name:"ClockOutlined",size:16}):d===y.SEARCH?(0,Z.tZ)(o.Z,{name:"SearchOutlined",size:18}):d===y.CATEGORY&&$?(0,Z.tZ)(S,{$src:$,title:c,"aria-hidden":!0}):null}),(0,Z.tZ)(n.IQ,{}),(0,Z.tZ)(b,{$hasBorder:r,children:c})]})},_=e=>{let{title:t,analyticsPayload:r={}}=e;const i=(0,g.t)({impressionEventName:"eats_search_zero_state_item_impression",payload:r});return(0,Z.tZ)(v,{ref:i,children:t})}},28700:(e,t,r)=>{r.d(t,{Z:()=>f});var i=r("__fusion__476"),a=r(44692),o=r(91931),n=r(33535),s=r(69086),l=r(73472),d=r(65014),c=r(37933),u=r(16797),h=r(47986),p=r(94813),g=r(92060),m=r(59924);const Z=(0,o.zo)("ul",(e=>{let{$theme:t}=e;return{width:"100%"}})),y=(0,o.zo)("li",(e=>({backgroundColor:"transparent",cursor:"pointer",display:"flex",alignItems:"center",outline:"none",...e.$showBackground?{":hover":{background:e.$theme.colors.menuFillHover}}:{},transition:"opacity .45s .5s,visibility .45s .5s,transform .45s ease .3s",transform:"translateY(0)",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}))),v=(e,t,r,i,o,n)=>{switch(e.type){case"sectionTitle":return(0,m.tZ)(a.L1,{title:e.title},o);case"text":case"textV2":case"searchText":case"searchTextV2":return(0,m.tZ)(a.rG,{item:{title:i,iconType:a.d.SEARCH,url:r},hasBorder:t});case"searchHistory":case"searchHistoryV2":return(0,m.tZ)(a.rG,{item:{title:i,iconType:a.d.CLOCK,eventData:void 0,url:r},hasBorder:t},o);case"store":case"croStore":return(0,m.tZ)(s.Z,{store:e.store,hasBorder:t,url:r,position:o,onClick:n});case"popularCategory":return(0,m.tZ)(a.rG,{item:{title:i,url:r,iconType:a.d.CATEGORY},hasBorder:t},o);default:return null}},f=e=>{const{stopTiming:t}=(0,l.K3)(),r=(0,p.TH)(),{vertical:a}=(0,h.RAN)(r,["vertical"]),o=(0,c.n_)(),s=(0,n.ZP)();return i.useEffect((()=>{e.suggestions.length>0&&t(d.B.SEARCH_SUGGESTION_LOAD_EVENT_NAME,{shouldEmitTiming:!0})}),[e.suggestions,t]),(0,m.tZ)(Z,{...e.getMenuProps(),"data-testid":"search-suggestions-list",children:e.suggestions.map(((t,r)=>{const i=r<e.suggestions.length-1,n=e.getSuggestionAction(t),l=t.title||"";return(0,m.tZ)(y,{...e.getItemProps({index:r,disabled:"sectionTitle"===t.type}),onClick:()=>{"text"===t.type?s("eats:search_auto_suggest_selected",{searchEntered:e.query,searchTerm:t.title,vertical:a||g.g,position:String(r??-1)}):"searchText"===t.type&&s("eats:search_term_by_keyboard",{searchTerm:t.title,vertical:a||g.g}),e.onItemClick&&e.onItemClick(t,r)},$showBackground:"sectionTitle"!==t.type,children:v(t,i,n,l,r,(()=>{if(t.store?.storeAd){const e=t.store.storeAd;o("ads:ads_click",{adsAnalyticsEvent:{adEventType:u.J.CLICK,adImpressionUUID:e.impressionId??"",adData:e.adData??"",rank:r}})}}))},r)}))})}},39957:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(74369),a=r(17222),o=r(59924);const n=i.forwardRef((function(e,t){let{suggestionAction:r,shouldReplaceOnNavigate:i,onClick:n,children:s,...l}=e;return"link"===r.type?(0,o.tZ)(a.rU,{...l,...i?{replace:!0}:null,to:r.to,onClick:n,ref:t,children:s}):"anchor"===r.type?(0,o.tZ)("a",{...l,href:r.href,onClick:n,ref:t,children:s}):(0,o.tZ)("a",{...l,onClick:e=>{e.preventDefault(),n&&n(e)},ref:t,children:s})}))},48402:(e,t,r)=>{r.d(t,{Z:()=>f});var i=r(74369),a=r(14016),o=r(46933),n=r(91931),s=r(79908),l=r(14770),d=r(62851),c=r(36278),u=r(79168),h=r(59924);const p=(0,n.w1)(d.U,(e=>({display:"flex",padding:"8px 16px",position:"relative",...e.$backgroundColor?{backgroundColor:e.$theme.colors[e.$backgroundColor]}:{},...e.$isFocused?{boxShadow:e.$theme.shadows.focusedInput}:{},...e.$height?{height:`${e.$height}px`}:{},...e.$borderRadius?{borderRadius:e.$borderRadius}:{}}))),g=(0,n.zo)("div",(e=>{let{$shouldAnimatePin:t}=e;return{padding:"8px 0",display:"flex",flexShrink:0,alignItems:"center",...t?{animationDuration:"3s",animationDelay:"2s",animationIterationCount:"infinite",animationName:{"0%":{transform:"rotateY(0deg)"},"20%":{transform:"rotateY(360deg)"},"100%":{transform:"rotateY(360deg)"}}}:{}}})),m=(0,n.zo)("input",(e=>({flex:1,backgroundColor:e.$backgroundColor?e.$theme.colors[e.$backgroundColor]:e.$theme.colors.inputFill,...e.$width?{width:`${e.$width}px`}:{},appearance:"none",fontSize:e.$fontSize,outline:"none","::placeholder":{..."mini"===e.$size?e.$theme.typography.LabelSmall:e.$theme.typography.LabelMedium,color:e.$theme.colors.contentTertiary}}))),Z=(0,n.zo)("button",(e=>{let{$theme:t,$size:r}=e;return{..."mini"===r?t.typography.LabelXSmall:t.typography.LabelSmall,color:t.colors.contentTertiary,cursor:"pointer"}})),y=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{width:"1px",margin:"0 16px",backgroundColor:t.colors.borderOpaque}})),v=(0,n.zo)(l.Z,{cursor:"pointer"}),f=e=>{const[t,r]=(0,n.hQ)(),l=(0,a.T)(),[d,f]=i.useState(!1),x=i.useRef(null),{value:b,...S}=e.getInputProps({onFocus:()=>{e.onFocus&&e.onFocus(),f(!0)},onBlur:()=>f(!1),ref:x}),{fontSize:$,height:_}=(0,u.Z)(e.size);return(0,h.BX)(p,{$backgroundColor:e.backgroundColor,$isFocused:d&&(e.highlightFocus??!0),$height:e.size?parseInt(_,10):e.height,$borderRadius:"mini"===e.size||"rounded"===e.borderStyle?r.borders.pillButtonBorderRadius:null,children:[(0,h.tZ)(g,{$shouldAnimatePin:e.shouldAnimatePin,children:(0,h.tZ)(s.Z,{type:e.isLoading?"Loading":e.iconType,ariaLabel:e.isLoading?l("loading"):void 0,..."mini"===e.size?{width:20,height:20}:{}})}),(0,h.tZ)(c.ZP,{$width:"mini"===e.size?"8px":"16px"}),(0,h.tZ)(m,{...S,value:b||"",type:"text",autoComplete:"off",name:"searchTerm",placeholder:e.placeholder,$backgroundColor:e.backgroundColor,$width:e.queryWidth,$fontSize:$,$size:e.size,"data-testid":e.dataTestid}),(0,h.tZ)(c.ZP,{$width:"8px"}),e.query.length>0?(0,h.tZ)(Z,{type:"button",onClick:()=>{e.reset(),x.current&&x.current.focus()},$size:e.size,children:(0,h.tZ)(o.v,{id:"shared.clear"})}):null,e.onClose&&e.query.length>0?(0,h.tZ)(y,{}):null,e.onClose?(0,h.tZ)(v,{onClick:e.onClose}):null]})}},69404:(e,t,r)=>{r.d(t,{Z:()=>i});const i=(0,r(91931).zo)("div",{flexDirection:"column",position:"relative",flex:1})},70471:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(54669);function a(){return"apple_maps_store_inherit"===(0,i.Z)()?.originType}},11849:(e,t,r)=>{r.d(t,{Z:()=>Z});var i=r(12517),a=r(31913),o=r(48700),n=r(74334),s=r(8639);const l={[n.Ou.PILL]:o.X3.pill,[n.Ou.RECTANGLE]:o.X3.rectangle};const d={[n.fi.PRIMARY]:o.T5.primary,[n.fi.SECONDARY]:o.T5.secondary};const c={[n.vZ.POSITIVE]:o.r$.positive,[n.vZ.ACCENT]:o.r$.accent,[n.vZ.NEGATIVE]:o.r$.negative,[n.vZ.WARNING]:o.r$.warning};var u=r(52200),h=r(36278),p=r(91931),g=r(91483),m=r(59924);function Z(e){let{viewModel:t}=e;const{content:r,hierarchy:n,color:Z,shape:y,accessibilityText:v}=t,[f,x]=(0,p.hQ)(),b=function(e){return e&&l[e]||o.X3.rectangle}(y),S=function(e){return e&&d[e]||o.T5.primary}(n);let $=null;"standard"===Z?.type&&($=Z.standard);const _=function(e){return e&&c[e]||o.r$.accent}($),C={Badge:{style:{...function(e,t){let r={};if("custom"===e?.type){const i=e&&"custom"in e?e.custom:null,a=(0,s.Lq)(i?.contentColor),o=(0,s.Lq)(i?.backgroundColor);r={color:t?.colors[`${a}`],backgroundColor:t?.colors[`${o}`]}}return r}(Z,x),maxWidth:"100%",width:"fit-content"}}};let z=null;switch(r.type){case"richText":{const e=(0,g._M)(r.richText),t=(0,s.Lq)(e);z=(0,m.tZ)("span",{className:f({maxWidth:"100%",textOverflow:"ellipsis",overflow:"hidden",...t?{color:x.colors[t]}:null}),children:(0,m.tZ)(a.ZP,{text:r.richText,whiteSpace:"nowrap"})});break}case"standard":{const e=r.standard.iconContent?.icon?{richIllustration:{illustration:{type:"icon",icon:{icon:r.standard.iconContent.icon,dimensions:{width:{type:"pointValue",pointValue:12},height:{type:"pointValue",pointValue:12}}}},accessibilityText:r.standard.iconContent?.accessibilityText||""}}:{richIllustration:null};z=(0,m.BX)(m.HY,{children:["LEADING"===r.standard.iconContent?.iconLayout?(0,m.BX)(m.HY,{children:[(0,m.tZ)(u.SZ,{...e}),(0,m.tZ)(h.Q3,{})]}):null,r.standard.title,"TRAILING"===r.standard.iconContent?.iconLayout?(0,m.BX)(m.HY,{children:[(0,m.tZ)(h.Q3,{}),(0,m.tZ)(u.SZ,{...e})]}):null]});break}default:return null}return(0,m.tZ)(i.Ct,{color:_,shape:b,hierarchy:S,content:z,overrides:C,...v?{"aria-label":v}:{}})}},31248:(e,t,r)=>{r.d(t,{Z:()=>fe});var i=r(83960),a=r(8961),o=r("__fusion__476"),n=r(74369),s=r(46933),l=r(14016),d=r(71110),c=r(69420),u=r(94813),h=r(36278),p=r(97415),g=r(91931),m=r(76150),Z=r(31854),y=r(56348),v=r(34567),f=r(24316),x=r(33535),b=r(21661),S=r(94579),$=r(8690),_=r(67206),C=r(29194),z=r(63346),w=r(86255),k=r(32518),T=r(32562),I=r(70247),E=r(98942),L=r(38777),B=r(47986),P=r(34626),R=r(49373),O=r(79168),D=r(59924);const H=Math.round(555.5),A=(0,d.pZ)(r(44412)),M=(0,g.zo)("div",(e=>({display:"flex",transition:"max-width 400ms ease, opacity 400ms ease 100ms",maxWidth:e.$isVisible?"300px":0,opacity:e.$isVisible?1:0,position:"relative"}))),V=(0,g.zo)("div",(e=>{let{$theme:t,$isOverlapping:r,$isLoading:i}=e;return{...i?{...(0,_.Z)({$theme:t}),backgroundSize:"100vw 100%"}:{backgroundColor:t.colors.buttonPrimaryFill},display:"flex",flexDirection:"row",alignItems:"stretch",cursor:"pointer",height:"48px",borderRadius:t.borders.pillButtonBorderRadius,overflow:"hidden",boxShadow:r?t.shadows.filterCard:"none",margin:r?"24px 16px":0,...t.typography.LabelMedium,whiteSpace:"nowrap"}})),N={display:"flex",flexDirection:"row",alignItems:"center"},U=(0,g.zo)("div",N),X=(0,g.zo)("div",(e=>{let{$theme:t,$direction:r}=e;return{width:"24px",height:"48px",background:`radial-gradient(circle at ${"ltr"===r?"100%":"0%"}, transparent 24px, ${t.colors.backgroundPrimary} 24px)`}})),F=(0,g.zo)("div",(e=>{let{$theme:t,$direction:r}=e;return{width:"24px",height:"48px",background:`radial-gradient(circle at ${"ltr"===r?"0%":"100%"}, transparent 24px, ${t.colors.backgroundPrimary} 24px)`}})),G=(0,g.zo)("button",(e=>{let{$theme:t,$isDualButtons:r}=e;return{...N,padding:r?"14px 16px 14px 12px":"8px 16px",...(0,v.x)({$theme:t})}})),Y=(0,g.zo)("button",(e=>{let{$theme:t,$isDualButtons:r,$isLoggedIn:i}=e;return{...N,padding:i?r?"14px 12px 14px 8px":"8px 16px 8px 8px":"8px 12px",...(0,v.x)({$theme:t})}})),Q=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{height:"32px",width:"32px",flexShrink:0,borderRadius:t.borders.radiusFull,overflow:"hidden",position:"relative"}})),q=(0,g.zo)("img",{height:"32px",width:"32px",objectFit:"cover",flexShrink:0}),W=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{width:"1.5px",margin:"12px 0",background:t.colors.contentSecondary}})),j=(0,g.zo)("div",(e=>{let{$theme:t,$isOverlapping:r}=e;return{background:t.colors.menuFill,color:t.colors.contentPrimary,boxShadow:"0px 4px 16px rgba(0, 0, 0, 0.12)",marginTop:"8px",top:r?"64px":t.sizing.scale1000,right:"0",position:"absolute",width:"420px",borderRadius:"16px",maxHeight:`${H}px`,overflow:"auto",zIndex:S.I_.modal}})),K=(0,g.zo)("div",(e=>{let{$theme:t,$isHovering:r}=e;return{borderRadius:"50%",width:t.sizing.scale950,height:t.sizing.scale950,position:"absolute",left:`-${t.sizing.scale0}`,...r?{backgroundColor:t.colors.buttonPrimaryHover}:{backgroundColor:t.colors.buttonPrimaryFill}}})),J=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",position:"relative",width:t.sizing.scale1400}})),ee=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{position:"absolute",left:t.sizing.scale750}})),te=(0,g.zo)("div",{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),re=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelSmall,position:"absolute",width:t.sizing.scale950,height:t.sizing.scale950,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",backgroundColor:"rgba(0, 0, 0, 0.5)"}})),ie=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{marginLeft:t.sizing.scale300,whiteSpace:"nowrap"}})),ae=e=>e.storeImage?.length>1?(0,D.BX)(J,{children:[(0,D.tZ)("div",{children:(0,D.tZ)(Q,{children:(0,D.tZ)(q,{src:e.storeImage[0],alt:"store"})})}),(0,D.tZ)(ee,{children:(0,D.BX)(te,{children:[(0,D.tZ)(K,{$isHovering:e.isHovering}),(0,D.tZ)(Q,{children:(0,D.tZ)(q,{src:e.storeImage[1],alt:"store"})}),e.storeImage.length>2?(0,D.BX)(re,{children:["+",e.storeImage.length-1]}):null]})})]}):(0,D.tZ)(Q,{children:(0,D.tZ)(q,{src:e.storeImage[0],alt:"store"})}),oe=e=>1===e.totalOrders?(0,D.tZ)(s.v,{id:"shared.numCartsSingular",data:{numCarts:e.totalOrders}}):(0,D.tZ)(s.v,{id:"shared.numCarts",data:{numCarts:e.totalOrders}}),ne=e=>1===e.numCartItems?(0,D.tZ)(s.v,{id:"shared.numCartItemsSingular",data:{numCartItems:e.numCartItems}}):(0,D.tZ)(s.v,{id:"shared.numCartItems",data:{numCartItems:e.numCartItems}}),se=()=>{const{serverCart:e}=(0,I.iQ)(),t=e.data?.items||[],r=(0,R.dH)(t);return(0,D.BX)(D.HY,{children:[(0,D.tZ)(Z.Z,{size:16}),(0,D.BX)(ie,{children:[(0,D.tZ)(s.v,{id:"shared.cart"})," • ",r]})]})},le=e=>{let{isOverlapping:t,floatingMenuOpen:r,handleFloatingMenuOpen:a,size:s}=e;const{toggleSidebarCartVisible:d,headerCartDropdownVisible:g,setHeaderCartDropdownVisible:v}=(0,m.Lb)(),{totalOrders:S,cartViews:_,activeDraftOrderUUID:R,currentStoreDraftOrderUUID:H,draftOrders:N,draftOrderUUIDs:Q,setActiveDraftOrder:q,cartsViewIsLoading:K}=(0,f.Z)(),{isDelegatedBooking:J}=(0,L.W)(),{bundleGroupUUID:ee,isBundledOrder:te}=(0,I.Dz)(),re=(0,x.ZP)(),ie=(0,l.T)(),{toggleIsDropdownOpen:le,dropdownRef:de,isDropdownOpen:ce,onCartSelect:ue}=(0,b.Z)({isDropdownOpen:r??g,setIsDropdownOpen:a??v}),he=(0,c.UO)(),pe=(0,w.Z)({encodedStoreUuid:he?.encodedStoreUuid}),{isEditOrder:ge,currentUserItemCount:me,isRepeatGroupOrder:Ze}=(0,i.Z)(pe),ye=Boolean(H),ve=(0,C.gm)(),fe=(0,E.qM)(),{user:xe}=(0,P.Z)(),{isRepeatOrderCartView:be}=(0,$.Z)(),Se=(0,u.TH)(),{cartOpen:$e}=(0,B.RAN)(Se,["cartOpen"]),_e=o.useCallback((()=>{if(0===S||J)d();else if(1!==S||be(_[0])||(0,k.ed)(_[0]))le();else{const e=_[0]?.metadata?.openCheckoutMetadata,t=e?.draftOrderUUID??e?.bundleGroupMetadata?.primaryDraftOrderUUID??Q[0];q(t),d()}re("eats:cart_cta_click",{isMulticart:"true"})}),[S,J,be,_,re,d,Q,q,le]),Ce=ee||H||R,ze=(0,n.useMemo)((()=>_.find((e=>e.draftOrderUUID===Ce||e.metadata?.openCheckoutMetadata?.bundleGroupMetadata?.bundleGroupUUID===Ce))),[_,Ce]),we=o.useRef(null),ke=(0,T.Z)(we),Te=(()=>{const e=[A,A],t=[A];return K&&te?e:K&&!te?t:ze?.storeImageUrls&&ze?.storeImageUrls?.length>0?ze.storeImageUrls:te&&!K?e:t})(),Ie=S>1||ye&&Ze,Ee=Boolean(ye&&Ie),Le=te?fe:me;o.useEffect((()=>{re("eats:multicart_cart_pill",{...te?{storePreCheckoutBundling:{sourceType:"BUNDLED_STORE"}}:null})}),[re,te]),o.useEffect((()=>{$e&&N.hasLoaded&&("single"===$e?d():_e())}),[N.hasLoaded]);const Be=(0,O.Z)(s);return(0,D.BX)(M,{ref:de,$isVisible:!0,children:[(0,D.tZ)(h.ZP,{$width:"24px"}),(0,D.tZ)(V,{$isOverlapping:t,$isLoading:!N.hasLoaded,$style:Be,children:N.hasLoaded?(0,D.BX)(D.HY,{children:[ye||ge?(0,D.tZ)(Y,{ref:we,"data-test":"items-button",$isDualButtons:Ee,$isLoggedIn:Boolean(xe.data?.isLoggedIn),type:"button",onClick:()=>{q(H||""),d(),re("eats:cart_cta_click",{isMulticart:"true",...te?{storePreCheckoutBundling:{sourceType:"BUNDLED_STORE"}}:null})},children:xe.data?.isLoggedIn?(0,D.BX)(D.HY,{children:[(0,D.tZ)(ae,{storeImage:Te,isHovering:ke}),(0,D.tZ)(h.ZP,{$width:"8px"}),(0,D.tZ)(ne,{numCartItems:Le})]}):(0,D.tZ)(se,{})}):null,ye&&!Ie||ge?null:(0,D.BX)(D.HY,{children:[Ee?(0,D.tZ)(W,{}):null,(0,D.tZ)(G,{"data-test":"cart-btn",$isDualButtons:Ee,"aria-label":ie("multicart.carts"),type:"button",onClick:_e,children:xe.data?.isLoggedIn?(0,D.BX)(D.HY,{children:[(0,D.tZ)(Z.Z,{size:20}),(0,D.tZ)(h.ZP,{$width:"8px"}),ye?null:(0,D.tZ)(oe,{totalOrders:S}),Ie?(0,D.BX)(D.HY,{children:[ye?null:(0,D.tZ)(h.ZP,{$width:"8px"}),(0,D.tZ)(y.Z,{size:12})]}):null]}):(0,D.tZ)(se,{})}),ce?(0,D.tZ)(j,{$isOverlapping:t,children:(0,D.tZ)(z.Z,{onCartSelect:(e,t)=>{ue(e,t),d()},isMobile:!1})}):null]})]}):(0,D.BX)(U,{children:[(0,D.tZ)(X,{$direction:ve}),(0,D.tZ)(p.CB,{$width:"80px"}),(0,D.tZ)(F,{$direction:ve})]})})]})};var de=r(57444),ce=r(58814);const ue=e=>{let{$theme:t,disabled:r}=e;return{color:t.colors.onlineOrderingSecondaryInverseText,background:t.colors.onlineOrderingSecondaryInverse,...r?(0,de.Z)(t):{":hover":{background:t.colors.onlineOrderingSecondaryInverseHover},":active":{background:t.colors.onlineOrderingSecondaryInverseActive},...(0,ce.Z)(t)}}};var he=r(69630),pe=r(28222),ge=r(60306);const me=(0,g.zo)("div",(e=>({display:"flex",transition:"max-width 400ms ease, opacity 400ms ease 100ms",maxWidth:e.$isVisible?"300px":0,opacity:e.$isVisible?1:0,overflow:"hidden",position:"relative"}))),Ze=(0,g.zo)("button",(e=>{let{$theme:t,$isOverlapping:r,$isOnlineOrdering:i}=e;return{display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer",padding:"8px 12px",height:S.GC,borderRadius:t.borders.pillButtonBorderRadius,boxShadow:r?t.shadows.filterCard:"none",margin:r?"24px 16px":0,...i?ue({$theme:t}):(0,v.x)({$theme:t}),...t.typography.LabelSmall}})),ye=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{marginLeft:t.sizing.scale300,whiteSpace:"nowrap"}})),ve=e=>{let{isOverlapping:t}=e;const r=(0,a.Z)(),{serverCart:o}=(0,I.iQ)(),{toggleSidebarCartVisible:n}=(0,m.Lb)(),l=o.data?.items||[],d=(0,R.dH)(l),{isDraftOrderParticipant:c,isBillSplitOrder:u}=(0,i.Z)(),p=(0,he.Z)(),g=(0,x.ZP)(),y=(0,ge.Z)(),v=(0,pe.Z)();return r&&(!c||p||y&&u)?(0,D.BX)(me,{$isVisible:!0,children:[(0,D.tZ)(h.ZP,{$width:"24px"}),(0,D.BX)(Ze,{"data-test":"cart-btn",$isOverlapping:t,type:"button","aria-label":"checkout",onClick:()=>{n(),g("eats:cart_cta_click")},$isOnlineOrdering:v,children:[(0,D.tZ)(Z.Z,{size:16}),(0,D.BX)(ye,{children:[(0,D.tZ)(s.v,{id:"shared.cart"})," • ",d]})]})]}):null},fe=e=>{let{isOverlapping:t=!1,floatingMenuOpen:r,handleFloatingMenuOpen:o,size:n}=e;const s=(0,a.Z)(),l=(0,he.Z)(),{isDraftOrderParticipant:d,isBillSplitOrder:c}=(0,i.Z)(),u=(0,ge.Z)();return(s||l)&&(!d||l||u&&c)?l?(0,D.tZ)(le,{isOverlapping:t,floatingMenuOpen:r,handleFloatingMenuOpen:o,size:n}):(0,D.tZ)(ve,{isOverlapping:t}):null}},97420:(e,t,r)=>{r.d(t,{Z:()=>Ie});var i=r(75514),a=r(74369),o=r(17222),n=r(69420),s=r(44369),l=r(46933),d=r(91931),c=r(76150),u=r(83960),h=r(50262),p=r(3737),g=r(33841),m=r(52298),Z=r(83395),y=r(94579),v=r(81549),f=r(6966),x=r(74419),b=r(47986),S=r(7646),$=r(36278),_=r(79908),C=r(33535),z=r(69630),w=r(10825),k=r(64388),T=r(59924);const I=(0,d.w1)(S.Bi,{padding:"0px 12px 0 8px"}),E=(0,d.zo)("div",(e=>{let{$theme:t}=e;return t.typography.LabelSmall})),L=e=>{const t=(0,z.Z)(),r=(0,C.ZP)(),i=(0,w.Z)(),{deliveryAddress:a,deliveryTime:n,diningMode:s,storeUuid:d}=(0,u.Z)(),{getStore:c}=(0,k.ZP)(d,{deliveryAddress:a,deliveryTime:n,diningMode:s}),{restaurantLink:h}=(0,Z.Z)({storeUuid:d});return h?(0,T.BX)(I,{"data-testid":"add-items-mini-button",$as:o.rU,to:h,onClick:()=>{t&&(i(),c()),r("eats:click_store_link",{source:e.source,...t?{activePreferenceType:"draft_order"}:{}}),e.onClick&&e.onClick()},children:[(0,T.tZ)(_.Z,{type:"PlusSmall"}),(0,T.tZ)($.Q3,{}),(0,T.tZ)(E,{children:(0,T.tZ)(l.v,{id:"shared.addItems"})})]}):null};var B=r(25400),P=r(70247),R=r(19496),O=r(55811),D=r(25750),H=r(31854);const A=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{padding:t.sizing.scale1600,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}})),M=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,marginTop:"16px",textAlign:"center"}})),V=()=>(0,T.BX)(A,{children:[(0,T.tZ)(H.Z,{size:44,color:"contentInverseTertiary"}),(0,T.tZ)(M,{children:(0,T.tZ)(l.v,{id:"shared.emptycartmessage"})})]});var N=r(79876),U=r(74365),X=r(37740),F=r(37573),G=r(35972),Y=r(90961),Q=r(86255),q=r(82133),W=r(60306),j=r(94813),K=r(72147),J=r(59210),ee=r(98470);const te=e=>{let{completionPercentage:t}=e;return(0,T.tZ)(ee.Z,{value:t,overrides:{Bar:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.white}}},BarProgress:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.positive}}},BarContainer:{style:e=>{let{$theme:t}=e;return{margin:"0px !important"}}}}})};var re=r(56965),ie=r(14016),ae=r(60849),oe=r(15649),ne=r(34626),se=r(27871),le=r(86977),de=r(30085);const ce="control",ue="treatment_1",he="treatment_2",pe={[ce]:ce,[ue]:"sticky_banner",[he]:"sticky_progress_bar"},ge=e=>{const t=(0,ae.F2)(),{hasActiveUberOne:r}=(0,ne.Z)(),i=e.currencyCode||"",{subtotal:o}=(0,se.ZP)(["subtotal"]).checkoutPayloads,n=(Number(o?.subtotal?.value?.amountE5)||0)/1e3,s=(0,oe.Z)(),l=(0,ie.T)(),d=Array.isArray(e.promoTrackings)&&e.promoTrackings.find((e=>"FLAT"===e?.discountInfo?.promoType))||null,c=Boolean(d),u=(0,C.ZP)();return(0,a.useMemo)((()=>{if(r||!c)return{treatmentValue:ce};const e=t.getString({...de.m.dynamic_promo_messaging,defaultValue:ce});if(u("eats:eats_web_cro_dynamic_promo_messaging_cart_inclusion",{param_name:de.m.dynamic_promo_messaging.key,param_value:e,variant:pe[e]}),![ue,he].includes(e))return{treatmentValue:ce};const a=d?(0,le.E)(d,i,n,s):null,o=d?.minBasketSizeConstraintInDecimal||0,h=o-n,p=(o-h)/o*100,g=Boolean(a&&a.key.includes("_EARNED")),m=a?g?l("checkout.promo.flat.earned",{x:a?.data.x}):l("checkout.promo.flat.unearned",{x:a?.data.x,y:a?.data.y}):"";return u("eats:eats_web_cro_dynamic_promo_messaging_cart_details",{param_name:de.m.dynamic_promo_messaging.key,param_value:e,variant:pe[e],amount:String(h),currencyCode:i}),{treatmentValue:e,hasValidPromo:c,promoGoalReached:g,promoProgress:p,calculatedPromo:m}}),[u,r,c,t,n,d,i,s,l])},me=(0,d.zo)("div",(e=>{let{$theme:t,$goalReached:r}=e;return{display:"flex",alignItems:"center",backgroundColor:r?t.colors.backgroundPositive:t.colors.backgroundPositiveLight,margin:`-${t.sizing.scale800} -${t.sizing.scale800} ${t.sizing.scale600} -${t.sizing.scale800}`,padding:`${t.sizing.scale500} ${t.sizing.scale800}`,gap:t.sizing.scale600,...t.borders.border300}})),Ze=(0,d.zo)(re.Z,(e=>{let{$theme:t,$goalReached:r}=e;return{...r?{fill:t.colors.contentOnColor}:{}}})),ye=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",width:"100%",flexGrow:1,gap:t.sizing.scale500}})),ve=e=>{let{store:t}=e;const{hasValidPromo:r,treatmentValue:i,calculatedPromo:a,promoProgress:o,promoGoalReached:n}=ge(t);return[ue,he].includes(i)&&r?(0,T.BX)(me,{$goalReached:n,children:[(0,T.tZ)(Ze,{$goalReached:n}),(0,T.BX)(ye,{children:[(0,T.tZ)(J.Uc,{color:n?"contentOnColor":"",children:a}),n||i!==he?null:(0,T.tZ)(te,{completionPercentage:o})]})]}):null};var fe=r(87444),xe=r(38777),be=r(80341);const Se=(0,d.zo)("div",(e=>{let{$theme:t,$isClosing:r}=e;return{position:"fixed",top:"62px",right:"82px",width:"432px",zIndex:y.I_.modal,background:t.colors.backgroundPrimary,boxShadow:t.shadows.box,transition:"opacity 500ms",opacity:r?0:1,color:t.colors.contentPrimary}})),$e=(0,d.zo)("div",{maxHeight:"calc(100vh - 150px)",overflowY:"scroll"}),_e=(0,d.zo)("div",{padding:"0 24px"}),Ce=(0,d.zo)("div",{paddingTop:"16px",display:"flex"}),ze=(0,d.zo)("div",(e=>e.$theme.typography.DisplayXSmall)),we=(0,d.zo)(o.rU,(e=>({...e.$theme.typography.ParagraphSmall,color:e.$theme.colors.contentSecondary}))),ke=(0,d.zo)("div",{display:"flex",alignItems:"center"}),Te=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,display:"inline"}})),Ie=()=>{const e=(0,j.TH)(),t=s.parse(e.search)[b.FSm.cartDisplay],[r,o]=(0,a.useState)(!1),{cartRef:d,sidebarCartVisible:y,sidebarCartClosing:S,openSidebarCart:_,closeSidebarCart:z,hideSidebarCart:w}=(0,c.Lb)({transitionMS:500}),{isDraftOrderCreator:I,isDraftOrderParticipant:E,hasGroupOrder:H,isDraftOrderCartLocked:A,isBillSplitOrder:M,orderDisplayName:J}=(0,u.Z)(),{title:ee,storeTitle:te,restaurantLink:re,restaurantLinkNode:ie}=(0,Z.Z)(),{elementRef:ae,isStuck:oe}=(0,f.Z)(),ne=(0,a.useRef)(null),{serverCart:se}=(0,P.iQ)(),le=se.data?.storeUuid,{store:de}=(0,k.ZP)(le),ce=(0,O.Z)(),ue=(0,j.UO)(),he=(0,Q.Z)({encodedStoreUuid:ue.encodedStoreUuid}),pe=(0,n.k6)(),ge=(0,Y.Z)(),me=Boolean(ge),Ze="postmates"===ce,ye=(0,C.ZP)(),{isDelegatedBooking:Ie}=(0,xe.W)(),Ee=!se.data?.items.length,{guestCheckoutEnabled:Le}=(0,F.Z)(),Be=(0,q.xZ)(),Pe=(0,fe.Z)("canonical_product_smart_cart");(0,a.useEffect)((()=>{if(t){clearTimeout(ne.current??void 0),_();const e=setTimeout((()=>{o(!0)}),300);return()=>{clearTimeout(e)}}o(!0)}),[t,_]),(0,a.useEffect)((()=>{if("undefined"==typeof i.Z||S)return;const e=()=>{r&&!S&&z()};return i.Z&&i.Z.addEventListener("scroll",e),()=>{i.Z&&i.Z.removeEventListener("scroll",e)}}),[r,z,S]),(0,a.useEffect)((()=>w),[w]);const Re=(0,W.Z)();(0,a.useEffect)((()=>{y&&ye("eats:cart_view",{storeUuid:String(de.data?.uuid),cartView:Be,isDelegatedBooking:String(Ie)})}),[y,ye,de]);const{currentCartIsSmartCart:Oe}=(0,be.R)(),De=Oe&&Pe;return y&&(!E||Re&&M)?(0,T.tZ)(Se,{ref:d,$isClosing:S,children:(0,T.BX)($e,{"data-test":"cart",children:[I&&A?(0,T.tZ)(U.c,{children:(0,T.tZ)(Te,{children:(0,T.tZ)(l.v,{id:"go.unlock_cart_warning_text_2"})})}):null,(0,T.tZ)(x.Z,{hasCloseButton:!0,headerRef:ae,isStuck:oe,onClose:z,title:H&&J||te,...I?{topRightIconButton:{icon:(0,T.tZ)(N.Z,{color:"black"}),onClick:()=>pe.push((0,b.vN_)(e,"shareGroupOrder"))}}:{}}),Ee&&!I?(0,T.tZ)(V,{}):(0,T.BX)(_e,{children:[(0,T.tZ)(m.ZP,{$height:24}),(0,T.tZ)(ze,{"data-test":"cart-header",children:I||De?ee:te}),Pe?(0,T.tZ)(K.C,{defaultSelectedStoreUuid:le}):null,I?(0,T.BX)(T.HY,{children:[(0,T.tZ)(m.ZP,{$height:16}),(0,T.BX)(ke,{children:[(0,T.tZ)(we,{to:re,onClick:()=>{ye("eats:click_store_link",{source:"cart"})},children:ie}),(0,T.tZ)(R.Z,{})]})]}):null,(0,T.tZ)(Ce,{children:(0,T.BX)(D.Z,{separator:$.sA,children:[I||he===le?null:(0,T.tZ)(L,{source:"cart"}),H||de.data?.isGroupOrderingDisabled||Ze||Le?null:(0,T.tZ)(B.Z,{store:de})]})}),me?(0,T.tZ)(G.Q,{$spaceBefore:32}):(0,T.tZ)(m.ZP,{$height:16}),I||Re&&M?(0,T.BX)(T.HY,{children:[(0,T.tZ)(X.Z,{gutterWidth:24}),(0,T.tZ)(h.Z,{gutterWidth:24,showAddGuestsBtn:!1,showFacePile:!0,showRemoveParticipantButton:!0})]}):(0,T.tZ)(T.HY,{children:(0,T.tZ)(p.ZP,{})}),(0,T.BX)(g.Z,{children:[de.data?(0,T.tZ)(ve,{store:de.data}):null,(0,T.tZ)(v.Z,{})]})]})]})}):null}},25400:(e,t,r)=>{r.d(t,{Z:()=>S});var i=r(47986),a=r(46933),o=r(52298),n=r(7646),s=r(17222),l=r(36278),d=r(34626),c=r(55186),u=r(79876),h=r(91931),p=r(53308),g=r(83960),m=r(69630),Z=r(7876),y=r(33535),v=r(94813),f=r(59924);const x=(0,h.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelSmall}})),b=e=>{const t=(0,v.TH)(),r=(0,y.ZP)(),d={...e.authOnClick?{onClick:t=>{r("eats:start_group_order_button"),e.authOnClick&&e.authOnClick(t)}}:{...e.beforeNavigate?{onClick:()=>{r("eats:start_group_order_button"),e.beforeNavigate&&e.beforeNavigate()}}:null,to:e.store.data?(0,i.Ljk)(t,(0,i.Btk)(e.store.data)):""},...e.href?{href:e.href}:null,...e.href&&e.authOnClick?{$as:"a"}:{$as:s.rU}};return(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.ZP,{$height:24}),(0,f.BX)(n.Bi,{...d,children:[(0,f.tZ)(u.Z,{size:16}),(0,f.tZ)(l.sA,{}),(0,f.tZ)(x,{children:(0,f.tZ)(a.v,{id:"components.checkout.group_order"})})]})]})},S=e=>{const{user:t}=(0,d.Z)(),r=(0,v.TH)(),a=(0,p.I0)(),o=(0,m.Z)(),{deliveryAddress:n,deliveryTime:s,storeUuid:l,diningMode:u,isEditOrder:h}=(0,g.Z)();return h?null:!t.data?.isLoggedIn&&e.store.data?(0,f.tZ)(c.Z,{type:"login",redirectTo:(0,i.Ljk)(r,(0,i.Btk)(e.store.data)),children:t=>{let{onClick:r,href:i}=t;return(0,f.tZ)(b,{store:e.store,authOnClick:r,href:i})}}):(0,f.tZ)(b,{store:e.store,...o&&l?{beforeNavigate:()=>{a((0,Z.A0)(l,{...s?{storeScheduledTime:s}:{},...n?{storeDeliveryLocation:n}:{},...u?{storeDiningMode:u}:{}}))}}:{}})}},12517:(e,t,r)=>{r.d(t,{Ct:()=>o});var i=r(90985),a=r(59924);function o(e){return(0,a.tZ)(i.Z,{...e})}},48351:(e,t,r)=>{r.d(t,{Z:()=>d});var i=r(74369),a=r(60849),o=r(82471),n=r(54669),s=r(34626),l=r(79857);const d=()=>{const[e,t]=(0,i.useState)(null),r=(0,a.F2)(),d=(0,n.Z)(),{user:c}=(0,s.Z)(),u=(0,l.Z)(),h=c.data?.isLoggedIn;return(0,i.useEffect)((()=>{if(u||h||d||null!==e)return;const i=r.getString({...o.k.eats_web_address_precise_location_xp,defaultValue:""});"modal"!==i&&"location_entry"!==i&&"control"!==i||t(i)}),[r,e,u,h,d]),e}},79168:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(91931);function a(e){const[t,r]=(0,i.hQ)();switch(e){case"mini":return{height:r.sizing.scale950,fontSize:r.sizing.scale550};case"small":return{height:r.sizing.scale1000,fontSize:r.sizing.scale600};default:return{height:r.sizing.scale1200,fontSize:r.sizing.scale600}}}},929:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(20115),a=r(29230),o=r(74634);function n(){const e=(0,o.Z)(),t=(0,i.Z)("features_config");return{headerHeight:e?a.Kv.height:t.header.height,isHeaderSticky:Boolean(t?.header?.sticky),headerShadowEnabled:Boolean(t?.header?.shadow)}}},57820:(e,t,r)=>{r.d(t,{Z:()=>j});var i=r(74369),a=r(46933),o=r(69420),n=r(68095),s=r(91931),l=r(76150),d=r(83960),c=r(50192),u=r(24316),h=r(31017),p=r(72179),g=r(19681),m=r(44997),Z=r(59924);const y=(0,s.zo)("div",(e=>{let{$theme:t,$shouldStick:r}=e;return{...t.typography.LabelMedium,opacity:r?1:0,transition:`opacity ${t.animation.timing300} ease`}})),v=(0,s.zo)("div",(()=>({position:"sticky",top:0,zIndex:1}))),f=(0,s.zo)("div",(e=>{let{$theme:t,$isCartDrafting:r}=e;return{margin:`0 -${t.sizing.scale600}`,...r?{padding:`${t.sizing.scale700} ${t.sizing.scale800} 0 ${t.sizing.scale300}`,marginBottom:`-${t.sizing.scale600}`}:{padding:`0 ${t.sizing.scale800} 0 ${t.sizing.scale300}`,minHeight:t.sizing.scale1400},backgroundColor:t.colors.backgroundPrimary,display:"flex",justifyContent:"space-between",alignItems:"center"}})),x=e=>{const{isCartDrafting:t}=(0,p.Z)();return t?(0,Z.tZ)(v,{children:e.children}):(0,Z.tZ)("div",{children:e.children})},b=(0,s.zo)(c.Z,{position:"static"}),S=e=>{const{isCartDrafting:t}=(0,p.Z)(),{totalOrders:r,draftOrders:i}=(0,u.Z)(),{isEditOrder:a}=(0,d.Z)(),[,o]=(0,s.hQ)(),{isLiveOrder:n}=(0,m.W)();return(0,Z.tZ)(x,{children:(0,Z.BX)(f,{$isCartDrafting:t,children:[(0,Z.tZ)(b,{onClick:e.onClose,$noBackground:t,iconSize:t?o.sizing.scale800:void 0}),0!==r||i.isLoading||a?null:(0,Z.tZ)(h.X,{}),t&&e.store.hasLoaded&&e.store.data?(0,Z.tZ)(y,{$shouldStick:e.shouldStick,children:e.store.data.title}):null,n?null:(0,Z.tZ)(Z.HY,{children:t&&e.store.hasLoaded&&e.store.data?(0,Z.tZ)(g.Z,{store:e.store.data,onClearCart:e.onClose}):null})]})})};var $=r(70247),_=r(17593),C=r(97679),z=r(74365),w=r(71279),k=r(82333),T=r(79851),I=r(30586),E=r(93633),L=r(51741),B=r(70327),P=r(35972),R=r(86255),O=r(90961),D=r(73845),H=r(33535),A=r(72147),M=r(34771),V=r(94261),N=r(94579),U=r(87444),X=r(9545),F=r(83395),G=r(61559),Y=r(16108),Q=r(13672);const q=(0,s.zo)("div",(e=>{let{$theme:t,$isCartDrafting:r}=e;return{height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",rowGap:t.sizing.scale600,...r?{":first-child > :is(div)":{margin:`0 ${t.sizing.scale600}`},":first-child > :is(ul)":{marginTop:0,marginLeft:t.sizing.scale600,marginBottom:-t.sizing.scale600,marginRight:t.sizing.scale600}}:{":first-child > :is(div, ul)":{margin:`0 ${t.sizing.scale600}`}}}})),W=(0,s.zo)("span",(e=>{let{$theme:t}=e;return t.typography.ParagraphMedium})),j=e=>{let{startShoppingRedirect:t}=e;const r=(0,o.k6)(),s=(0,T.Z)(),c=(0,o.UO)(),h=(0,R.Z)({encodedStoreUuid:c?.encodedStoreUuid}),[g,m]=(0,Y.Z)({root:null,rootMargin:"0px 0px 0px 0px",threshold:1}),{isGroupOrder:y,isBundledOrder:v}=(0,$.Dz)(),f=Boolean(m&&!m.isIntersecting),{sidebarCartVisible:x,sidebarCartIn:b,sidebarCartClosing:j,closeSidebarCart:K}=(0,l.Lb)({transitionMS:500}),{hasGroupOrder:J,isDraftOrderCreator:ee,storeUuid:te,isDraftOrderCartLocked:re,creatorName:ie,isEditOrder:ae}=(0,d.Z)(),{isLiveOrder:oe,liveOrderStoreUuid:ne}=(0,Q.l)(),se=oe?ne:te,{store:le}=(0,F.Z)({storeUuid:se}),{serverCart:de}=(0,$.iQ)(),{hasCartToLoad:ce}=(0,X.Z)(),{totalOrders:ue,setActiveDraftOrder:he,activeDraftOrderUUID:pe,currentStoreDraftOrderUUID:ge}=(0,u.Z)(),me=(0,O.Z)(),Ze=Boolean(me),{isManagingGroupOrder:ye}=(0,E.Z)(),ve=(0,H.ZP)(),fe=0===ue&&!ae&&!ce&&!de.isLoading,xe=!x&&!b,be=(0,U.Z)("canonical_product_smart_cart"),{isCartDrafting:Se}=(0,p.Z)();return(0,M.Z)(!xe),(0,_.Z)(x),(0,D.Z)({cartOpen:x&&b,store:le,draftOrder:de}),(0,i.useEffect)((()=>{j&&pe&&ge&&he(ge||"")}),[j,ge,he,pe,h]),xe?null:(0,Z.tZ)(B.Z,{messageKey:"cart-drawer",children:(0,Z.tZ)(V.ZP,{zIndex:N.I_.cover,children:(0,Z.tZ)(n.Z,{isOpen:x&&b,onClose:K,overrides:{Close:{style:{display:"none"}},DrawerContainer:{style:{width:"478px"}},DrawerBody:{style:{marginTop:0,marginBottom:0,marginLeft:0,marginRight:0}}},children:ye?(0,Z.tZ)(L.Z,{}):(0,Z.BX)(q,{$isCartDrafting:Se,"data-test":"cart",children:[(0,Z.tZ)(S,{shouldStick:!y&&!v&&f,store:le,onClose:()=>{K(),ve("eats:close_cart_cta")}}),fe?(0,Z.tZ)(k.Z,{onClick:()=>{K(),t&&r.push(s),ve("eats:start_shopping_cta_click")}}):(0,Z.tZ)(C.Z,{store:le,isLiveOrder:oe,draftOrder:de,loaded:(e,t)=>(0,Z.BX)(Z.HY,{children:[(0,Z.BX)("div",{children:[re?(0,Z.tZ)(z.c,{children:(0,Z.tZ)(W,{children:ee?(0,Z.tZ)(a.v,{id:"go.unlock_cart_warning_text_2"}):(0,Z.tZ)(a.v,{id:"go.creator_order_locked_description",data:{creatorName:ie}})})}):null,oe?null:(0,Z.BX)(Z.HY,{children:[(0,Z.tZ)("div",{ref:g}),(0,Z.tZ)(I.Z,{store:e,onCartClose:K,onClearCart:K,cartActionsType:"dropdown"})]})]}),be?(0,Z.tZ)(A.C,{defaultSelectedStoreUuid:e.uuid}):null,(0,Z.BX)(Z.HY,{children:[Ze?(0,Z.tZ)(P.Q,{$spaceBefore:24}):null,(0,Z.tZ)(w.Z,{})]}),(0,Z.tZ)(G.Z,{hasGroupOrder:J,store:e,isMobile:!1,quantitySelectType:Se?"stepper":"picker",isLiveOrder:oe})]})})]})})})})}},21661:(e,t,r)=>{r.d(t,{Z:()=>g});var i=r(74369),a=r(91931),o=r(76686),n=r(24316),s=r(33535),l=r(53213),d=r(94579),c=r(53308),u=r(24484),h=r(87444);const p=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{background:t.colors.menuFill,boxShadow:"0px 4px 16px rgba(0, 0, 0, 0.12)",marginTop:"8px",right:"8px",position:"absolute",width:"420px",borderRadius:"16px",maxHeight:"505px",overflow:"auto",zIndex:d.I_.foreground}})),g=e=>{let{isDropdownOpen:t,setIsDropdownOpen:r}=e;const{totalOrders:a,draftOrderUUIDs:d,setActiveDraftOrder:g}=(0,n.Z)(),m=(0,o.Z)(),Z=(0,s.ZP)(),y=i.useRef(null),v=(0,c.I0)(),f=(0,h.Z)("canonical_product_smart_cart");(0,l.Z)(y,(()=>{r(!1)}),t);const x=i.useCallback((()=>{const e=!t;r(e),e&&Z("eats:carts_list_view",{multicart:{numTotalCarts:a,draftOrderUuids:d}})}),[t,r,Z,a,d]),b=i.useCallback(((e,t)=>{g(e),m(e,t),r(!1),f&&v((0,u.kw)())}),[g,m,f,r,v]);return{toggleIsDropdownOpen:x,dropdownRef:y,isDropdownOpen:t,onCartSelect:b,DropdownWrapperDesktop:p}}},25862:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(74369),a=r(73472),o=r(33535);const n=(e,t)=>{const{stopTiming:r}=(0,a.K3)(),n=i.useRef(!1),s=(0,o.ZP)();i.useEffect((()=>{if(!n.current){n.current=!0;const i=r(e);i&&s("eats:timing",{label:t??e,timeElapsed:i})}}),[r,s,e,t])}},81702:(e,t,r)=>{r.d(t,{Z:()=>d});var i=r(74369),a=r(15070),o=r(94813),n=r(47986),s=r(92060),l=r(33535);const d=()=>{const e=(0,a.v)((e=>{let{multiVertical:t}=e;return t.verticalList})),t=(0,o.TH)(),{vertical:r,userQuery:d}=(0,n.RAN)(t,["vertical","userQuery"]),[c,u]=i.useState(!d?.trim()),[h,p]=i.useState(!0),g=(0,l.ZP)();return{trackSearchCategoryClick:i.useCallback((t=>{g("eats:search_end",{userQuery:t,mvsMeta:{verticalList:e.map((e=>e.verticalType)).join(","),selectedVertical:r||s.g}})}),[g,e,r]),showSearchHome:c,showPastOrdersSuggestions:h,setShowPastOrdersSuggestions:p,setShowSearchHome:u,trackSearchHomeItemClick:i.useCallback((e=>{g("eats:search_home_item_click",e)}),[g]),trackSearchHomeItemView:i.useCallback((e=>{g("eats:search_home_item_view",e)}),[g])}}},41878:(e,t,r)=>{r.d(t,{ZP:()=>C,aJ:()=>_});var i=r(74369),a=r(60849),o=r(15070),n=r(69420),s=r(14016),l=r(20568),d=r(39697),c=r(33535),u=r(47986),h=r(54669),p=r(16046),g=r(43426),m=r(16372),Z=r(65717),y=r(92060),v=r(87444),f=r(7819),x=r(94813),b=r(79857),S=r(2139),$=r(35212);const _=(e,t,r,i,a,o)=>["text","textV2","searchHistory","searchHistoryV2","popularCategory","topCategory","searchFor","searchText","searchTextV2"].includes(e.type)?{type:"link",to:(0,u.Xqq)(t,{vertical:a||y.g,userQuery:e.searchTerm?e.searchTerm:e.title,searchEntered:o,searchSource:m.xH.SEARCH_SUGGESTION,eventSource:e.type||"",searchType:m.Sc.GLOBAL_SEARCH,...r?{deliveryLocation:r}:{}})}:"store"===e.type&&e.store?(0,f.C)(e.store,i,t):"croStore"===e.type&&e.store?{type:"link",to:(0,u.gfM)(t,{storeSlug:e.store.slug,storeUuid:e.store.uuid})}:{type:"unknown"},C=e=>{let{initialQuery:t,onSuggestionSelected:r,initialIsClosed:f,searchTypeaheadPlaceholder:C,vertical:z,isMultiVerticalDesktop:w}=e;const k=(0,x.TH)(),T=(0,n.k6)(),I=(0,s.T)(),E=(0,h.Z)(),L=(0,c.ZP)(),B=(0,l.Z)("getSearchSuggestionsV1"),P=(0,v.Z)("clear_search_results_cache_on_location_change"),R=(0,$.Z)(E,!0),O=(0,Z.Z)(),D=(0,a.ip)({...g.J.cs_other_entrypoint_xlb,defaultValue:!1}),H=(0,v.Z)("can_enable_cs_other_entrypoint_xlb"),A=(0,o.v)((e=>{let{multiVertical:t}=e;return t.verticalList})),{setLastClickedPartialStore:M}=i.useContext(p.C),{userQuery:V}=(0,u.RAN)(k,["userQuery"]),N=(0,b.Z)(),U=(0,S.Z)(),X=i.useCallback((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"push";"replace"===t?T.replace(e):T.push(e)}),[T]),F=i.useCallback((async e=>{if(L("eats:search_end",{userQuery:e.title,page:k.pathname,hasDeliveryLocation:Boolean(E),mvsMeta:{verticalList:A.map((e=>e.verticalType)).join(","),selectedVertical:z||y.g},eventSource:e.type||"",searchType:"searchFor"!==e.type&&"text"!==e.type||!e.title?"suggestion":"manual"}),r&&r(),e.store&&("store"===e.type&&!e.store.actionUrl||"croStore"===e.type)&&M({heroImageUrl:e.store.heroImageUrl,title:e.store.title,storeUuid:e.store.uuid}),"store"===e.type&&e.store){if(e.store.actionUrl)return;X((0,u.gfM)(k,{storeSlug:e.store.slug,storeUuid:e.store.uuid}),N&&!U?"replace":"push")}else"croStore"===e.type&&e.store?L("eats:search_bar_past_order_store_click",{storeUuid:e.store?.uuid}):"searchFor"!==e.type&&"text"!==e.type||!e.title||X((0,u.Xqq)(k,{userQuery:e.title,searchSource:m.xH.SEARCH_BAR,eventSource:"text",searchType:m.Sc.GLOBAL_SEARCH,searchEntered:e.title}),N||U?"replace":"push")}),[L,k,E,A,z,r,M,X,N,U]),G=i.useCallback(((e,t)=>{L("eats:search_term_by_keyboard",{searchTerm:e.trim(),vertical:z||y.g});const r={title:e.trim(),type:"searchFor"};F(r)}),[F,L,z]),Y=i.useCallback((async e=>{if(!e)return[];const{date:t,startTime:r,endTime:i}=(0,u.RAN)(k,["date","startTime","endTime"]),a=await B({userQuery:e,date:t,startTime:Number(r),endTime:Number(i),vertical:z});return 0===a.length?L("eats:global_search_suggestions_zero_results",{mvsMeta:{verticalList:A.map((e=>e.verticalType)).join(","),selectedVertical:z||y.g}}):L("eats:global_search_suggestions_viewed",{mvsMeta:{verticalList:A.map((e=>e.verticalType)).join(","),selectedVertical:z||y.g}}),!O||D&&H?a:a.filter((e=>!e.store?.actionUrl))}),[k,B,z,L,A,O,D,H]),Q=i.useCallback((e=>{let{results:t,query:r}=e;return 0===t.length?r?I("shared.noSuggestionsForTerm",{searchTerm:r}):"":r?I("components.MarketplaceSearch.resultsDescription",{numResults:t.length,searchTerm:r}):I("shared.searchResultsCount",{resultsCount:t.length})}),[]),{query:q,results:W,getLabelProps:j,getInputProps:K,getMenuProps:J,getItemProps:ee,reset:te,openMenu:re,isOpen:ie,highlightedIndex:ae,clearCacheAndRefetchResults:oe,selectItem:ne}=(0,d.Z)({id:"search-suggestions-typeahead",initialQuery:t||V,fetchResults:Y,initialIsClosed:f,onResultSelected:F,getQueryFromResult:e=>e?.title||"",onEnterKeyWithNoSelectedResult:G,getA11yStatusMessage:Q,fetchResultsTrigger:z,shouldTrimQuery:!0}),se=C||I("shared.searchPlaceholder");return i.useEffect((()=>{!U&&P&&oe&&oe()}),[E]),i.useEffect((()=>{U&&P&&oe&&R!==E&&oe()}),[U,E,R,P,oe]),{query:q,results:W,isOpen:ie,getLabelProps:j,getInputProps:K,getMenuProps:J,getItemProps:ee,openMenu:re,reset:te,highlightedIndex:ae,placeholder:se,getSuggestionAction:e=>_(e,k,E,O,z||y.g,q),handleSuggestionSelected:F,selectItem:ne}}},57955:(e,t,r)=>{r.d(t,{Z:()=>P});var i=r(74369),a=r(46933),o=r("__fusion__1519"),n=r("__fusion__690"),s=r(91931),l=r(75161),d=r(32857),c=r(68065),u=r(11841),h=r(14016),p=r(44133),g=r("__fusion__924"),m=r("__fusion__713"),Z=r(72238),y=r(21322),v=r("__fusion__1029"),f=r(32583),x=r(54669),b=r(33535),S=r(59924);const $={StartEnhancer:{style:e=>{let{$theme:t}=e;return{paddingRight:t.sizing.scale300,paddingLeft:t.sizing.scale300}}},EndEnhancer:{style:e=>{let{$theme:t}=e;return{paddingLeft:t.sizing.scale300,paddingRight:t.sizing.scale300}}},Input:{style:e=>{let{$theme:t}=e;return{paddingLeft:t.sizing.scale300}}},Root:{style:e=>{let{$theme:t}=e;return{paddingLeft:t.sizing.scale200,paddingRight:t.sizing.scale200,borderRadius:t.sizing.scale1200}}}},_={Root:{style:()=>({cursor:"pointer"})},LabelContent:{style:e=>{let{$theme:t}=e;return{color:t.colors.contentPrimary,...t.typography.LabelMedium}}},LabelDescription:{style:e=>{let{$theme:t}=e;return{color:t.colors.contentSecondary,...t.typography.ParagraphSmall}}}},C=(0,s.zo)("div",(e=>{let{$expanded:t}=e;return{display:"flex",flexDirection:"column",justifyContent:"flex-start",minHeight:t?"577px":"216px"}})),z=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingSmall,display:"flex",justifyContent:"space-between",alignItems:"center",margin:`${t.sizing.scale800} ${t.sizing.scale550} ${t.sizing.scale300} ${t.sizing.scale800}`}})),w=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",justifyContent:"flex-end",alignItems:"flex-end",margin:`${t.sizing.scale600} ${t.sizing.scale800}`,flexGrow:1}})),k=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{marginLeft:t.sizing.scale800,marginRight:t.sizing.scale800}})),T=(0,s.zo)("ul",(e=>{let{$theme:t}=e;return{marginLeft:t.sizing.scale300,marginRight:t.sizing.scale300}})),I=e=>{let{open:t,onClose:r}=e;const[n,I]=(0,i.useState)(""),[,E]=(0,s.hQ)(),L=(0,x.Z)(),{locationSuggestions:B,handleLocationSelected:P,isLoading:R,hasLoaded:O}=(0,p.Z)({query:n}),D=(0,h.T)(),H=(0,b.ZP)(),A=n.length>0,M=B?.length>0;(0,i.useEffect)((()=>{t&&(H("eats:enter_delivery_address_start",{address:L?.address?.address1,latitude:L?.latitude,longitude:L?.longitude}),H("eats:store_ephemeral_address_input_modal_impression"))}),[t,H,L]),(0,i.useEffect)((()=>{R&&H("eats:store_ephemeral_address_input_modal_search")}),[R,H]);const V=()=>{I("")};return(0,S.tZ)(l.u_,{isOpen:t,onClose:r,children:(0,S.BX)(C,{$expanded:M,children:[(0,S.BX)(z,{children:[(0,S.tZ)(a.v,{id:"shared.enterDeliveryAddress"}),(0,S.tZ)(d.Z,{kind:c.TO.tertiary,shape:c.X3.circle,onClick:r,children:(0,S.tZ)(v.default,{size:20})})]}),(0,S.tZ)(k,{children:(0,S.tZ)(u.Z,{startEnhancer:e=>(0,S.tZ)(g.default,{...e,size:16,onClick:e=>e.stopPropagation()}),placeholder:D("location_manager.search_placeholder"),overrides:$,value:n,onChange:e=>I(e.target.value),endEnhancer:e=>R?(0,S.tZ)(f.$,{$size:20}):A?(0,S.tZ)(m.default,{...e,size:20,...e,onClick:V}):null})}),(0,S.BX)(T,{children:[B?.map((e=>(0,S.tZ)(Z.Z,{artwork:e=>(0,S.tZ)(o.default,{...e,size:20,color:E.colors.gray600}),overrides:_,onClick:()=>{H("eats:store_ephemeral_address_input_modal_select_location"),P(e)},children:(0,S.tZ)(y.Z,{description:e.addressLine2,children:e.addressLine1})},e.id))),O&&0===B?.length?(0,S.tZ)(Z.Z,{children:(0,S.tZ)(y.Z,{children:(0,S.tZ)(a.v,{id:"components.store_address_input.no_results"})})},"no-results"):null]}),M?(0,S.tZ)(w,{children:(0,S.tZ)(d.Z,{kind:c.TO.secondary,onClick:r,children:(0,S.tZ)(a.v,{id:"back"})})}):null]})})};var E=r(51170),L=r(94579);const B=(0,s.zo)("div",(e=>{let{$theme:t,$isHighlighted:r}=e;return{...t.typography.LabelSmall,height:t.sizing.scale950,paddingLeft:t.sizing.scale600,paddingRight:t.sizing.scale600,display:"flex",alignItems:"center",alignSelf:"center",gap:t.sizing.scale100,borderRadius:t.sizing.scale950,cursor:"pointer",":hover":{opacity:.8},whiteSpace:"nowrap",transition:L.pB.default,...r?{backgroundColor:t.colors.backgroundInversePrimary,color:t.colors.contentInversePrimary}:{backgroundColor:"transparent",color:t.colors.contentPrimary}}})),P=()=>{const[e,t]=(0,i.useState)(!1),{state:r}=(0,E.D)();return(0,S.BX)(S.HY,{children:[(0,S.BX)(B,{onClick:()=>t(!0),$isHighlighted:r.isAddressInputHighlighted,children:[(0,S.tZ)(o.default,{size:20}),(0,S.tZ)(a.v,{id:"shared.enterDeliveryAddress"}),(0,S.tZ)(n.default,{size:16})]}),(0,S.tZ)(I,{open:e,onClose:()=>t(!1)})]})}},3641:(e,t,r)=>{r.d(t,{Z:()=>Q});var i=r(74369),a=r(14016),o=r(69420),n=r(47986),s=r(16372),l=r(53308),d=r(54669),c=r(87891),u=r(33535),h=r(78034),p=r(53213),g=r(19889),m=r(52298),Z=r(54176),y=r(30768),v=r(94813),f=r(64388),x=r(41878),b=r(53685),S=r(92060),$=r(91931),_=r(87873),C=r(14770),z=r(36278),w=r(37555),k=r(79168),T=r("__fusion__713"),I=r(59924);const E=(0,$.zo)("div",(e=>{let{$theme:t,$isFocused:r,$maxWidth:i}=e;return{...t.typography.LabelMedium,backgroundColor:t.colors.inputFill,color:t.colors.inputText,width:"100%",display:"flex",height:t.sizing.scale1200,borderRadius:t.borders.pillButtonBorderRadius,alignItems:"center",...r?{maxWidth:"1494px"}:{maxWidth:`${i??1036}px`},transition:`min-width ${t.animation.timing400} ease, max-width ${t.animation.timing400} ease`}})),L=(0,$.zo)("div",(e=>({display:"flex",flexShrink:0,alignSelf:"center",marginLeft:e.$theme.sizing.scale600,marginRight:e.$theme.sizing.scale500}))),B=(0,$.zo)("input",(e=>({flex:1,backgroundColor:e.$theme.colors.inputFill,...e.$width?{width:`${e.$width}px`}:{},appearance:"none",outline:"none","::placeholder":{..."mini"===e.$size?e.$theme.typography.LabelSmall:e.$theme.typography.LabelMedium,color:e.$theme.colors.contentSecondary},textOverflow:"ellipsis",overflow:"hidden",caretColor:e.$theme.colors.eatsBusiness}))),P=(0,$.zo)("button",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentTertiary,cursor:"pointer",display:"flex",alignItems:"center"}})),R=(0,$.zo)("div",(e=>{let{$theme:t}=e;return{width:"1px",margin:"0 16px",backgroundColor:t.colors.borderOpaque}})),O=(0,$.zo)(C.Z,{cursor:"pointer"}),D=e=>{const[t,r]=i.useState(!1),[a,o]=i.useState(!0),n=i.useRef(null),s=(0,u.ZP)(),{value:l,...d}=e.getInputProps({onFocus:()=>{e.onFocus&&e.onFocus(),e.setExpandedState&&e.setExpandedState(),r(!0),0===l?.length&&o(!0)},onChange:t=>{a&&(s("eats:search_type_started",{numberRecentSearchSuggestions:e.numberRecentSearchSuggestions}),o(!1))},onBlur:()=>{r(!1)},onInput:t=>{e.onInput&&e.onInput(t)},ref:n});i.useEffect((()=>{e.expandedState&&n.current&&n.current.focus()}),[e.expandedState]);const c=e.expandedState&&e.query.length>0,h=(0,k.Z)(e.size);return(0,I.BX)(E,{$isFocused:e.expandedState||t,$style:h,$maxWidth:e.size?"100%":void 0,children:[(0,I.tZ)(L,{children:(0,I.tZ)(_.Z,{size:16})}),(0,I.tZ)(B,{...d,value:l||"",type:"text",autoComplete:"off",name:"searchTerm",placeholder:e.placeholder,$width:e.queryWidth,onKeyDown:t=>{t.keyCode===w.q7&&e.handleEnterClick&&e.query.trim().length>0&&e.handleEnterClick()},$size:e.size,"data-testid":"search-input"}),(0,I.tZ)(z.ZP,{$width:"8px"}),c?(0,I.BX)(I.HY,{children:[(0,I.tZ)(P,{type:"button",onClick:()=>{e.reset(),n.current&&(n.current.focus(),e.setExpandedState&&e.setExpandedState())},children:(0,I.tZ)(T.default,{size:16})}),(0,I.tZ)(z.IQ,{})]}):null,e.onClose&&e.query.length>0?(0,I.tZ)(R,{}):null,e.onClose?(0,I.tZ)(O,{onClick:e.onClose}):null]})};var H=r(46280),A=r(19566),M=r(40606),V=r(66740),N=r(93801),U=r(55758),X=r(32267),F=r(32762),G=r(28700),Y=r(81702);const Q=e=>{let{storeUuid:t,isSearchFeed:r,wrapperRef:_,expandedState:C,setExpandedState:z,size:w}=e;const[k]=(0,$.hQ)(),T=(0,l.I0)(),E=(0,o.k6)(),L=(0,a.T)(),B=(0,v.TH)(),P=(0,d.Z)(),{showSearchHome:R,setShowSearchHome:O}=(0,Y.Z)(),Q=(0,c.t)({dropPastOrders:!0}),q=(0,U.d)(),W=Boolean("DELIVERY"===q),j=Q.data?.verticalSuggestionLists,{store:K}=(0,f.ZP)(t),J=K?.data?.title||"",{desktopFeatures:ee}=(0,F.Z)();(0,i.useEffect)((()=>{j&&T((0,h.Vw)(j))}),[T,j]);const te=(0,u.ZP)();(0,i.useEffect)((()=>{te("eats:search_bar_impression")}),[te]);const{userQuery:re,vertical:ie,storeSearchQuery:ae,entryPoint:oe}=(0,n.RAN)(B,["userQuery","vertical","storeSearchQuery","entryPoint"]),[ne,se]=(0,i.useState)(ie||S.g);(0,i.useEffect)((()=>{se(ie||S.g)}),[ie]);const le=(0,y.Z)(),de=Boolean(t)?s.OT.STORE_SEARCH:r?s.OT.GLOBAL_SEARCH:""!==le?s.OT.VERTICAL_FEED:s.OT.HOME_FEED,{feed:ce}=(0,Z.Z)(),ue=()=>{te("eats:search_bar_closed"),z(!1)},{query:he,results:pe,getInputProps:ge,reset:me,placeholder:Ze,getLabelProps:ye,getItemProps:ve,getMenuProps:fe,getSuggestionAction:xe}=(0,x.ZP)({..."shoppingList"===oe?{initialQuery:re}:{initialQuery:re||ae},initialIsClosed:!0,searchTypeaheadPlaceholder:L("shared.searchBarHintText"),vertical:ne||S.g,onSuggestionSelected:ue,isMultiVerticalDesktop:!0}),be=pe.data||[],Se=()=>{se(ie||S.g),r||(O(!0),me()),ue()};(0,p.Z)(_,(()=>{Se()}),C),(0,g.Z)((()=>{ue(),document.activeElement instanceof HTMLInputElement&&document.activeElement.blur()}));const $e=Boolean(J)&&!ee.hasNewInStoreSearch?L("shared.searchStoreTitle",{storeTitle:J}):Ze,_e=e=>{ue(),te("eats:search_end",{userQuery:e?.title,page:B.pathname,hasDeliveryLocation:Boolean(P),mvsMeta:{verticalList:(j||[]).map((e=>e.verticalType)).join(","),selectedVertical:ne||S.g},searchType:"suggestion"})};return(0,I.BX)(I.HY,{children:[(0,I.tZ)(H.ag,{$showOverlay:C,onClick:Se}),(0,I.BX)(H.vr,{$expanded:C,"data-testid":"global-search-bar-wrapper",children:[(0,I.BX)(H.kN,{role:"search","aria-label":L("shared.searchBarHintText"),$expanded:C,"data-testid":"multi-vertical-desktop-global-search-bar-wrapper",children:[(0,I.tZ)(H.E7,{...ye(),children:$e}),(0,I.tZ)(D,{query:he,getInputProps:ge,reset:()=>{me(),O(!0)},placeholder:Ze,setExpandedState:()=>{te("eats:search_multi_vertical_bar_click"),te("eats:search_bar_clicked"),z(!0)},expandedState:C,verticalLists:j,handleEnterClick:()=>(te("eats:search_end",{userQuery:he,page:B.pathname,hasDeliveryLocation:Boolean(P),searchType:"manual"}),E.push((0,n.Xqq)(B,{vertical:ne||S.g,userQuery:he.trim(),searchSource:s.xH.SEARCH_BAR,searchType:s.Sc.GLOBAL_SEARCH})),void ue()),isSearchFeed:r,isCategoryPage:"CATEGORY_PAGE"===ce.data?.searchDisplayConfig,onFocus:()=>{""===he&&"HOME_FEED"===de&&te("eats:search_start",{page:B.pathname,hasDeliveryLocation:Boolean(P),mvsMeta:{verticalList:j?.map((e=>e.verticalType)).join(",")||"",selectedVertical:ne||S.g},searchSource:de,numberRecentSearchSuggestions:(0,b.C)(be)})},onInput:e=>{e.target.value.trim()?O(!1):O(!0)},size:w,numberRecentSearchSuggestions:(0,b.C)(be)})]}),(0,I.tZ)(H.bf,{$showPopover:C,children:(0,I.BX)(H.YD,{$showPopover:C,$needsPadding:!1,children:[W?(0,I.tZ)(A.Z,{onSelect:e=>{se(e)},selectedVertical:ne||S.g,expandedState:C,surface:"ZERO_STATE"}):null,(0,I.BX)(H.Cz,{$needsLeftMargin:!0,children:[R?null:be.length>0?(0,I.tZ)(G.Z,{query:he,suggestions:be,getMenuProps:fe,getItemProps:ve,onItemClick:_e,getSuggestionAction:xe}):(0,I.tZ)(H.p5,{}),R?(0,I.tZ)(M.Z,{source:{isLoading:Q.isLoading,hasLoaded:Q.isFetched,data:Q.data,error:Q.error},error:()=>(0,I.tZ)(N.nQ,{code:500}),loaded:e=>(0,I.tZ)(X.Z,{selectedVertical:ne||S.g,searchHomeResults:(e.verticalSearchHomeResults||{})[ne||S.g]??[],verticalList:e.verticalSuggestionLists||[],onItemClick:_e}),loading:()=>(0,I.tZ)(V.Z,{itemNumbers:[5,3]})}):null,(0,I.tZ)(m.ZP,{$height:69})]})]})})]})]})}},46294:(e,t,r)=>{r.d(t,{Z:()=>pe});var i=r(74369),a=r(14016),o=r(69420),n=r(86695),s=r(91931),l=r(69404),d=r(47986),c=r(16372),u=r(53308),h=r(87891),p=r(33535),g=r(78034),m=r(53213),Z=r(19889),y=r(36278),v=r(97450),f=r(93866),x=r(55811),b=r(30768),S=r(94813),$=r("__fusion__476"),_=r(76204),C=r(14869),z=r(42751),w=r(45631),k=r(24236),T=r(59924);const I=()=>null,E=(0,s.zo)("div",{display:"flex"}),L=(0,s.zo)("div",{display:"flex",width:"100%"}),B=(0,s.zo)("div",{display:"flex",width:"inherit",flexDirection:"column"}),P=(0,s.zo)("div",(e=>{let{$numOfColumns:t}=e;return{display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,width:"inherit"}})),R=(0,s.zo)("div",{display:"flex",width:"100%"}),O=e=>{let{item:t,index:r,compositionMap:a,virtualListScrollEl:o,isGrocery:n,fallbackErrorComponent:s,emitEvent:l,handleSuggestionSelected:d}=e;const c=s||I,{elementRef:u,isElementHidden:h}=(0,k.Z)({initialHidden:!0,waitTime:0,shouldListen:!0}),p=t.type;if(i.useEffect((()=>{!h&&l&&"content"===p&&t?.content?.template.serverDrivenUI&&l(t?.content?.template.serverDrivenUI)}),[l,h,t?.content?.template.serverDrivenUI,p]),"container"===p){const e=t.container;return(0,T.tZ)(D,{bloxContainer:e,compositionMapGlobal:a,virtualListScrollEl:o,isGrocery:n,emitEvent:l})}if("content"===p){const e=t?.content?.template.serverDrivenUI;if(!e)return(0,T.BX)(T.HY,{children:[(0,T.tZ)(c,{}),";",(0,T.tZ)(C.Z,{children:(0,T.tZ)(i.Fragment,{children:(0,T.tZ)(E,{children:"Container serverDrivenUIItem did not load"})},r)})]});const o=e?.compositionKey,n=o&&a?a[o]:{};if(!n?.root?.escapedJsonData||n?.root?.jsonData){const e=JSON.stringify(n?.root);return(0,T.BX)(C.Z,{children:[(0,T.tZ)(E,{children:"Web client needs escapedJsonData not jsonData"}),e]})}return(0,T.tZ)(R,{ref:u,onClick:()=>{d(e,r)},"data-testid":"blox-parser-suggestion-item",children:(0,T.tZ)(_.Z,{index:r,encodedViewModel:n?.root,data:e?.elements||null,clientViews:e?.clientViews,analytics:e?.analytics})},r)}return(0,T.BX)(T.HY,{children:[(0,T.tZ)(c,{}),";",(0,T.BX)(i.Fragment,{children:[(0,T.tZ)(C.Z,{children:"Container Item did not load"}),";"]},r)]})},D=e=>{let{bloxContainer:t,compositionMapGlobal:r,virtualListScrollEl:a,isGrocery:o,fallbackErrorComponent:n,emitEvent:s,handleSuggestionSelected:l}=e;const d=n||I,c=t.items,u=t.compositionMap||r,h=t.type,p="vertical"===h?.type?Number(h.vertical.columnCount):1,g=i.useMemo((()=>(0,w.Z)(c,p)),[p,c]),m=i.useMemo((()=>c.length<=1&&"content"===c[0]?.type||c.length>1?g:g[0]),[c,g]);return t&&t.type?(0,T.tZ)(L,{children:(0,T.tZ)(B,{children:o&&p>=2?(0,T.tZ)(z.ZP,{calculateHeight:()=>224,scrollEl:a,children:m&&m.map(((e,t)=>(0,T.tZ)(P,{$numOfColumns:p,children:e.map(((e,t)=>(0,T.tZ)(O,{item:e,index:t,compositionMap:u,virtualListScrollEl:a,isGrocery:o,fallbackErrorComponent:n,emitEvent:s,handleSuggestionSelected:l},`${t}-ivl`)))},`${t}-gc`)))}):(0,T.tZ)(T.HY,{children:c.map(((e,t)=>(0,T.tZ)(O,{item:e,index:t,compositionMap:u,virtualListScrollEl:a,isGrocery:o,fallbackErrorComponent:n,emitEvent:s,handleSuggestionSelected:l},`${t}-non-ivl`)))})})}):(0,T.BX)(T.HY,{children:[(0,T.tZ)(d,{}),";",(0,T.tZ)(C.Z,{children:(0,T.tZ)(E,{children:"Error in Container Component"})})]})},H=i.memo(D);var A=r(43832),M=r(49160),V=r(80803);const N=(0,s.zo)("div",{margin:0,padding:0,width:"100%",height:"100%"}),U=e=>{let{searchSuggestBloxResponse:t,handleSuggestionSelected:r}=e;const i=(0,p.ZP)(),a=$.useRef(!1),{store:o}=(0,A.QT)(),n=(0,M.Z)(o.data),s=o.data?(0,V.tl)(o.data,n):void 0;return $.useEffect((()=>{if(t?.bloxContainer?.items&&!a.current){a.current=!0;t.bloxContainer.items.forEach(((e,t)=>{if("content"===e.type&&"serverDrivenUI"===e.content.template?.type){const r=e.content.template.serverDrivenUI.analytics?.data?.maps?.stringMap;i("eats:store_search_suggestion_impression",{displaySurface:r?.displaySurface&&String(r?.displaySurface),searchSuggestion:r?.searchSuggestion&&String(r?.searchSuggestion),searchTerm:r?.searchTerm&&String(r?.searchTerm),storeUuid:r?.storeUuid&&String(r?.storeUuid),suggestionType:r?.suggestionType&&String(r?.suggestionType),itemPosition:t,storeLayout:s})}}))}}),[i,t?.bloxContainer?.items,s]),t&&t?.bloxContainer?null===t?.bloxContainer.items?null:(0,T.tZ)(N,{"data-testid":"desktop-in-store-suggestions",children:(0,T.tZ)(H,{bloxContainer:t.bloxContainer,compositionMapGlobal:t.bloxContainer?.compositionMap,handleSuggestionSelected:r})}):null};var X=r(64388),F=r(15070),G=r(39697),Y=r(54669),Q=r(20568),q=r(87444);const W=e=>{let{initialQuery:t,onSuggestionSelected:r,initialIsClosed:o,searchTypeaheadPlaceholder:n,vertical:s,store:l}=e;const c=(0,S.TH)(),u=(0,a.T)(),h=(0,Y.Z)(),p=(0,Q.Z)("searchSuggestV2"),g=(0,q.Z)("clear_search_results_cache_on_location_change"),{xlbHeaderBridge:m}=(0,F.v)((e=>{let{embeddedFeatures:t}=e;return t})),{userQuery:Z}=(0,d.RAN)(c,["userQuery"]),y=i.useCallback((async e=>{r&&r()}),[r]),v=i.useCallback((async e=>{if(!e)return[];return[await p({userQuery:e,storeUuid:l?.data?.uuid||"",storeLocation:l?.data?.location,locationType:l?.data?.location?.locationType,parentChainUuid:l?.data?.parentChain?.uuid||"",webClientType:"DESKTOP"})]}),[p,l?.data?.uuid,l?.data?.location,l?.data?.parentChain?.uuid]),f=i.useCallback((e=>{let{results:t,query:r}=e;return 0===t.length?r?u("shared.noSuggestionsForTerm",{searchTerm:r}):"":r?u("components.MarketplaceSearch.resultsDescription",{numResults:t.length,searchTerm:r}):u("shared.searchResultsCount",{resultsCount:t.length})}),[]),{query:x,results:b,getLabelProps:$,getInputProps:_,getMenuProps:C,getItemProps:z,reset:w,openMenu:k,isOpen:T,highlightedIndex:I,clearCacheAndRefetchResults:E,selectItem:L}=(0,G.Z)({id:"search-suggestions-typeahead",initialQuery:t||Z,fetchResults:v,initialIsClosed:o,onResultSelected:y,getQueryFromResult:e=>"",getA11yStatusMessage:f,fetchResultsTrigger:s,updateInputOnSelectedItemChange:!0,shouldTrimQuery:!0}),B=n||u("shared.searchPlaceholder");return i.useEffect((()=>{g&&E&&E()}),[h]),{query:x,results:b,isOpen:T,getLabelProps:$,getInputProps:_,getMenuProps:C,getItemProps:z,openMenu:k,reset:w,highlightedIndex:I,placeholder:m?"":B,getSuggestionAction:e=>({type:"unknown"}),handleSuggestionSelected:y,selectItem:L}};var j=r(92060),K=r(46933),J=r(87873),ee=r(14770),te=r(37555),re=r(79168);const ie=(0,s.zo)("div",(e=>{let{$theme:t,$isFocused:r,$height:i,$maxWidth:a}=e;return{...t.typography.LabelMedium,backgroundColor:t.colors.inputFill,color:t.colors.inputText,width:"100%",display:"flex",position:"absolute",height:i,borderRadius:t.borders.pillButtonBorderRadius,alignItems:"center",right:"0",transform:"translateY(-50%)",...r?{maxWidth:"1494px",minWidth:"600px"}:{maxWidth:"1036px",minWidth:"180px"},...a?{maxWidth:a}:void 0,transition:"min-width 400ms ease, max-width 400ms ease"}})),ae=(0,s.zo)("div",{display:"flex",flexShrink:0,alignSelf:"center"}),oe=(0,s.zo)("input",(e=>{let{$theme:t,$width:r}=e;return{flex:1,backgroundColor:t.colors.inputFill,...r?{width:`${r}px`}:{},appearance:"none",outline:"none","::placeholder":{...t.typography.LabelMedium,color:t.colors.contentSecondary},textOverflow:"ellipsis",overflow:"hidden"}})),ne=(0,s.zo)("button",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentTertiary,cursor:"pointer"}})),se=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{width:"1px",margin:"0 16px",backgroundColor:t.colors.borderOpaque}})),le=(0,s.zo)(ee.Z,{cursor:"pointer"}),de=e=>{const[t,r]=i.useState(!1),a=i.useRef(null),{value:o,...n}=e.getInputProps({onFocus:()=>{e.onFocus&&e.onFocus(),e.setExpandedState&&e.setExpandedState(),r(!0)},onBlur:()=>r(!1),ref:a});i.useEffect((()=>{e.expandedState&&a.current&&a?.current?.focus()}),[e.expandedState]);const s=e.expandedState&&e.query.length>0,{height:l}=(0,re.Z)(e.size);return(0,T.tZ)(T.HY,{children:(0,T.BX)(ie,{$isFocused:e.expandedState||t,$height:l,$maxWidth:"mini"===e.size?"100%":void 0,children:[(0,T.tZ)(y.IQ,{}),(0,T.tZ)(ae,{children:(0,T.tZ)(J.Z,{size:14})}),(0,T.tZ)(y.ZP,{$width:"16px"}),(0,T.tZ)(oe,{...n,value:o||"",type:"text",autoComplete:"off",name:"searchTerm",placeholder:e.placeholder,$width:e.queryWidth,onKeyDown:t=>{t.keyCode===te.q7&&e.handleEnterClick&&(e.handleEnterClick(),r(!1))}}),(0,T.tZ)(y.ZP,{$width:"8px"}),s?(0,T.BX)(T.HY,{children:[(0,T.tZ)(ne,{type:"button",onClick:()=>{e.reset(),a.current&&(a?.current?.focus(),e.setExpandedState&&e.setExpandedState())},children:(0,T.tZ)(K.v,{id:"shared.clear"})}),(0,T.tZ)(y.IQ,{})]}):null,e.onClose&&e.query.length>0?(0,T.tZ)(se,{}):null,e.onClose?(0,T.tZ)(le,{onClick:e.onClose}):null]})})};var ce=r(46280),ue=r(32762),he=r(40964);const pe=e=>{let{storeUuid:t,isSearchFeed:r,wrapperRef:$,expandedState:_,setExpandedState:C,size:z}=e;const[w,k]=(0,s.hQ)(),I=(0,u.I0)(),E=(0,o.k6)(),L=(0,a.T)(),B=(0,S.TH)(),P=(0,h.t)({dropPastOrders:!0}).data?.verticalSuggestionLists,R=(0,o.UO)(),{store:O}=(0,X.ZP)(t),D=O.data&&(0,he.A)(O.data),H=O?.data?.title||"",A=(0,V.dI)(),{desktopFeatures:M}=(0,ue.Z)();(0,i.useEffect)((()=>{P&&I((0,g.Vw)(P))}),[I,P]);const N=(0,p.ZP)();(0,i.useEffect)((()=>{N("eats:search_bar_impression")}),[N]);const{userQuery:F,vertical:G,storeSearchQuery:Y,entryPoint:Q}=(0,d.RAN)(B,["userQuery","vertical","storeSearchQuery","entryPoint"]),[q,K]=(0,i.useState)(G||j.g);(0,i.useEffect)((()=>{G&&K(G)}),[G]);const J=(0,b.Z)(),ee=Boolean(t)?c.OT.STORE_SEARCH:r?c.OT.GLOBAL_SEARCH:""!==J?c.OT.VERTICAL_FEED:c.OT.HOME_FEED,te=()=>{N("eats:search_bar_closed"),C(!1)},{query:re,results:ie,getInputProps:ae,reset:oe,placeholder:ne,getLabelProps:se,selectItem:le}=W({..."shoppingList"===Q?{initialQuery:F}:{initialQuery:F||Y},initialIsClosed:!0,searchTypeaheadPlaceholder:L("shared.searchBarHintText"),vertical:q,onSuggestionSelected:te,isMultiVerticalDesktop:!0,store:O}),pe=ie.data||[],ge=()=>{K(G),te()},me=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=(0,d.WxO)(R),r=(0,d.CiO)(B,["entryPoint","sortAndFilters","storeCatalogSections","storeCatalogSubsections","storeCatalogSectionTypes"]),i=(0,d.AC5)({location:r,args:t,storeSearchQuery:(e||re).trim(),isOfd:!D&&M.hasNewInStoreSearch});E.push(i),te(),Y!==re&&N("eats:store_search_fetch_results_enter_press",{storeUuid:O?.data?.uuid||"",storeSearchQuery:e||re})};(0,m.Z)($,(()=>{ge()}),_),(0,Z.Z)((()=>{te(),document.activeElement instanceof HTMLInputElement&&document.activeElement.blur()}));const Ze="postmates"===(0,x.Z)(),ye=Boolean(H)&&!M.hasNewInStoreSearch?L("shared.searchStoreTitle",{storeTitle:H}):ne;return(0,T.BX)(T.HY,{children:[(0,T.tZ)(ce.cI,{children:(0,T.tZ)(ce.im,{role:"search","aria-label":L("shared.searchBarHintText"),children:(0,T.BX)(l.Z,{"data-testid":"multi-vertical-desktop-in-store-search-bar-wrapper",children:[(0,T.tZ)(ce.E7,{...se(),children:ye}),(0,T.tZ)(de,{query:re,getInputProps:ae,reset:()=>{oe(),N("eats:store_search_clear",{storeUuid:O?.data?.uuid||""})},placeholder:ye,setExpandedState:()=>{N("eats:search_multi_vertical_bar_click"),N("eats:search_bar_clicked"),C(!0)},expandedState:_,handleEnterClick:()=>me(),onFocus:()=>{N("eats:store_search_grocery_entrypoint_click",{storeUuid:O?.data?.uuid||""}),re&&""!==re||A({searchSource:ee,searchDataInfoLayer:"L1",searchDataInfoTab:"SHOP"})},size:z})]})})}),_?(0,T.tZ)(T.HY,{children:(0,T.BX)(ce.F$,{$style:{marginLeft:"mini"===z?k.sizing.scale700:k.sizing.scale950},children:[(0,T.tZ)(n.zx,{kind:"tertiary",shape:"circle",title:L("close"),onClick:ge,children:(0,T.tZ)(v.Z,{size:18})}),(0,T.tZ)(f.Z,{})]})}):null,(e=>!!(e&&e.length&&e.length>0)&&Boolean(e[0]?.bloxContainer?.items))(pe)?(0,T.BX)(ce.eh,{$showPopover:_,children:[(0,T.tZ)(y.KG,{$width:Ze?ce.aG:ce.Bq}),(0,T.tZ)(ce.YD,{$showPopover:_,children:(0,T.tZ)(ce.Cz,{children:(0,T.tZ)(U,{searchSuggestBloxResponse:pe[0],handleSuggestionSelected:(e,t)=>{if(e){const r=e?.analytics?.data?.maps?.stringMap,i=r?.searchSuggestion;r&&i&&(N("eats:store_search_suggestion_click",{displaySurface:r?.displaySurface&&String(r?.displaySurface),searchSuggestion:r?.searchSuggestion&&String(r?.searchSuggestion),searchTerm:r?.searchTerm&&String(r?.searchTerm),storeUuid:r?.storeUuid&&String(r?.storeUuid),suggestionType:r?.suggestionType&&String(r?.suggestionType),itemPosition:t}),le(i),me(i))}}})})}),(0,T.tZ)(y.KG,{$width:ce.Od})]}):null]})}},46280:(e,t,r)=>{r.d(t,{E7:()=>oe,YD:()=>de,sA:()=>te,ag:()=>q,p5:()=>j,qX:()=>ee,aV:()=>Q,aG:()=>G,Od:()=>Y,Bq:()=>F,FE:()=>W,bf:()=>se,vr:()=>ie,F$:()=>re,eh:()=>le,cI:()=>ae,kN:()=>ne,Cz:()=>K,im:()=>J,ZP:()=>ce});var i=r(91931),a=r(15208),o=r(94579),n=r(1795),s=r(64388),l=r(70940),d=r(74369),c=r("__fusion__476"),u=r(31248),h=r(97420),p=r(9071),g=r(52419),m=r(96965),Z=r(93866),y=r(83563),v=r(65466),f=r(639),x=r(53308),b=r(36278),S=r(54176),$=r(87891),_=r(54669),C=r(34626),z=r(4525),w=r(28222),k=r(80165),T=r(78034),I=r(57820),E=r(69630),L=r(46857),B=r(929),P=r(33535),R=r(19889),O=r(57955),D=r(32762),H=r(46294),A=r(59924);const M=e=>{let{shouldNotRedirectToHomeFeed:t,showDiningMode:r,showCart:i,isSearchFeed:a,showSigninSignup:o,customizedDiningModeToggle:n,logSignInSignUpClick:s,campaign:l,storeUuid:M,isSchedulable:V}=e;const{user:N}=(0,C.Z)(),U=(0,x.I0)(),X=(0,w.Z)(),F=(0,_.Z)(),G=(0,$.t)({dropPastOrders:!0}).data?.verticalSuggestionLists,Y=(0,P.ZP)();(0,d.useEffect)((()=>{G&&U((0,T.Vw)(G))}),[U,G]),(0,d.useEffect)((()=>{Y("eats:search_bar_impression")}),[Y]);const q=(0,k.WI)("header-location-typeahead"),{closeAndUpdate:j}=(0,z.Z)(),K=(0,E.Z)(),[ie,ae]=(0,d.useState)(!1),oe=Boolean(M),{feed:ne}=(0,S.Z)(),{isStoreOfdRedesignPhase2XpEnabled:se}=(0,D.Z)();let le;le=K?(0,A.tZ)(I.Z,{startShoppingRedirect:!a&&!oe}):(0,A.tZ)(h.Z,{});const de=c.useRef(null);(0,R.Z)((()=>{ae(!1)}));const{headerHeight:ce}=(0,B.Z)(),ue=F?.address.address1||"";let he;return he=se?(0,A.BX)(A.HY,{children:[(0,A.tZ)(O.Z,{}),(0,A.tZ)(te,{})]}):(0,A.BX)(A.HY,{children:[(0,A.tZ)(b.ZP,{$width:"64px"}),(0,A.tZ)(ee,{children:(0,A.tZ)(f.Z,{registerRef:q,onLocationSelected:e=>{j(e,void 0,t)},initialQuery:ue,id:"header"})}),(0,A.tZ)(te,{})]}),(0,A.tZ)(Q,{$showOverlay:ie,children:(0,A.tZ)(J,{ref:de,children:(0,A.BX)(W,{$headerHeight:ce,children:[X?null:(0,A.BX)(A.HY,{children:[(0,A.tZ)(g.Z,{}),(0,A.tZ)(b.ZP,{$width:"32px"}),(0,A.tZ)(y.Z,{}),(0,A.tZ)(b.ZP,{$width:se&&!F?"8px":"40px"})]}),F?(0,A.BX)(A.HY,{children:[ie?null:(0,A.BX)(A.HY,{children:[r?(0,A.BX)(A.HY,{children:[n||(0,A.tZ)(p.Z,{isDisabled:ne.isLoading}),(0,A.tZ)(b.ZP,{$width:"16px"})]}):null,(0,A.tZ)(m.Z,{size:"large",storeUuid:M,isSchedulable:V}),(0,A.tZ)(b.ZP,{$width:"48px"})]}),X?null:(0,A.tZ)(H.Z,{wrapperRef:de,expandedState:ie,setExpandedState:ae,isSearchFeed:a,storeUuid:M})]}):he,(0,A.tZ)(re,{children:ie?null:(0,A.BX)(A.HY,{children:[F||i?(0,A.tZ)(u.Z,{}):null,(0,A.tZ)(A.HY,{children:le}),(0,A.tZ)(Z.Z,{}),N.data?.isLoggedIn?null:(0,A.BX)(A.HY,{children:[(0,A.tZ)(b.ZP,{$width:"24px"}),o?(0,A.tZ)(v.m,{campaign:l}):(0,A.tZ)(L.Z,{campaign:l,beforeClick:()=>{s&&s("signin","header")}})]})]})})]})})})};var V=r(3641);const N=(0,i.zo)("div",{flex:"1 0 0"}),U=e=>{let{shouldNotRedirectToHomeFeed:t,showDiningMode:r,showCart:i,isSearchFeed:a,showSigninSignup:o,customizedDiningModeToggle:n,logSignInSignUpClick:s,campaign:l,storeUuid:x,isSchedulable:$}=e;const{user:T}=(0,C.Z)(),P=(0,w.Z)(),R=(0,_.Z)(),H=(0,k.WI)("header-location-typeahead"),{closeAndUpdate:M}=(0,z.Z)(),U=(0,E.Z)(),[X,F]=(0,d.useState)(!1),G=Boolean(x),{feed:Y}=(0,S.Z)(),{isStoreOfdRedesignPhase2XpEnabled:q}=(0,D.Z)();let j;j=U?(0,A.tZ)(I.Z,{startShoppingRedirect:!a&&!G}):(0,A.tZ)(h.Z,{});const K=c.useRef(null),{headerHeight:ie}=(0,B.Z)(),ae=R?.address?.address1||"";let oe;return oe=q?(0,A.BX)(A.HY,{children:[(0,A.tZ)(O.Z,{}),(0,A.tZ)(te,{})]}):(0,A.BX)(A.HY,{children:[(0,A.tZ)(b.ZP,{$width:"64px"}),(0,A.tZ)(ee,{children:(0,A.tZ)(f.Z,{registerRef:H,onLocationSelected:e=>{M(e,void 0,t)},initialQuery:ae,id:"header"})}),(0,A.tZ)(te,{})]}),(0,A.tZ)(Q,{$showOverlay:X,children:(0,A.tZ)(J,{ref:K,children:(0,A.BX)(W,{$headerHeight:ie,children:[P?null:(0,A.BX)(A.HY,{children:[(0,A.tZ)(g.Z,{}),(0,A.tZ)(b.ZP,{$width:"32px"}),(0,A.tZ)(y.Z,{}),(0,A.tZ)(b.ZP,{$width:q&&!R?"8px":"24px"})]}),R?(0,A.BX)(A.HY,{children:[X?null:(0,A.BX)(A.HY,{children:[r?(0,A.BX)(A.HY,{children:[n||(0,A.tZ)(p.Z,{isDisabled:Y.isLoading}),(0,A.tZ)(b.ZP,{$width:"16px"})]}):null,(0,A.tZ)(m.Z,{size:"large",storeUuid:x,isSchedulable:$}),P?(0,A.tZ)(N,{}):(0,A.tZ)(b.ZP,{$width:"16px"})]}),P?null:(0,A.tZ)(V.Z,{wrapperRef:K,expandedState:X,setExpandedState:F,isSearchFeed:a,storeUuid:x})]}):oe,X?null:(0,A.BX)(re,{children:[R||i?(0,A.tZ)(u.Z,{}):null,(0,A.tZ)(A.HY,{children:j}),(0,A.tZ)(Z.Z,{}),T.data?.isLoggedIn?null:(0,A.BX)(A.HY,{children:[(0,A.tZ)(b.ZP,{$width:"24px"}),o?(0,A.tZ)(v.m,{campaign:l}):(0,A.tZ)(L.Z,{campaign:l,beforeClick:()=>{s&&s("signin","header")}})]})]})]})})})};var X=r(29230);const F="282px",G="260px",Y="148px",Q=(0,i.zo)("div",(e=>{let{$theme:t,$showOverlay:r}=e;return{...r?{...t.overlays.full,position:"fixed",top:0,left:0,right:0,height:"100vh",zIndex:o.I_.modal,overflow:"auto",transition:"all 0.5s ease"}:{}}})),q=(0,i.zo)("div",(e=>{let{$theme:t,$showOverlay:r}=e;return{...r?{...t.overlays.full,backgroundColor:"rgba(0, 0, 0, 0.08)",position:"fixed",top:0,left:0,right:0,height:"100vh",zIndex:o.I_.modal,overflow:"auto",transition:`all 0.5s ${t.animation.easeOutQuinticCurve}`}:{transition:`all 0.5s ${t.animation.easeOutQuinticCurve}`}}})),W=(0,i.w1)(a.Z,(e=>{let{$theme:t,$headerHeight:r}=e;return{color:t.colors.onHeader,position:"relative",display:"flex",flexDirection:"row",alignItems:"center",height:`${r}px`}})),j=(0,i.w1)(n.Z,{margin:"40px auto"}),K=(0,i.zo)("div",(e=>{let{$needsLeftMargin:t}=e;return{minHeight:"472px",marginLeft:t?"16px":"-16px",maxHeight:"calc(100vh - 280px)",overflowY:"auto"}})),J=((0,i.zo)("div",{position:"relative"}),(0,i.zo)("button",{display:"flex",flexDirection:"row",cursor:"pointer",whiteSpace:"nowrap"}),(0,i.zo)("div",(e=>{let{$theme:t,$isTransparent:r,$hasBorderBottom:i}=e;return{width:"100%",background:r?"transparent":t.colors.backgroundPrimary,borderBottom:`1px solid ${i?t.colors.borderOpaque:"transparent"}`,margin:"0 auto",transition:o.pB.default}}))),ee=(0,i.zo)("div",{width:"100%",maxWidth:"722px"}),te=(0,i.zo)("div",{flex:1}),re=(0,i.zo)("div",{justifyContent:"flex-end",display:"flex",flexGrow:0,alignItems:"center"}),ie=(0,i.zo)("div",(e=>{let{$theme:t,$expanded:r}=e;const i={display:"flex",minWidth:r?"600px":`${X.Kv.searchMinWidth}px`,transition:`all ${t.animation.timing300} ${t.animation.easeOutQuinticCurve}`,flex:"1"};return r?{...i,alignSelf:"flex-start",flexDirection:"column"}:i})),ae=(0,i.zo)("div",{flex:"1 0",display:"flex",width:"100%",minWidth:`${X.Kv.searchMinWidth}px`}),oe=((0,i.zo)("button",{display:"flex",flexDirection:"row",cursor:"pointer",whiteSpace:"nowrap"}),(0,i.zo)("label",o.E2)),ne=(0,i.zo)("div",(e=>{let{$theme:t,$expanded:r}=e;const i={flex:"1",paddingLeft:t.sizing.scale500,paddingRight:t.sizing.scale500,backgroundColor:t.colors.backgroundPrimary,borderTopRightRadius:t.borders.radius500,borderTopLeftRadius:t.borders.radius500};return r?{...i,paddingTop:t.sizing.scale500,zIndex:o.I_.modal,marginTop:t.sizing.scale0}:i})),se=(0,i.zo)("div",(e=>{let{$theme:t,$showPopover:r}=e;return{display:"flex",zIndex:o.I_.modal,background:t.colors.backgroundPrimary,maxWidth:"1920px",borderBottomRightRadius:t.borders.radius500,borderBottomLeftRadius:t.borders.radius500,borderBottomColor:t.colors.borderOpaque,borderBottomStyle:"solid",borderBottomWidth:"1px",transform:"translateY(0)",overflow:"hidden",...r?{opacity:"1",width:"100%",maxHeight:"calc(100vh - 180px)"}:{maxHeight:"0",visibility:"hidden",opacity:"0",width:"0px"},transition:`opacity 0.5s ${t.animation.easeOutQuinticCurve}, visibility 0.5s ${t.animation.easeOutQuinticCurve}`}})),le=(0,i.zo)("div",(e=>{let{$theme:t,$showPopover:r}=e;return{display:"flex",flexDirection:"row",zIndex:o.I_.modal,position:"absolute",background:t.colors.backgroundPrimary,width:"100%",maxWidth:"1920px",top:"100%",right:"0",left:"0",margin:"0 auto",boxShadow:"0 6px 4px -4px rgba(0, 0, 0, 0.1)",borderBottomColor:t.colors.borderOpaque,borderBottomStyle:"solid",borderBottomWidth:"1px",transform:"translateY(0)",overflow:"hidden",...r?{opacity:"1"}:{height:"0",visibility:"hidden",opacity:"0"},transition:"all 0.5s ease"}})),de=(0,i.zo)("div",(e=>{let{$theme:t,$showPopover:r,$needsPadding:i}=e;return{display:"flex",width:"100%",flexDirection:"column",paddingLeft:i?t.sizing.scale1000:"0",paddingRight:i?t.sizing.scale1000:"0",...r?{visibility:"visible"}:{visibility:"hidden"}}})),ce=e=>{const{store:t}=(0,s.ZP)(e.storeUuid),r=t?.data?.title||"",i=(0,l.Z)(t?.data?.uuid||""),a=Boolean(r);return(0,A.tZ)(A.HY,{children:a&&i?(0,A.tZ)(M,{...e}):(0,A.tZ)(U,{...e})})}},19566:(e,t,r)=>{r.d(t,{Z:()=>v});var i=r(74369),a=r(94813),o=r(15070),n=r(71454),s=r.n(n),l=r(91931),d=r(47986),c=r(92060),u=r(87891),h=r(33535),p=r(94579),g=r(59924);const m=(0,l.zo)("ul",(e=>{let{$theme:t,$width:r}=e;return{display:"flex",textAlign:"center",marginBottom:"8px",width:r?`${r}px`:"100%",height:`${p.mc}px`,background:t.colors.backgroundPrimary}})),Z=(0,l.zo)("li",(e=>{let{$theme:t,$isSelected:r}=e;return{...t.typography.LabelSmall,borderBottom:`5px solid ${r?t.colors.black:t.colors.borderOpaque}`,alignSelf:"center",padding:t.sizing.scale600,color:r?t.colors.contentPrimary:t.colors.contentTertiary,cursor:"pointer",":hover":{background:t.colors.menuFillHover}}})),y=(0,l.zo)("li",(e=>{let{$theme:t}=e;return{borderBottom:`5px solid ${t.colors.borderOpaque}`,flexGrow:1,padding:"24px",alignSelf:"center"}})),v=e=>{const t=(0,a.TH)(),r=(0,h.ZP)(),n=(0,o.v)((e=>{let{multiVertical:t}=e;return t.verticalList})),{userQuery:l}=(0,d.RAN)(t,["userQuery"]),[p,v]=(0,i.useState)(!1),f=(0,u.t)({dropPastOrders:!0}),x=(0,i.useCallback)((e=>f?.data?.verticalSearchHomeResults[e]?.length||0),[f]),b=(0,i.useMemo)((()=>({verticalList:JSON.stringify(n.map((e=>e.verticalType))),type:"TAB",surface:e.surface,searchTermText:l,previousSelectedVertical:e.selectedVertical||c.g,selectedVertical:e.selectedVertical||c.g})),[n,e.selectedVertical,e.surface,l]),S=(0,i.useCallback)((i=>()=>{e.onSelect&&e.onSelect(i),r("eats:search_vertical_tab_tapped",{mvsMeta:{...b,selectedVertical:i,page:t.pathname}})}),[e,r,b,t.pathname]),$=s()((()=>{r("eats:search_vertical_tab_scrolled",{mvsMeta:b})}),1e3);return(0,i.useEffect)((()=>{f.data&&!p&&e.expandedState&&(v(!0),r("eats:global_search_zero_state_viewed",{numberOfSuggestions:x(b.selectedVertical),mvsMeta:{verticalList:b.verticalList,selectedVertical:b.selectedVertical}}))}),[f,r,x,b.verticalList,b.selectedVertical,p,e.expandedState]),(0,i.useEffect)((()=>{r("eats:search_vertical_tab_view",{mvsMeta:b})}),[]),n.length>1?(0,g.BX)(m,{$width:e.tableWidth,onScroll:$,children:[n.map(((t,r)=>(0,g.tZ)(Z,{onClick:S(t.verticalType),$isSelected:t.verticalType===(e.selectedVertical||c.g),children:t.title},r))),(0,g.tZ)(y,{})]}):null}},53685:(e,t,r)=>{r.d(t,{C:()=>i});const i=e=>{let t=0;for(const r of e)"store"!==r.type&&"searchHistory"!==r.type||t++;return t}},7819:(e,t,r)=>{r.d(t,{C:()=>n});var i=r(40841),a=r(47986),o=r(16372);function n(e,t,r){return e.actionUrl?t?{type:"anchor",href:(0,i.W)(e.actionUrl)}:{type:"anchor",href:e.actionUrl}:{type:"link",to:(0,a.gfM)(r,{storeSlug:e.slug,storeUuid:e.uuid,newQueryParams:{searchSource:o.xH.SEARCH_SUGGESTION}})}}},44133:(e,t,r)=>{r.d(t,{Z:()=>u});var i=r(74369),a=r(69420),o=r(94813),n=r(32711),s=r(70496),l=r(68093),d=r(47986),c=r(78284);const u=e=>{let{query:t,delay:r=500}=e;const u=(0,a.k6)(),h=(0,o.TH)(),p=(0,s.Z)(),g=(0,l.Z)(t,r),[m,Z]=(0,i.useState)(!1),[y,v]=(0,i.useState)({}),[f,x]=(0,i.useState)([]),{fetchLocations:b,handleLocationSelected:S,areLocationDetailsLoading:$}=(0,n.Z)({onLocationSelected:e=>{x([]),p(e),u.replace((0,d.DZj)({location:h,newQueryParams:{place:(0,c.aj)((0,c.VN)(e))}}))}}),_=(0,i.useRef)(b);_.current=b;const C=(0,i.useRef)(y);return C.current=y,(0,i.useEffect)((()=>{if(g.length>3){const e=C.current[g];e?x(e):(Z(!0),_.current(g).then((e=>{v((t=>({...t,[g]:e}))),x(e)})).finally((()=>{Z(!1)})))}else 0===g.length&&x([])}),[g]),{searchResults:y,locationSuggestions:f,handleLocationSelected:S,isLoading:m,hasLoaded:!m&&C.current[g]&&g.length>3,areLocationDetailsLoading:$}}},32762:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(60849),a=r(41063),o=r(43832),n=r(54669),s=r(34626);const l=()=>{const e=(0,i.ip)({...a.v.store_ofd_redesign,defaultValue:!1}),t=(0,i.ip)({...a.v.store_ofd_redesign_phase_2,defaultValue:!1}),r=(0,i.ip)({...a.v.store_ofd_redesign_phase_3,defaultValue:!1}),l=(0,i.ip)({...a.v.store_rating_redesign,defaultValue:!1}),d=(0,i.ip)({...a.v.store_ofd_redesign_search_results,defaultValue:!1}),{isGrStore:c,store:u}=(0,o.QT)(),{user:h}=(0,s.Z)(),p=h.data?.isLoggedIn,g=(0,n.Z)(),m=Boolean(!c&&t&&!g&&!p),Z=Boolean(!c&&r&&!p),y=Boolean(!c&&r&&p),v=m||Z,f=m||Z||y,x=f,b=f,S=m||Z,$=m||Z,_=l&&f,C=m||Z,z=y,w=Boolean(u?.data)&&d&&(m||Z||y),k=m||Z||y,T=y,I=m||Z||y,E=y,L=y,B=!c&&"NEW_VERTICALS"===u?.data?.headerBrandingInfo?.headerType&&x,P=Boolean((u?.data?.featuredReviews?.length||0)>=2&&u?.data?.rating),R=Boolean(u?.data?.nuggets?.length||0);return{isStoreOfdRedesignXpEnabled:e,isStoreOfdRedesignPhase2XpEnabled:t,isStoreOfdRedesignPhase3XpEnabled:r,isStoreRatingRedesignEnabled:l,isStoreOfdRedesignSearchResultsEnabled:d,desktopFeatures:{hasStickyHorizontalMenuNav:C,hasStickyVerticalMenuNav:z,hasStoreInfoSection:v,hasNewHeader:x,hasNewPageWrapper:f,hasDisclaimerAtBottom:b,hasNewBreadcrumbs:S,hasNewFaqSection:$,hasNewReviewsLayout:_,hasNewInStoreSearch:w,overwriteHorizontalGridColumns:k,moveTopExploreMoreStoresToCatalog:T,horizontalGridColumns:m||Z?5:4,hasNewLoader:I,isLegacyHeaderWithBrandingInfo:B,storeInfoConfig:{infoCardOrientation:P||R?"portrait":"landscape",showBrandingInfoAndControls:Boolean(!P&&g&&!B),showDescription:Boolean(u?.data?.seoMeta?.content&&!u?.data?.optoutRestaurantExperiments?.optoutMenuExperiments?.optoutAllExperiments),showReviews:P},hasDeliveryRowControls:E,hasStoreBannersInCatalogColumn:L}}}},87891:(e,t,r)=>{r.d(t,{t:()=>n});var i=r(89151),a=r(2237),o=r(62459);function n(e,t){const r=(0,o.Z)("getSearchHomeV2"),n=(0,a.H)("getSearchHomeV2",e);return(0,i.useQuery)({queryKey:n,queryFn:e=>{let{queryKey:t}=e;return r.request("getSearchHomeV2",t[1])},...t?.queryObserverOptions})}},24187:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(74369);function a(){const[e,t]=(0,i.useState)(null),r=(0,i.useCallback)((r=>{if(r){const i=r.getBoundingClientRect();e&&e?.height===i.height&&e?.width===i.width||t(i)}}),[e]);return[e,r]}},68093:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(74369);function a(e,t){const[r,a]=(0,i.useState)(e);return(0,i.useEffect)((()=>{const r=setTimeout((()=>{a(e)}),t);return()=>{clearTimeout(r)}}),[t,e]),r}},4525:(e,t,r)=>{r.d(t,{Z:()=>h});var i=r("__fusion__476"),a=r(69420),o=r(94813),n=r(47986),s=r(33535),l=r(54669),d=r(70496),c=r(34626);const u={location:"eats:enter_delivery_address_start",time:"",search:"eats:search_start",user:"eats:user_menu_open",diningMode:"eats:dining_mode_menu_open"};function h(){const[e,t]=i.useState(null),r=(0,o.TH)(),h=(0,a.k6)(),p=(0,s.ZP)(),g=(0,l.Z)(),m=(0,d.Z)(),{user:Z}=(0,c.Z)(),y=()=>t(null);return{activeMenu:e,openMenu:e=>{const r=e&&u[e];r&&p(r),t(e)},closeMenu:y,closeAndUpdate:(e,t,i)=>{if(y(),m(e,t),!e||i)return;if(e.address.title!==g?.address.title)return h.push((0,n.dat)(r,{deliveryLocation:e}));const a=(0,n.RAN)(r,["place","startTime"]);(a.place||a.startTime)&&h.push((0,n.m0g)(r,e,t||{asap:!0}))},user:Z}}},68568:(e,t,r)=>{r.d(t,{Z:()=>c});var i=r(74369),a=r(14016),o=r(32711),n=r(39697),s=r(20568),l=r(34626),d=r(4865);const c=e=>{const t=(0,a.T)(),{fetchLocations:r,handleLocationSelected:c,areLocationDetailsLoading:u,placeholder:h}=(0,o.Z)({onLocationSelected:e.onLocationSelected}),{user:p}=(0,l.Z)(),g=(0,s.Z)("getDeliveryLocationsV2"),m=i.useCallback((async()=>{const e=await g({locationTypes:["SUGGESTED"]});return(0,d.BU)(e?.deliveryLocations?.SUGGESTED||[])}),[g]),Z=t=>t.isTaggedLocation?(e.onLocationSelected(t.address),Promise.resolve()):c(t),y=(e,t)=>{const r=t?.[0];r&&Z(r)},v=i.useCallback((e=>{let{results:r,query:i}=e;return 0===r.length?i?t("components.DeliveryLocationSearch.noResults"):"":i?t("components.MarketplaceSearch.resultsDescription",{numResults:r.length,searchTerm:i}):t("shared.searchResultsCount",{resultsCount:r.length})}),[]),{query:f,results:x,getLabelProps:b,getInputProps:S,getMenuProps:$,getItemProps:_,reset:C,highlightedIndex:z,isOpen:w,openMenu:k}=(0,n.Z)({id:`location-typeahead-${e.id}`,initialQuery:e.initialQuery,fetchResults:e=>p.data?.isLoggedIn&&0===e.length?m():r(e),onResultSelected:Z,getQueryFromResult:e=>e?e.isTaggedLocation?e.address.address.address1:e?.addressLine1||"":"",initialIsClosed:e.initialIsClosed,onEnterKeyWithNoSelectedResult:y,getA11yStatusMessage:v});return{query:f,locations:x,getLabelProps:b,getInputProps:S,getMenuProps:$,getItemProps:_,reset:C,highlightedIndex:z,placeholder:h,isLoading:u||x.isLoading,showTryAgainMessage:Boolean(f&&x.hasLoaded&&x.data&&0===x.data.length),isOpen:w,openMenu:k,onSubmitWithNoSelectedResult:y}}},32711:(e,t,r)=>{r.d(t,{Z:()=>g});var i=r(74369),a=r(14016),o=r(20568),n=r(71076),s=r(55758),l=r(55546),d=r(33535),c=r(94813),u=r(97130),h=r(60849),p=r(4939);const g=e=>{let{onLocationSelected:t,overrideDiningMode:r,onLocationSelectedV2:g}=e;const{isAddressPickerRevampEnabled:m}=(0,u.X)(),[Z,y]=(0,i.useState)(!1),v=(0,a.T)(),f=(0,s.d)(),x=r??f;let b;const S=(0,d.ZP)(),$=(0,c.TH)().pathname,_=(0,o.Z)("mapsSearchV1"),C=(0,h.ip)({...p.r.enable_maps_search,defaultValue:!1});b=x===l.k5.DINE_IN?v("shared.enterDineInAddress"):x===l.k5.PICKUP?v("shared.enterPickupAddress"):x===l.k5.DELIVERY_API?v("shared.enterFullDeliveryAddress"):v("shared.enterDeliveryAddress");const z=(0,o.Z)("getLocationAutocompleteV1"),w=(0,o.Z)("getDeliveryLocationV1"),k=(0,o.Z)("getDeliveryLocationV2");return{fetchLocations:e=>e?C?_({query:e}):z({query:e}):Promise.resolve([]),handleLocationSelected:(0,i.useCallback)((e=>(y(!0),g&&m?k({placeId:e.id,provider:e.provider,source:"manual_auto_complete"}).then((e=>{let{deliveryLocation:t}=e;t&&(y(!1),S("eats:location_manager_typeahead_result_click",{originType:"user_autocomplete",page:$,userState:t?.deliveryConfig?.analytics?.user_state}),g(t))})).catch((e=>{e instanceof n.F||y(!1)})):w({placeId:e.id,provider:e.provider,source:"manual_auto_complete"}).then((e=>{y(!1),S("eats:location_manager_typeahead_result_click",{originType:e.originType,page:$,userState:e.userState}),t?.(e)})).catch((e=>{e instanceof n.F||y(!1)})))),[S,w,k,m,t,g,$]),areLocationDetailsLoading:Z,placeholder:b}}},86977:(e,t,r)=>{r.d(t,{$:()=>a,E:()=>o});var i=r(49201);const a={FLAT_EARNED:"flat.earned",FLAT_UNEARNED:"flat.unearned",PERCENT_EARNED:"percent.earned",PERCENT_UNEARNED:"percent.unearned",FREE_DELIVERY_EARNED:"free_delivery.earned",FREE_DELIVERY_UNEARNED:"free_delivery.unearned",DISCOUNT_DELIVERY_EARNED:"discount_delivery.earned",DISCOUNT_DELIVERY_UNEARNED:"discount_delivery.unearned"};function o(e,t,r,a){const o=e.discountInfo;if(!o||null===o.promoType||null===e.minBasketSizeConstraintInDecimal)return null;const n=e.minBasketSizeConstraintInDecimal||0,s=o.valueInCents||0,l=o.maxValueInCents||0,d=o.promoType,c=(0,i.xG)(a,t,s),u=n-r,h=(0,i.xG)(a,t,u);return u>0?function(e,t,r,a,o){switch(a){case"FLAT":return{key:"FLAT_UNEARNED",data:{x:t,y:r}};case"PERCENT":return{key:"PERCENT_UNEARNED",data:{x:t,y:(0,i.rl)(o,e/100)}};case"FREE_DELIVERY":return{key:"FREE_DELIVERY_UNEARNED",data:{x:t,y:r}};case"DISCOUNT_DELIVERY":return{key:"DISCOUNT_DELIVERY_UNEARNED",data:{x:t,y:r}};default:return null}}(s,h,c,d,a):function(e,t,r,a,o,n,s){switch(a){case"FLAT":return{key:"FLAT_EARNED",data:{x:t}};case"PERCENT":{const t=o*e/100;if(t>=r)return{key:"FLAT_EARNED",data:{x:(0,i.xG)(n,s,r)}};const a=t/o;return{key:"PERCENT_EARNED",data:{x:(0,i.rl)(n,a||0)}}}case"FREE_DELIVERY":return{key:"FREE_DELIVERY_EARNED",data:{x:t}};case"DISCOUNT_DELIVERY":return{key:"DISCOUNT_DELIVERY_EARNED",data:{x:t}};default:return null}}(s,c,l,d,r,a,t)}}}]);