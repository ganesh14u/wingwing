"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[94324],{74748:(e,t,r)=>{r.d(t,{XH:()=>i,bE:()=>n,cz:()=>o});const i=Object.freeze({UNKNOWN:"UNKNOWN",ACK_ON_COMPLETION:"ACK_ON_COMPLETION"}),o=Object.freeze({UNKNOWN:"UNKNOWN",ALCOHOL_EXCEEDED_PER_ORDER_LIMIT:"ALCOHOL_EXCEEDED_PER_ORDER_LIMIT",MISSING_REQUIRED_FOOD_WITH_ALCOHOL:"MISSING_REQUIRED_FOOD_WITH_ALCOHOL",MAX_FARE_LIMIT_EXCEEDED:"MAX_FARE_LIMIT_EXCEEDED",ALCOHOL_WITH_CASH:"ALCOHOL_WITH_CASH",PICKUP_WITH_CASH:"PICKUP_WITH_CASH",PRODUCT_NOT_FOUND_AT_ORDER:"PRODUCT_NOT_FOUND_AT_ORDER",CART_ITEM_INVALID_UUID:"CART_ITEM_INVALID_UUID",CART_ITEM_SUSPENDED:"CART_ITEM_SUSPENDED",ALCOHOL_WITH_LEAVE_AT_DOOR:"ALCOHOL_WITH_LEAVE_AT_DOOR",CASH_WITH_LEAVE_AT_DOOR_MANDATORY:"CASH_WITH_LEAVE_AT_DOOR_MANDATORY",CASH_WITH_LEAVE_AT_DOOR_OPTIONAL:"CASH_WITH_LEAVE_AT_DOOR_OPTIONAL",BYOC_WITH_LEAVE_AT_DOOR:"BYOC_WITH_LEAVE_AT_DOOR",FORCE_LEAVE_AT_DOOR:"FORCE_LEAVE_AT_DOOR",STORE_UNAVAILABLE:"STORE_UNAVAILABLE",FULFILLMENT_ISSUE_NOT_RESOLVED:"FULFILLMENT_ISSUE_NOT_RESOLVED",NO_SUCH_STORE:"NO_SUCH_STORE",ITEMS_FROM_TOO_MANY_STORES:"ITEMS_FROM_TOO_MANY_STORES",INVALID_DELIVERY_TIME_RANGE:"INVALID_DELIVERY_TIME_RANGE",INVALID_DISPATCH_RADIUS:"INVALID_DISPATCH_RADIUS",INVALID_PAYMENT_PROFILE:"INVALID_PAYMENT_PROFILE",UNSUPPORTED_PAYMENT_PROFILE:"UNSUPPORTED_PAYMENT_PROFILE",STORE_CLOSED_CHECKOUT:"STORE_CLOSED_CHECKOUT",DINING_MODE_NOT_AVAILABLE:"DINING_MODE_NOT_AVAILABLE",SCHEDULE_ORDER_UNAVAILABLE:"SCHEDULE_ORDER_UNAVAILABLE",BACKGROUND_CHECK_FAILED:"BACKGROUND_CHECK_FAILED",UNAVAILABLE_ITEMS:"UNAVAILABLE_ITEMS",ITEMS_WITH_UNAVAILABLE_CUSTOMIZATIONS:"ITEMS_WITH_UNAVAILABLE_CUSTOMIZATIONS",MISCONFIGURED_ITEMS:"MISCONFIGURED_ITEMS",RADIUS_REDUCED_BY_SURGE:"RADIUS_REDUCED_BY_SURGE",GEOBOUND_BLOCKED:"GEOBOUND_BLOCKED",SCHEDULED_ORDER_NOT_EDITABLE:"SCHEDULED_ORDER_NOT_EDITABLE",INVALID_BASKET:"INVALID_BASKET",PIN_ORDER_WITH_LEAVE_AT_DOOR:"PIN_ORDER_WITH_LEAVE_AT_DOOR",NO_PAYMENT_METHOD:"NO_PAYMENT_METHOD",MARKETPLACE_HOURS_BLOCKED:"MARKETPLACE_HOURS_BLOCKED",STORE_UNAVAILABLE_BUT_SCHEDULABLE:"STORE_UNAVAILABLE_BUT_SCHEDULABLE",ALCOHOL_ORDER_BEYOND_SALES_HOURS:"ALCOHOL_ORDER_BEYOND_SALES_HOURS",INVALID_LEAVE_AT_DOOR_DELIVERY:"INVALID_LEAVE_AT_DOOR_DELIVERY",SCHEDULED_TIME_IN_THE_PAST:"SCHEDULED_TIME_IN_THE_PAST",ITEM_LIMITS_EXCEEDED:"ITEM_LIMITS_EXCEEDED",SURGE_MINIMUM_BASKET_NOT_MET:"SURGE_MINIMUM_BASKET_NOT_MET",NUDGE_TO_SCHEDULE:"NUDGE_TO_SCHEDULE",CART_LIMIT_EXCEEDED:"CART_LIMIT_EXCEEDED",CLOSING_TOO_SOON_TO_DELIVER:"CLOSING_TOO_SOON_TO_DELIVER",FARE_THRESHOLD_EXCEEDED:"FARE_THRESHOLD_EXCEEDED",LOCATION_INPUT_REQUIRED:"LOCATION_INPUT_REQUIRED",BUNDLE_NOT_DELIVERABLE:"BUNDLE_NOT_DELIVERABLE",LOCATION_CONFIRMATION_REQUIRED:"LOCATION_CONFIRMATION_REQUIRED",MEMBERSHIP_EXCLUSIVE_SHOPPING_REQUIRED:"MEMBERSHIP_EXCLUSIVE_SHOPPING_REQUIRED",HEALTH_CARE_CARD_INELIGIBLE_ITEMS:"HEALTH_CARE_CARD_INELIGIBLE_ITEMS",HEALTH_CARE_CARD_STORE_NOT_SUPPORTED:"HEALTH_CARE_CARD_STORE_NOT_SUPPORTED",INVALID_GIFT_ORDER:"INVALID_GIFT_ORDER",TAX_PROFILE_REQUIRED:"TAX_PROFILE_REQUIRED",CANNOT_REMOVE_ALL_ITEMS:"CANNOT_REMOVE_ALL_ITEMS",LIVE_ORDER_EDIT_UNSUCCESSFUL:"LIVE_ORDER_EDIT_UNSUCCESSFUL",LIVE_ORDER_EDIT_AFTER_SHOPPING_COMPLETE:"LIVE_ORDER_EDIT_AFTER_SHOPPING_COMPLETE",PAYMENT_RISK_FAILURE:"PAYMENT_RISK_FAILURE",BUNDLING_NO_PRIMARY_CART_ERROR:"BUNDLING_NO_PRIMARY_CART_ERROR",BANDWAGON_INVALID_COUNTDOWN_TOKEN:"BANDWAGON_INVALID_COUNTDOWN_TOKEN",LIVE_ORDER_LATE_EDIT_WARNING:"LIVE_ORDER_LATE_EDIT_WARNING",LIVE_ORDER_LATE_EDIT_UNSUCCESSFUL_WARNING:"LIVE_ORDER_LATE_EDIT_UNSUCCESSFUL_WARNING",PHONE_NUMBER_REQUIRED:"PHONE_NUMBER_REQUIRED",RESTRICTED_ITEM_UNDERAGE_USER:"RESTRICTED_ITEM_UNDERAGE_USER",UNIFIED_CHECKOUT_ACTION:"UNIFIED_CHECKOUT_ACTION",MAX_BUNDLED_DRAFT_ORDERS:"MAX_BUNDLED_DRAFT_ORDERS"}),n=(Object.freeze({UNKNOWN:"UNKNOWN",DIALOG:"DIALOG",FULL_PAGE:"FULL_PAGE"}),Object.freeze({NONE:"NONE",RECUSTOMIZE:"RECUSTOMIZE",REMOVE_ITEMS:"REMOVE_ITEMS",CLEAR_CART:"CLEAR_CART",RETRY_ESTIMATE:"RETRY_ESTIMATE",SWITCH_PAYMENT:"SWITCH_PAYMENT",ADD_PAYMENT:"ADD_PAYMENT",SWITCH_TO_DOOR_TO_DOOR:"SWITCH_TO_DOOR_TO_DOOR",SWITCH_TO_LEAVE_AT_DOOR:"SWITCH_TO_LEAVE_AT_DOOR",OPEN_DEEPLINK:"OPEN_DEEPLINK",OPEN_WEBVIEW:"OPEN_WEBVIEW",REDIRECT_TO_FEED:"REDIRECT_TO_FEED",GET_ORDER_SUMMARY:"GET_ORDER_SUMMARY",SWITCH_DINING_MODE:"SWITCH_DINING_MODE",CLEAR_CART_AND_REDIRECT_TO_FEED:"CLEAR_CART_AND_REDIRECT_TO_FEED",CLEAR_CART_AND_REDIRECT_TO_ORDERS_TAB:"CLEAR_CART_AND_REDIRECT_TO_ORDERS_TAB",CONTINUE_WITHOUT_VOUCHER:"CONTINUE_WITHOUT_VOUCHER",REMOVE_INVALID_PARTICIPANTS:"REMOVE_INVALID_PARTICIPANTS",GO_BACK:"GO_BACK",REDIRECT_TO_FEED_AND_UPDATE_FEED_ADDRESS:"REDIRECT_TO_FEED_AND_UPDATE_FEED_ADDRESS",SELECT_DIFFERENT_DELIVERY_ADDRESS:"SELECT_DIFFERENT_DELIVERY_ADDRESS",REVIEW_ITEMS:"REVIEW_ITEMS",SWITCH_TO_PICKUP:"SWITCH_TO_PICKUP",SCHEDULE_ORDER:"SCHEDULE_ORDER",GO_TO_STORE:"GO_TO_STORE",NOTIFY_WHEN_AVAILABLE:"NOTIFY_WHEN_AVAILABLE",SELECT_REPLACEMENT:"SELECT_REPLACEMENT",DEBUNDLE_AND_NAVIGATE:"DEBUNDLE_AND_NAVIGATE",SWITCH_DELIVERY_TYPE:"SWITCH_DELIVERY_TYPE",REFRESH_PRESENTATION_DATA:"REFRESH_PRESENTATION_DATA",DISCARD_EXISTING_AND_CREATE_NEW_BUNDLE:"DISCARD_EXISTING_AND_CREATE_NEW_BUNDLE",RETRY_CREATE_DRAFT_ORDER:"RETRY_CREATE_DRAFT_ORDER",CLEAR_GIFT_INFO:"CLEAR_GIFT_INFO",SELECT_TAX_PROFILE:"SELECT_TAX_PROFILE",INPUT_PHONE_NUMBER:"INPUT_PHONE_NUMBER",CANCEL_GIFT_ORDER:"CANCEL_GIFT_ORDER",SYNC_DRAFT_ORDERS:"SYNC_DRAFT_ORDERS",DISCARD_DRAFT_ORDERS_AND_NAVIGATE:"DISCARD_DRAFT_ORDERS_AND_NAVIGATE",RETRY_CREATE_DRAFT_ORDER_AND_UPDATE_BUNDLE_GROUP:"RETRY_CREATE_DRAFT_ORDER_AND_UPDATE_BUNDLE_GROUP"}));Object.freeze({CHECKOUT_ORDER_ERROR:"CHECKOUT_ORDER_ERROR"}),Object.freeze({DEFAULT:"DEFAULT",ALCOHOL:"ALCOHOL"}),Object.freeze({UNIFIED_CHECKOUT_FAILURE_ERROR:"UNIFIED_CHECKOUT_FAILURE_ERROR"}),Object.freeze({DEFAULT:"DEFAULT",CVV_VERIFY:"CVV_VERIFY",BAV_VERIFY:"BAV_VERIFY",CARDIO:"CARDIO"}),Object.freeze({ORDER_ALERT_ERROR:"ORDER_ALERT_ERROR"})},5137:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(91931),o=r(33497),n=r(57444);const a=(0,i.zo)("button",(e=>({...(0,o.Z)({$theme:e.$theme,radius:e.radius}),textAlign:"center",color:e.$theme.colors.negative,...e.disabled?(0,n.Z)(e.$theme):{}})))},54240:(e,t,r)=>{r.d(t,{Z:()=>I});var i=r(91931),o=r(62091),n=r(71110),a=r(59924);const l=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",position:"relative",height:"auto",maxWidth:t.sizing.scale4800,cursor:"pointer"}})),s=(0,i.zo)("h2",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.primary600}})),d=(0,i.zo)("span",(e=>{let{$theme:t}=e;return{...t.typography.LabelSmall}})),c=(0,i.zo)(o.Z,{objectFit:"contain"}),u=(0,i.zo)("div",{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.02)"}),_=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{position:"relative",borderRadius:t.borders.radius400,overflow:"hidden"}})),E=(0,n.pZ)(r(19702)),I=e=>{let{item:t,onProductSelect:r}=e;const[,o]=(0,i.hQ)(),n=t.imageURL||E;return(0,a.tZ)(a.HY,{children:(0,a.BX)(l,{onClick:r,children:[(0,a.BX)(_,{children:[(0,a.tZ)(c,{src:n,loading:"lazy",height:"148px",width:o.sizing.scale4800}),(0,a.tZ)(u,{})]}),(0,a.tZ)(d,{children:t.formattedPrice}),(0,a.tZ)(s,{children:t.title})]})})}},61552:(e,t,r)=>{r.d(t,{Z:()=>g});var i=r("__fusion__476"),o=r(91931),n=r(40606),a=r(93801),l=r(92292),s=r(52298),d=r(47162),c=r(38349),u=r(22717),_=r(25598),E=r(30110),I=r(1636),m=r(54240),p=r(5980),O=r(82733),T=r(59924);const h=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",justifyContent:"flex-start",flexWrap:"wrap",maxWidth:"676px",minWidth:"676px",boxSizing:"border-box",padding:`0 ${t.sizing.scale600} ${t.sizing.scale600}`,gap:`${t.sizing.scale600} ${t.sizing.scale800}`}})),D=(0,o.zo)("div",{width:"100%",display:"flex",justifyContent:"center"}),C=(0,o.zo)("div",{width:"100%"}),R=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{padding:`0 ${t.sizing.scale600}`,marginBottom:t.sizing.scale800}})),g=e=>{let{orderUUID:t,storeUUID:r,sourceItemUUID:o,handleProductSelection:g,sourceItemSectionUUID:U}=e;const[A,S]=i.useState(""),f=(0,_.o)({sourceItemSectionUUID:U,userQuery:A,sourceItemUUID:o,storeUUIDs:[r],orderUUID:t},{queryObserverOptions:{enabled:Boolean(A)}}),Z=(0,d.v)({storeUUID:r,itemUUID:o,orderUUID:t}),L=(0,O.Z)(),N=()=>{const{isLoading:e,hasResults:t,isError:r,refetch:i}=f;return A?r?(0,T.tZ)(E.Z,{refetch:i}):e?(0,T.BX)(T.HY,{children:[(0,T.tZ)(l.Z,{}),(0,T.tZ)(s.ZP,{$height:16})]}):t?(0,T.tZ)(C,{children:f?.catalogSections?.map((e=>(0,T.tZ)(c.Z,{items:e.items,title:e.title,onProductSelect:g},e?.title?.text)))}):(0,T.tZ)(I.Z,{userQuery:A}):(0,T.tZ)(p.Z,{})};return(0,T.BX)(T.HY,{children:[(0,T.tZ)(R,{children:(0,T.tZ)(u.Z,{setUserQuery:S})}),(0,T.tZ)(D,{children:(0,T.tZ)(h,{children:A?(0,T.tZ)(C,{children:(0,T.tZ)(N,{})}):(0,T.tZ)(n.a,{source:Z,loaded:e=>L&&(null===e?.itemSubstitutes||0===e?.itemSubstitutes?.length)?(0,T.tZ)(p.Z,{}):(0,T.tZ)(T.HY,{children:e?.itemSubstitutes?.map((e=>(0,T.tZ)(m.Z,{item:e,onProductSelect:()=>g(e)},e.itemUUID)))}),error:e=>(0,T.tZ)(a.nQ,{code:parseInt(e?.code||"500")}),loading:()=>(0,T.BX)(T.HY,{children:[(0,T.tZ)(l.Z,{}),(0,T.tZ)(s.ZP,{$height:16})]})})})})]})}},60147:(e,t,r)=>{r.d(t,{ZP:()=>_});var i=r("__fusion__1029"),o=r(38237),n=r(28397),a=r(20631),l=r(91931),s=r(8639);var d=r(59924);const c=(0,l.zo)("div",(e=>{let{$height:t,$width:r}=e;return{position:"relative",width:r||0,height:t||0}})),u=(0,l.zo)("div",(e=>{let{$theme:t,$backgroundColor:r,$color:i,$top:o,$bottom:n,$left:a,$right:l}=e;return{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",top:o,right:l,left:a,bottom:n,width:t.sizing.scale700,borderRadius:t.borders.radiusFull,height:t.sizing.scale700,...r?{backgroundColor:t.colors[r]}:{},...i?{color:t.colors[i]}:{}}})),_=e=>{let{width:t,height:r,children:_,badge:E,position:I}=e;const[,m]=(0,l.hQ)();return(0,d.BX)(c,{$width:t,$height:r,children:[_,(()=>{if("icon"!==E?.content?.type)return;const e=E?.content?.icon,{backgroundColor:t,color:r}=(e=>{let t="contentOnColor",r=null;return"standard"===e?.type?r=(0,s.Lq)(e?.standard):"custom"===e?.type&&(t=(0,s.Lq)(e?.custom?.contentColor),r="JOY_PRIMARY"===e?.custom?.backgroundColor?(0,s.Lq)("WARNING"):(0,s.Lq)(e?.custom?.backgroundColor)),{color:t,backgroundColor:r}})(E?.color),l=(e=>{const t={$bottom:"auto",$top:"auto",$left:"auto",$right:"auto"};switch(e){case"BOTTOM_LEFT":return{...t,$bottom:"0",$left:"0"};case"BOTTOM_RIGHT":return{...t,$bottom:"0",$right:"0"};case"TOP_LEFT":return{...t,$top:"0",$left:"0"};case"TOP_RIGHT":return{...t,$top:"0",$right:"0"};default:return{...t}}})(I);switch(e){case"CHECKMARK":return(0,d.tZ)(u,{$color:r,$backgroundColor:t,...l,"data-test":"badge-icon",children:(0,d.tZ)(o.Z,{height:m.sizing.scale500,width:m.sizing.scale500,children:(0,d.tZ)(a.Z,{})})});case"ARROW_CIRCULAR":return(0,d.tZ)(u,{$color:r,$backgroundColor:t,...l,"data-test":"badge-icon",children:(0,d.tZ)(o.Z,{height:m.sizing.scale500,width:m.sizing.scale500,children:(0,d.tZ)(n.Z,{})})});case"X":return(0,d.tZ)(u,{$color:r,$backgroundColor:t,...l,"data-test":"badge-icon",children:(0,d.tZ)(o.Z,{height:m.sizing.scale500,width:m.sizing.scale500,children:(0,d.tZ)(i.default,{size:"24"})})});default:return null}})()]})}},20248:(e,t,r)=>{r.d(t,{Z:()=>te});var i=r("__fusion__476"),o=r(75161),n=r(56899),a=r(91086),l=r(33259),s=r(70589),d=r(91931),c=r(31913),u=r(55998),_=r(46933),E=r(62091),I=r(86695),m=r(68065),p=r(61552),O=r(20461),T=r(4909),h=r(9066),D=r(59210),C=r(57376),R=r(14352),g=r(65434),U=r(81517),A=r(2228),S=r(59924);const f=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} 0`}})),Z=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.sizing.scale600,margin:t.sizing.scale600}})),L=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.sizing.scale300}})),N=(0,d.zo)("div",{width:"100%",height:h.j,display:"flex",justifyContent:"center",alignItems:"center"}),v=(0,d.zo)("img",{width:"100%",height:"100%",objectFit:"contain",flexShrink:0}),b=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundTertiary,height:t.sizing.scale300}})),y=(0,d.zo)("div",{display:"flex",alignItems:"center",justifyContent:"space-between"}),P=e=>{let{originalItem:t,substituteItem:r,onClose:d,handleConfirm:c,store:u}=e;const E=t?.expanded?.auxiliarySections,{imageUrl:I,title:m,priceTagline:p,formattedPrice:O,description:h,imageURL:P}=r,{defaultQuantity:M,price:B}=(0,U._)(r),[H,k]=i.useState(M),z=B*H,w=(0,A.Z)(r);return(0,S.BX)(o.u_,{size:n.NO.default,children:[(0,S.tZ)(a.xB,{floatingMode:a.rY.floating,leftButton:(0,S.tZ)(l.hQ,{onClick:d})}),(0,S.BX)(f,{children:[r?(0,S.BX)(Z,{children:[I||P?(0,S.tZ)(N,{children:(0,S.tZ)(v,{src:I||P||""})}):null,(0,S.BX)(L,{children:[m?(0,S.tZ)(D.Ih,{children:m}):null,p?.text||O?(0,S.tZ)(D.fH,{as:"span",children:p?.text||O}):null]}),(0,S.BX)(y,{children:[(0,S.tZ)(C.Z,{item:r,quantity:H,updateQuantity:k}),u?.currencyCode?(0,S.tZ)(R.Z,{priceEstimate:z,currencyCode:u.currencyCode,isPricedByWeight:w}):null]})]}):null,(0,S.tZ)(b,{}),(0,S.tZ)(g.Z,{auxiliarySections:E}),(0,S.tZ)(b,{}),h?(0,S.BX)(Z,{children:[(0,S.tZ)(D.fH,{as:"span",children:(0,S.tZ)(_.v,{id:"shared.description"})}),(0,S.tZ)(D.aM,{children:h})]}):null]}),(0,S.tZ)(s.m,{children:(0,S.tZ)(T.V,{onClick:()=>c(H),"data-testid":"confirmReplacement",children:(0,S.tZ)(_.v,{id:"activeOrder.summaryDetails.confirmReplacement"})})})]})},M=i.memo(P);var B=r(44606),H=r(64388);const k=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{padding:`${t.sizing.scale300} ${t.sizing.scale800}`}})),z=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",marginRight:t.sizing.scale300}})),w=(0,d.zo)(E.Z,(e=>{let{$theme:t}=e;return{width:t.sizing.scale1600,height:t.sizing.scale1600}})),G=e=>{let{orderUUID:t,storeUuid:r,originalItemAction:s,onClose:d,item:u,handleSubstitutionPicking:E,open:T,handleRefund:h}=e;const[D,C]=i.useState(null),R=s?.requestModifications||null,g=R?.originalItemId?.itemID?.catalogItemUUID||"",U=R?.originalItemId?.sourceItemSectionUuid,A=R?.originalItemHeader?.itemThumbnail?.imageUrl?.dayImageUrl,f=R?.originalItemHeader,{store:Z}=(0,H.ZP)(r),L=e=>{const t=B.Tf.from(e).toE5().toCoefficientDecimal();D&&E(D,t)};return T&&s&&u?D?(0,S.tZ)(M,{originalItem:u,substituteItem:D,onClose:()=>C(null),handleConfirm:L,store:Z.data}):(0,S.BX)(o.u_,{size:n.NO.auto,isOpen:!0,onClose:d,children:[(0,S.tZ)(a.xB,{leftButton:(0,S.tZ)(l.hQ,{onClick:d}),title:(0,S.tZ)(_.v,{id:"activeOrder.summaryDetails.requestAlternate"}),isExpanded:!0,rightButton:(0,S.tZ)(I.zx,{kind:I.TO.secondary,size:m.NO.compact,shape:m.X3.pill,onClick:h,children:(0,S.tZ)(_.v,{id:"activeOrder.summaryDetails.refund"})})}),(0,S.tZ)(k,{children:(0,S.tZ)(c.ZP,{text:f?.sectionHeaderText})}),(0,S.BX)(O.O6,{children:[(0,S.BX)(O.eh,{children:[A?(0,S.tZ)(w,{src:A}):null,(0,S.BX)(z,{children:[(0,S.tZ)(c.ZP,{text:f?.itemTitleText}),(0,S.tZ)(c.ZP,{text:f?.itemSubtitleText})]})]}),(0,S.tZ)(c.ZP,{text:f?.itemPriceText})]}),r&&U?(0,S.tZ)(p.Z,{orderUUID:t,handleProductSelection:C,sourceItemSectionUUID:U,sourceItemUUID:g,storeUUID:r}):null]}):null};var F=r(34217),V=r(14016),x=r(33535);const $=(0,d.zo)("div",{display:"flex",flexDirection:"column"}),Y=e=>{let{onClose:t,onSubmit:r,workflowUuid:d}=e;const c=(0,V.T)(),u=(0,x.ZP)(),E=()=>{u("eats:replacements_refund_bottom_sheet_dismissed",{workflowUuid:d}),t()};return i.useEffect((()=>{u("eats:replacements_refund_bottom_sheet_impression",{workflowUuid:d})}),[u,d]),(0,S.BX)(o.u_,{size:n.NO.default,children:[(0,S.tZ)(a.xB,{leftButton:(0,S.tZ)(l.ay,{onClick:E}),title:c("activeOrder.summaryDetails.refundItemTitle"),isExpanded:!0}),(0,S.tZ)(F.f,{children:(0,S.tZ)(D.Yl,{children:(0,S.tZ)(_.v,{id:"activeOrder.summaryDetails.refundItemDescription"})})}),(0,S.tZ)(s.m,{children:(0,S.BX)($,{children:[(0,S.tZ)(I.zx,{onClick:()=>{u("eats:replacements_refund_bottom_sheet_refund_tapped",{workflowUuid:d}),r()},"data-testid":"refund-button",overrides:{BaseButton:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundNegative}}}},children:(0,S.tZ)(_.v,{id:"activeOrder.summaryDetails.refundItem"})}),(0,S.tZ)(I.zx,{kind:I.TO.tertiary,onClick:E,children:(0,S.tZ)(_.v,{id:"shared.goBack"})})]})})]})};var W=r(2367);const X=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} 0`}})),K=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.sizing.scale600,margin:t.sizing.scale600}})),Q=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.sizing.scale300}})),q=(0,d.zo)("div",{display:"flex"}),j=(0,d.zo)("div",{width:"100%",height:h.j,display:"flex",justifyContent:"center",alignItems:"center"}),J=(0,d.zo)("img",{width:"100%",height:"100%",objectFit:"contain",flexShrink:0}),ee=e=>{let{items:t,shoppingCartItemUuid:r,onClose:d,handleActionButtons:_,storeUuid:E}=e;const I=(0,x.ZP)(),m=t?.find((e=>e?.cursory?.descriptor?.itemId?.shoppingCartItemUuid===r)),p=m?.expanded?.descriptor?.displayableName?.text?.text??"",O=m?.expanded?.longWriteup?.text?.text??"",T=m?.expanded?.descriptor?.salientNotes||null,h=m?.expanded?.auxiliarySections||null,C=i.useMemo((()=>m?.expanded?.actionButtons||null),[m]),R=i.useMemo((()=>m?.cursory?.thumbnailImage?.imageUrl?.dayImageUrl||null),[m]),U=m?.cursory?.descriptor?.itemId?.cartId?.workflowId?.workflowUuid||"",A=m?.cursory?.descriptor?.itemId?.cartId?.cartUuid||"",f=m?.cursory?.descriptor?.itemId?.itemID?.catalogItemUUID||"",[Z,L]=i.useState(!1),[N,v]=i.useState(null),[b,y]=i.useState(!1),[P,M]=i.useState(null),B=(e,t)=>{if(e||t)return"CART_ITEM_ACTION_TYPE_REQUEST_REFUND"!==e?.type||N?"CART_ITEM_ACTION_TYPE_REQUEST_MODIFICATIONS"===e?.type&&e?.requestModifications?(M(e),I("eats:replacements_item_details_more_options_tapped",{cartUuid:A,isSpecialItemRequest:(0,W.F)(t),itemUuid:f,storeUuid:E,workflowUuid:U}),L(!0),void v(null)):void _(e,t,!0):(v(e),I("eats:replacements_item_details_impression",{cartUuid:A,isSpecialItemRequest:(0,W.F)(t),itemUuid:f,storeUuid:E,workflowUuid:U}),void y(!0))},H=()=>{N&&m&&B(N,m),L(!1),y(!1)},k=()=>{v(null),y(!1)};if(i.useEffect((()=>{m&&I("eats:replacements_item_details_impression",{isSpecialItemRequest:(0,W.F)(m),workflowUuid:U})}),[I,m,U]),b)return(0,S.tZ)(Y,{workflowUuid:U,onClose:k,onSubmit:H});const z=()=>{I("eats:replacements_item_details_close_tapped",{workflowUuid:U}),d()};return(0,S.BX)(o.u_,{size:n.NO.default,onClose:z,"data-testid":"summary-details-desktop-item-expanded-modal",children:[(0,S.tZ)(G,{open:Z,orderUUID:U,item:m,storeUuid:E,onClose:()=>L(!1),originalItemAction:P,handleSubstitutionPicking:(e,t)=>{_(P,m,!0,e,t)},handleRefund:()=>{const e=C?.find((e=>"CART_ITEM_ACTION_TYPE_REQUEST_REFUND"===e?.action?.type));v(e?.action||null),y(!0)}}),(0,S.tZ)(a.xB,{floatingMode:a.rY.floating,leftButton:(0,S.tZ)(l.hQ,{onClick:z,"data-testid":"summary-details-desktop-item-expanded-close-button"})}),(0,S.BX)(X,{children:[(0,S.BX)(K,{children:[(0,S.tZ)(j,{children:R?(0,S.tZ)(J,{src:R}):null}),(0,S.BX)(Q,{children:[p?(0,S.tZ)(D.Ih,{as:"span",children:p}):null,T?.map(((e,t)=>(0,S.tZ)(q,{children:(0,S.tZ)(c.ZP,{text:e.text})},`price-${t}`))),O?(0,S.tZ)(D.Yl,{as:"span",color:"contentSecondary",children:O}):null]})]}),(0,S.tZ)(g.Z,{auxiliarySections:h})]}),(0,S.tZ)(s.m,{children:(0,S.tZ)(Q,{children:C?.map(((e,t)=>e?.button?(0,S.tZ)("div",{children:(0,S.tZ)(u.Z,{viewModel:e?.button,onClick:()=>B(e?.action,m)})},`button-${t}`):null))})})]})},te=i.memo(ee)},81549:(e,t,r)=>{r.d(t,{Z:()=>x});var i=r(74369),o=r(69420),n=r(17222),a=r(47986),l=r(91931),s=r(76150),d=r(46933),c=r(83960),u=r(22787),_=r(55186),E=r(34626),I=r(82532),m=r(83395),p=r(70247),O=r(24934),T=r(4864),h=r(37573),D=r(89151),C=r(2237),R=r(62459);var g=r(69694),U=r(72179),A=r(3015),S=r(28222),f=r(14016),Z=r(73472),L=r(34567),N=r(33535),v=r(94813),b=r(78989),y=r(65014),P=r(59924);const M=e=>{const t=(0,N.ZP)(),r=(0,N.XL)(),{checkoutType:i}=(0,U.Z)(),{startTiming:o}=(0,Z.K3)(),l=(0,f.T)(),{restaurantLink:s,onGoToStore:u}=(0,m.Z)(),{serverCart:_}=(0,p.iQ)(),E=(0,T.ZP)(void 0,!_.data?.isOwner),{isDraftOrderCreator:I,hasGroupOrder:O,isBillSplitOrder:h,isEditOrder:D,mealPlanUUID:C}=(0,c.Z)(),{isOnPremiseDeliveryOrder:R}=(0,b.Z)(),g=(0,v.TH)(),A="eats:checkout_button",S={checkoutType:i,isBillSplitOrder:h,isDraftOrderParticipant:!I,isGuestOrder:e.isGuestMode,isGroupOrder:O,isEditScheduledOrder:D,...C?{mealPlanUUID:C}:null};return 0===E?(0,P.tZ)(L.Z,{$as:n.rU,to:s,onClick:u,children:(0,P.tZ)(d.v,{id:"shared.addItems"})}):R?(0,P.tZ)(L.Z,{$as:n.rU,rel:"nofollow",to:e.authHref?{}:(0,a.vN_)(g,"premiseDeliveryInfo"),href:e.authHref,onClick:async t=>{e.disabled?t.preventDefault():e.onClick(t)},disabled:e.disabled,children:l("shared.go_to_checkout")}):(0,P.tZ)(L.Z,{$as:n.rU,rel:"nofollow",to:e.authHref?{}:e.checkoutUrl,href:e.authHref,"data-testid":"go-to-checkout-button",onClick:async i=>{e.disabled?i.preventDefault():(e.authHref?await r(A,S):(o(y.B.CHECKOUT_LOAD_COMPLETE_EVENT_NAME),o(y.B.CHECKOUT_LOAD_COMPLETE_WITH_CMP_EVENT_NAME),o(y.B.CHECKOUT_PAGE_RENDER_EVENT_NAME),t(A,S)),e.onClick(i))},disabled:e.disabled,children:l("shared.go_to_checkout")})};var B=r(26786),H=r(86695),k=r(1058),z=r(78365),w=r(23314);const G=(0,l.w1)(u.Z,(e=>{let{$theme:t}=e;return{marginTop:t.sizing.scale300}})),F=(0,l.w1)(B.Z,(e=>{let{$theme:t}=e;return{marginTop:t.sizing.scale300}}));function V(e,t,r){if("secondary_btn"!==e&&"tertiary_btn"!==e)return null;const i="secondary_btn"===e?G:F;return(0,P.tZ)(i,{$as:n.rU,to:t,disabled:r,children:(0,P.tZ)(d.v,{id:"checkout_as_guest"})})}const x=e=>{const t=(0,v.TH)(),r=(0,o.k6)(),{hideSidebarCart:l}=(0,s.Lb)(),{isDraftOrderCreator:u,isDraftOrderCartLocked:f,storeUuid:Z,isDraftOrderParticipant:L,isBillSplitParticipant:N,currentUserGroupedItems:b}=(0,c.Z)(),{user:y}=(0,E.Z)(),B=(0,z.Z)(Z),F=t=>{e.onNavigateToCheckout&&e.onNavigateToCheckout(t)},{isCartUnderMBS:x}=(0,I.f)(),{isCartDrafting:$}=(0,U.Z)(),{isEnabled:Y,treatment:W}=(0,k.Z)(),{guestCheckoutEnabled:X,emitGuestCheckoutEvent:K,guestCheckoutInGuestModeXP:Q}=(0,h.Z)(),{selectedInstruction:q}=(0,i.useContext)(O.X3),{data:j,isFetching:J,isLoading:ee}=function(e,t){const r=(0,R.Z)("getGuestCheckoutEligibilityV1"),i=(0,C.H)("getGuestCheckoutEligibilityV1",e);return(0,D.useQuery)({queryKey:i,queryFn:e=>{let{queryKey:t}=e;return r.request("getGuestCheckoutEligibilityV1",t[1])},...t?.queryObserverOptions})}({interactionType:q?.interactionType},{queryObserverOptions:{enabled:Boolean(X)}}),te=X&&(J||ee),re=j?.isEligible,ie=(0,A.Z)(),oe=(0,S.Z)(),{isBundledOrder:ne}=(0,p.Dz)();(0,i.useEffect)((()=>{te||K(re)}),[K,te,re]);const ae=e.$disabled||x||te,{restaurantLink:le,onGoToStore:se}=(0,m.Z)({storeUuid:Z}),{serverCart:de}=(0,p.iQ)(),ce=(0,T.ZP)(void 0,!de.data?.isOwner),{isGroupOrder:ue,isScheduledOrder:_e}=(0,g.Z)(Z),Ee=Boolean(re&&X&&!ue&&!_e),Ie=ie&&oe,me=(0,w.Z)();return y.data?.isLoggedIn||Ie?N&&b?.confirmed||L&&!N?(0,P.tZ)(H.zx,{isFullWidth:!0,onClick:()=>{r.push(le),se()},disabled:f,children:(0,P.tZ)(d.v,{id:"shared.addItems"})}):(0,P.BX)(P.HY,{children:[!L||N?(0,P.tZ)(M,{isGuestMode:Ee,disabled:ae,onClick:async e=>{l(),F(e)},checkoutUrl:me}):null,u&&f?(0,P.tZ)(G,{$as:n.rU,to:(0,a.vN_)(t,"unlockGroupCart"),children:(0,P.tZ)(d.v,{id:"go.unlock_cart"})}):ce>0&&!ne&&(!$||ue)?(0,P.tZ)(G,{$as:n.rU,to:le,onClick:e=>{if(Y&&"cart_animation"===W&&B)return e.preventDefault(),e.stopPropagation(),void l();se()},disabled:f,children:(0,P.tZ)(d.v,{id:"shared.addItems"})}):null]}):(0,P.BX)(P.HY,{children:[(0,P.tZ)(_.Z,{type:"login",redirectTo:(0,a.Zs0)(t),isGuestMode:Ee,children:e=>{let{href:t,onClick:r}=e;return(0,P.tZ)(M,{isGuestMode:Ee,disabled:ae,onClick:async e=>{F(e),r(e)},authHref:t,checkoutUrl:me})}}),Ee?V(Q,me,ae):null]})}},3737:(e,t,r)=>{r.d(t,{Oy:()=>qe,gk:()=>Fe,ZP:()=>nt});var i=r(74369),o=r("__fusion__476"),n=r(46933),a=r(60849),l=r(91931),s=r(51090),d=r(55403),c=r(27871),u=r(40606),_=r(40017),E=r(15298),I=r(4864),m=r(70247),p=r(59924);const O=()=>{const{serverCart:e}=(0,m.iQ)(),t=(0,c.B0)("fareBreakdown"),r=(0,I.ZP)(void 0,!e.data?.isOwner),[,i]=(0,l.hQ)();return r?(0,p.tZ)(u.Z,{source:t,loaded:e=>{const t=e.charges?.find((e=>"Promotion"===e.title?.text));return t?(0,p.tZ)(E.jH,{charges:[t]}):null},error:()=>null,loading:()=>(0,p.tZ)(_.sM,{$width:i.sizing.scale1000})}):null};var T=r(47667),h=r(14016),D=r(31913);const C=e=>{let{subtotal:t,isLoading:r}=e;const i=(0,T.Z)(),{serverCart:o}=(0,m.iQ)(),n=(0,I.ZP)(void 0,!o.data?.isOwner),a=(0,h.T)();return r?(0,p.tZ)(_.sM,{$width:"40px"}):n&&t?i&&t.formattedSubtotalAmount?(0,p.tZ)("span",{"aria-label":a("shared.subtotal"),children:(0,p.tZ)(D.ZP,{text:t.formattedSubtotalAmount})}):(0,p.tZ)("span",{"aria-label":a("shared.subtotal"),children:t.subtotal?.formattedValue}):null};var R=r(73103),g=r(62091),U=r("__fusion__695"),A=r(64388),S=r(83960),f=r(72179),Z=r(17222),L=r(83395),N=r(15840),v=r(34267),b=r(89151),y=r(2237),P=r(62459);var M=r(34626),B=r(1257),H=r(15649),k=r(49201),z=r(32755),w=r(70940),G=r(86990);const F=e=>{const{serverCart:t,isBundledOrder:r}=(0,m.Dz)(),{uuid:i="",cityId:o=0,eatsPassExclusionBadge:n,location:a}=e||{},{hasActiveUberOne:l}=(0,M.Z)(),s=(0,B.Z)((0,c.B0)("subtotal")),d=(0,c.B0)("cartItems"),u=(0,B.Z)(d),_=Number(s?.subtotal?.value?.amountE5)||0,E=(0,H.Z)(),I=!(0,w.Z)(i),p=(0,h.T)(),O=(0,z.ZP)(),{isBillSplitOrder:T,isDraftOrderParticipant:D}=(0,S.Z)(),C=Object.values(u?.itemCharges||{}).some((e=>e.discountedAmount&&e?.originalAmount!==e?.discountedAmount)),R=Boolean(I&&(!O||"UNAVAILABLE_ITEMS"!==O?.type)&&_>0&&l&&n&&!C&&(!D||T)&&!r),g=function(e,t){const r=(0,P.Z)("getUberOneMbsV1"),i=(0,y.H)("getUberOneMbsV1",e);return(0,b.useQuery)({queryKey:i,queryFn:e=>{let{queryKey:t}=e;return r.request("getUberOneMbsV1",t[1])},...t?.queryObserverOptions})}({storeCityId:o,storeCountryCode:a?.country.toLowerCase()||"us"},{queryObserverOptions:{enabled:Boolean(R&&o)}})?.data,U=g&&_<g?(g-_)/g*100:0,A=g?(g-_)/1e3:0,f=(0,G.Z)({storeId:i,originalCurrencyCode:t.data?.currencyCode||"USD"});return{isTreated:Boolean(R&&g),belowMBSPercent:U,belowMBSMessage:g&&U>0?p("shared.cart.uberone.mbs.pending",{amount:(0,k.xG)(E,f,A)}):""}};var V=r(47885),x=r(33157),$=r(52949),Y=r(5639),W=r(1795),X=r(33535),K=r(43832);const Q=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{height:"100%",width:"100%",background:t.colors.backgroundPrimary}})),q=(0,$.V)({chunkId:"store-desktop-catalog-section",load:()=>Object.defineProperties(Promise.all([r.e(33842),r.e(5539),r.e(83070),r.e(92834),r.e(58487),r.e(65810),r.e(46231),r.e(58307),r.e(6319),r.e(20955)]).then(r.bind(r,"__fusion__501")),{__CHUNK_IDS:{value:[20955,33842,46231,5539,58307,58487,6319,65810,83070,92834]},__MODULE_ID:{value:"__fusion__501"},__I18N_KEYS:{value:["bandwagon.one_minute_left","bandwagon.x_minutes_left","billboard.heading","billboard.subheading","billboard.verticalFeeds.grocery.header","billboard.verticalFeeds.grocery.subHeader","billboard.verticalFeeds.header","billboard.verticalFeeds.subHeader","carousel.see_all","carousel.view_all","catalog_item.quick_view","components.BadgeSoldOut.message","components.store_address_input.login_button","eaterMessage.storefront.headline.v2","euDisclaimer.Body","euDisclaimer.HeaderTitle","euDisclaimer.clickHereText","euDisclaimer.dismissText","favorite_add","favorite_added","favorite_remove","favorite_removed","item.fulfillment_state.found","item.fulfillment_state.in_review","item.fulfillment_state.refunded","item.fulfillment_state.replaced","live_order.item.found","live_order.item.in_review","live_order.item.refunded","live_order.item.replaced","online_ordering.logo.alt_text","pdp.miniCatalogSubsection.viewAll","postmates.components.heading","postmates.components.subhead","quick_add","see_all_stores","shared.decrement","shared.enterDeliveryAddress","shared.increment","shared.next","shared.previous","shared.search","store.bundle_store.pill_tooltip_cancel_group_order","store.bundle_store.pill_tooltip_group_order","store.bundle_store.pill_tooltip_schedule_order","store.bundle_store.pill_tooltip_switch_delivery_time","store.bundle_store.pill_tooltip_switch_to_delivery","view_more_options"]}}),LoadingComponent:W.Z,ErrorComponent:Q}),j=(0,$.V)({chunkId:"store-mobile-catalog-section",load:()=>Object.defineProperties(Promise.all([r.e(33842),r.e(5539),r.e(90348),r.e(83070),r.e(92834),r.e(65696),r.e(58487),r.e(60613),r.e(68018),r.e(52973)]).then(r.bind(r,"__fusion__502")),{__CHUNK_IDS:{value:[33842,52973,5539,58487,60613,65696,68018,83070,90348,92834]},__MODULE_ID:{value:"__fusion__502"},__I18N_KEYS:{value:["bandwagon.one_minute_left","bandwagon.x_minutes_left","carousel.see_all","carousel.view_all","catalog_item.quick_view","components.BadgeSoldOut.message","components.store_address_input.login_button","euDisclaimer.Body","euDisclaimer.HeaderTitle","euDisclaimer.clickHereText","euDisclaimer.dismissText","favorite_add","favorite_added","favorite_remove","favorite_removed","item.fulfillment_state.found","item.fulfillment_state.in_review","item.fulfillment_state.refunded","item.fulfillment_state.replaced","live_order.item.found","live_order.item.in_review","live_order.item.refunded","live_order.item.replaced","online_ordering.logo.alt_text","pdp.miniCatalogSubsection.viewAll","quick_add","see_all_stores","shared.apply","shared.decrement","shared.enterDeliveryAddress","shared.increment","shared.next","shared.previous","shared.reset","shared.search","store.bundle_store.pill_tooltip_cancel_group_order","store.bundle_store.pill_tooltip_group_order","store.bundle_store.pill_tooltip_schedule_order","store.bundle_store.pill_tooltip_switch_delivery_time","store.bundle_store.pill_tooltip_switch_to_delivery","view_more_options"]}}),LoadingComponent:W.Z,ErrorComponent:Q});function J(e){return e?3:1}function ee(e,t){return e?t?96:120:112}const te=(0,K.nX)("store-shared-upsell-catalog-section",(e=>{let{store:t,upsellCatalogSectionsPayload:r,isGrocery:i,primaryBundledStoreUUID:n,primaryDraftOrderUUID:a,surface:l,redirectToQuickViewModal:s,overrideColumnsPerRow:d}=e;const c=(0,X.ZP)(),{isMobile:u}=(0,Y.hU)(),_=r.catalogSections||[],E=o.useCallback((e=>{c("eats:store_upsell_catalog_section_impression",{storeUuid:e.storeUuid,source:e.source,catalogItems:e.items})}),[c]),I=o.useCallback((e=>{c("eats:store_upsell_catalog_section_scrolled",{storeUuid:e.storeUuid,source:e.source,catalogItems:e.items})}),[c]),m={surface:l,columnsPerRow:d??J(i),imageDimensions:{height:ee(i,u),aspectRatio:1},isSharedDesign:!0,hideQuickAdd:!1,hasLazyloadOverflowContainer:!0,analyticsConfig:{onCatalogSectionImpression:E,onCarouselScroll:I},redirectToQuickViewModal:Boolean(s)};return(0,p.tZ)("div",{children:u?(0,p.tZ)(j,{store:t,catalogSections:_,isGrocery:i,primaryBundledStoreUuid:n,primaryDraftOrderUUID:a,catalogConfig:m}):(0,p.tZ)(q,{store:t,catalogSections:_,isGrocery:i,primaryBundledStoreUuid:n,primaryDraftOrderUUID:a,catalogConfig:m})})}));var re=r(84272),ie=r(94988),oe=r(61304),ne=r(89400),ae=r(87444);const le=function(e,t){t=t??[];const r=(0,ae.Z)("alcohol_scheduling_mixed_cart"),{isBundledOrder:i,isGroupOrder:o,isEditOrder:n}=(0,m.Dz)(),a=t.length>0&&t.every((e=>t=>t.draftOrderUUID===e)(e));return Boolean(r&&!i&&!o&&!n&&a)};var se=r(91793),de=r(73472),ce=r(65014),ue=r(33023),_e=r(96306),Ee=r(44997),Ie=r(79532),me=r(2367),pe=r(6264),Oe=r(20248),Te=r(13672),he=r(22023),De=r(11362),Ce=r(64986);const Re=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{padding:`0 ${t.sizing.scale600}`}})),ge=e=>{let{section:t}=e;const{isMobile:r}=(0,Y.hU)(),i=(0,Ce.Z)(),n=(0,X.ZP)(),[a,l]=o.useState(null),{isLiveOrder:s,liveOrderUuid:d}=(0,Ee.W)(),{liveOrderStoreUuid:c}=(0,Te.l)(),u=(0,pe.W)({getCartFrom:"workflowId",workflowId:d}),_="SYNCING"===u.status,E="AVAILABLE"===u.status?u?.actions:null;if(!s||!t)return null;const I=t?.metadata?.header?.title,m={text:I,type:"text"},O=t?.items;if(!O||0===O?.length)return null;const T=(e,t,r,o,a)=>{const s=t?.cursory?.descriptor?.itemId?.cartId?.workflowId?.workflowUuid||"",d=t?.cursory?.descriptor?.itemId?.cartId?.cartUuid||"",u=t?.cursory?.descriptor?.itemId?.itemID?.catalogItemUUID||"",_=t?.cursory?.descriptor?.itemId?.shoppingCartItemUuid||"",I={cartUuid:d,isSpecialItemRequest:(0,me.F)(t),itemUuid:u,storeUuid:c,workflowUuid:s,shoppingCartItemUuid:_};let m;if("CART_ITEM_ACTION_TYPE_REQUEST_MODIFICATIONS"===e?.type&&!e?.requestModifications)return l(_??null),void n("eats:replacements_order_summary_more_options_tapped",I);if(e&&t){let t=null;if(e?.approveModifications?(t=e?.approveModifications?.proposalIDToApprove,n(r?"eats:replacements_item_details_approve_tapped":"eats:replacements_order_summary_approve_tapped",I),m="ITEM_FULFILLMENT_EVENT_TYPE_APPROVED_ITEM_MODIFICATIONS_PROPOSAL",n("eats:replacements_cart_item_fulfillment",{...I,itemFulfillmentEventType:m})):e?.requestRefund&&(t=e?.requestRefund?.proposalIDToReject,m="ITEM_FULFILLMENT_EVENT_TYPE_TERMINATED_ITEM_MODIFICATIONS_NEGOTIATION",n("eats:replacements_cart_item_fulfillment",{...I,itemFulfillmentEventType:m})),!_&&!e?.type)return;"CART_ITEM_ACTION_TYPE_REQUEST_MODIFICATIONS"===e?.type&&o&&a&&c?E?.processItemFeedback({item:{shoppingCartItemUuid:_,proposalUuid:t?.proposalUUID||"",type:e.type,substituteItem:o,quantity:a,storeUuid:c}}).catch((()=>{i()})):"CART_ITEM_ACTION_TYPE_APPROVE_MODIFICATIONS"!==e?.type&&"CART_ITEM_ACTION_TYPE_REQUEST_REFUND"!==e?.type||E?.processItemFeedback({item:{shoppingCartItemUuid:_,proposalUuid:t?.proposalUUID||"",type:e.type}}).catch((()=>{i()})),l(null)}};return(0,p.BX)("section",{children:[(0,p.BX)(Re,{children:[(0,p.tZ)(D.Dy,{element:m}),O?.map(((e,r)=>(0,p.tZ)("div",{children:(0,p.tZ)(_e.Z,{isLoading:_,item:e,sharedData:t?.sharedData,handleActionButtons:T,setSelectedShoppingCartItemUuid:l})},r))),a&&O?r?(0,p.tZ)(Ie.Z,{items:O,shoppingCartItemUuid:a,onClose:()=>l(null),handleActionButtons:T,storeUuid:c}):(0,p.tZ)(Oe.Z,{items:O,shoppingCartItemUuid:a,onClose:()=>l(null),handleActionButtons:T,storeUuid:c}):null]}),(0,p.tZ)(he.I,{$size:De.N.module})]})},Ue=o.memo(ge),Ae=(0,l.zo)("div",{display:"flex",flexDirection:"column"}),Se=e=>{let{cartPageHeader:t}=e;const{isLiveOrder:r}=(0,Ee.W)();if(!r||!t)return null;const i=t?.title,o=t?.subtitle;return(0,p.BX)(Ae,{children:[i?(0,p.tZ)(D.ZP,{text:i}):null,o?(0,p.tZ)(D.ZP,{text:o}):null]})};var fe=r(72238),Ze=r(21322),Le=r("__fusion__1655"),Ne=r(59210);const ve=(0,l.zo)("div",{display:"flex",flexDirection:"column"}),be=e=>{let{promotion:t}=e;const{isLiveOrder:r}=(0,Ee.W)();if(!r||!t)return null;const{disclaimer:i,title:o,subtitle:n}=t;return(0,p.tZ)("div",{children:(0,p.tZ)(fe.Z,{artwork:()=>(0,p.tZ)(Le.default,{size:20}),children:(0,p.tZ)(Ze.Z,{children:(0,p.BX)(ve,{children:[o?(0,p.tZ)(Ne.Uc,{as:"span",children:o}):null,n?(0,p.tZ)(Ne.aM,{as:"span",color:"positive",children:n}):null,i?(0,p.tZ)(D.ZP,{text:i}):null]})})})})};var ye=r(81231);const Pe=e=>{if(!e?.actionMetadata||"openItemLevelPromotionMetadata"!==e.actionMetadata.type)return null;const t=e.actionMetadata.openItemLevelPromotionMetadata;if(!t?.itemLevelPromotion||"multiSKUFlatPromotion"!==t.itemLevelPromotion.type)return null;const r=t.itemLevelPromotion.multiSKUFlatPromotion,i=r.itemPromotionTag,o="ACTIVE"===i?.state?"CONTENT_POSITIVE":"CONTENT_TERTIARY",n=r.modalHeader;if(!n||!n.headerSecondary)return null;return{bannerViewModel:{actionButton:{actionButtonLayout:"TRAILING",hierarchy:"SECONDARY",illustration:{illustration:{type:"icon",icon:{icon:"CHEVRON_RIGHT_SMALL",color:"CONTENT_TERTIARY",size:"SPACING_UNIT_3X"}}}},customArtwork:{illustration:{illustration:{type:"icon",icon:{icon:i?.leadingIcon||"UNKNOWN",color:o,size:"SPACING_UNIT_3X"}}}},message:n?.headerSecondary,headline:n?.headerPrimary,hierarchy:"LOW",bannerColor:{backgroundColor:"BACKGROUND_PRIMARY",type:"backgroundColor"}},collectionUuid:r.collectionUuid||"",promotionUuid:r.promotionUuid||""}};var Me=r(47986),Be=r(94813);const He=e=>{let{itemGroup:t,isItemLevelPromotion:r,isSingleOrderWithCartItemsGroups:i,quantitySelectType:o,isLiveOrder:n,isLiveOrderCartLoading:a}=e;const l=(0,Be.TH)(),s=t.fullCartItemsGroup?.storeUUID||"",d=(0,Me.vN_)(l,"multiSkuPromotion",{storeUuid:s,catalogSectionUuid:t.collectionUuid,...t.promotionUuid&&{promotionUUID:t.promotionUuid}});return t.actionableBanner?(0,p.BX)(p.HY,{children:[r?(0,p.tZ)("div",{children:(0,p.tZ)(Z.rU,{to:d,children:(0,p.tZ)(ye.Z,{viewModel:t.actionableBanner??{},overrides:{messageContent:{paddingBlockEnd:"0px",paddingBlockStart:"0px"},leadingContent:{paddingInlineStart:"0px"}},noMargin:!0,noPadding:!0})})}):null,(0,p.tZ)(qe,{isSingleOrderWithCartItemsGroups:i,quantitySelectType:o,cartItems:t?.cartItems??void 0,cartItemsGroup:r?void 0:t?.fullCartItemsGroup,isLiveOrder:n,hideAllSeparators:!r}),r?(0,p.tZ)(Fe,{$isCartDrafting:!0}):null]}):(0,p.tZ)(qe,{isLiveOrderCartLoading:a,isSingleOrderWithCartItemsGroups:i,quantitySelectType:o,cartItems:t?.cartItems??void 0,isLiveOrder:n,isPromotionGroup:!1})};var ke=r(43426);const ze=()=>{const{currentUserItemCount:e}=(0,S.Z)();return 1===e?(0,p.tZ)(n.v,{id:"shared.numCartItemsSingular",data:{numCartItems:e}}):(0,p.tZ)(n.v,{id:"shared.numCartItems",data:{numCartItems:e}})},we=e=>e?.catalogSections?e?.catalogSections?.reduce(((e,t)=>"standardItemsPayload"===t.payload?.type&&t.payload?.standardItemsPayload?.catalogItems?.length?e+t.payload.standardItemsPayload.catalogItems.length:e),0):0,Ge=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{borderTop:`1px solid ${t.colors.borderOpaque}`}})),Fe=(0,l.zo)("div",(e=>{let{$theme:t,$isCartDrafting:r}=e;return{marginLeft:`-${t.sizing.scale600}`,marginRight:`-${t.sizing.scale600}`,...r?{minHeight:t.sizing.scale100,background:t.colors.backgroundSecondary}:{minHeight:t.sizing.scale300,background:t.colors.backgroundTertiary}}})),Ve=(0,l.zo)("div",(()=>({display:"flex",flexDirection:"row"}))),xe=(0,l.zo)(Z.rU,(e=>{let{$theme:t}=e;return{margin:`0 -${t.sizing.scale600}`,display:"flex",flexDirection:"row"}})),$e=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.sizing.scale600}})),Ye=(0,l.zo)(g.Z,(e=>{let{$theme:t}=e;return{width:t.sizing.scale1600,height:t.sizing.scale1600,paddingLeft:t.sizing.scale600,paddingRight:t.sizing.scale600,borderRadius:t.borders.radiusFull}})),We=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",gap:t.sizing.scale0}})),Xe=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{width:t.sizing.scale1600,display:"flex",justifyContent:"center",alignItems:"center",color:t.colors.contentStateDisabled}})),Ke=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{marginTop:`-${t.sizing.scale300}`}})),Qe=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{margin:`0 ${t.sizing.scale600}`}})),qe=e=>{let{quantitySelectType:t="picker",cartItems:r,cartItemsGroup:n,isSingleOrderWithCartItemsGroups:a=!1,isLiveOrder:l,isLiveOrderCartLoading:d,isPromotionGroup:c=!1,hideAllSeparators:u=!1}=e;const{isCartDrafting:_}=(0,f.Z)(),{draftOrder:E,isBundledOrder:I}=(0,m.Dz)(),{restaurantLink:O,onGoToStore:T}=(0,L.Z)(),{store:h}=(0,A.ZP)(E?.shoppingCart.storeUuid),C=(0,X.ZP)(),g=(I||a)&&void 0!==n,{isMobile:S}=(0,Y.hU)(),Z=Boolean(r),{stopTiming:b}=(0,de.K3)();return(0,i.useEffect)((()=>{Z&&b(ce.B.CART_LOAD_COMPLETE_WITH_ITEMS,{shouldEmitTiming:!0})}),[Z,b]),(0,p.BX)(p.HY,{children:[g?(0,p.BX)(p.HY,{children:[a?(0,p.tZ)(Ve,{children:(0,p.BX)(We,{children:[(0,p.tZ)(D.ZP,{text:n.title}),(0,p.tZ)(D.ZP,{text:n.subtitle})]})}):(0,p.tZ)("div",{children:(0,p.BX)(xe,{to:O,onClick:e=>{O?T():(e.preventDefault(),C("eats:click_store_link",{source:"cart",label:"store_not_loaded"}))},children:[(0,p.tZ)(Ye,{src:n.iconUrl||""}),(0,p.BX)(We,{children:[(0,p.tZ)(D.ZP,{text:n.title}),(0,p.tZ)(D.ZP,{text:n.subtitle})]}),(0,p.tZ)(Xe,{children:(0,p.tZ)(U.default,{size:24})})]})}),n.actionableBanners?(0,p.tZ)($e,{children:n.actionableBanners?.map(((e,t)=>(0,p.tZ)(N.C,{bannerAction:e},`saving-banner-${t}`)))}):null,(0,p.tZ)(x.IY,{})]}):null,(0,p.tZ)(s.Z,{cmpCartItems:r,quantitySelectType:t,fulfillmentIssueOptions:h?.data?.fulfillmentIssueOptions,isCartDrafting:_,isLiveOrderCartLoading:d}),l||!I&&_?(0,p.BX)(o.Fragment,{children:[S||l?(0,p.tZ)(v.Z,{}):null,(0,p.tZ)("div",{children:(0,p.tZ)(Fe,{$isCartDrafting:!0})})]}):null,l?null:(0,p.tZ)(R.Z,{store:h,instructionsPadding:0,isRegularOrder:!0}),u?null:_&&I||c?(0,p.tZ)("div",{children:(0,p.tZ)(Fe,{$isCartDrafting:!0})}):_||l?null:n?(0,p.tZ)(Fe,{}):c?(0,p.tZ)(Ge,{}):null]})},je=(0,l.zo)("div",{display:"flex",alignItems:"center"}),Je=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,flexGrow:1}})),et=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,color:t.colors.contentSecondary,paddingRight:t.sizing.scale100}})),tt=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium}})),rt=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingXSmall,display:"flex",justifyContent:"space-between"}})),it=(0,l.zo)("div",(e=>{let{$isXlbFrictionBatch2CheckoutEnabled:t}=e;return{width:t?"unset":"100%"}})),ot=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall}})),nt=e=>{let{quantitySelectType:t="picker"}=e;const r=(0,X.ZP)(),[l,s]=(0,i.useState)(!0),u=o.useRef(!1),{isCartDrafting:_}=(0,f.Z)(),{isStorePrecheckoutBundlingEnabled:I}=(0,V.Z)(),h=(0,T.Z)(),{isBundledOrder:D,draftOrder:R}=(0,m.Dz)(),g=R?.storeUuid,{store:U}=(0,A.ZP)(g),S=(0,Be.TH)(),L=(0,w.Z)(g||""),{belowMBSPercent:N,isTreated:v}=F(U?.data),{isLiveOrder:b,liveOrderUuid:y}=(0,Ee.W)(),P=(0,pe.W)({getCartFrom:"workflowId",workflowId:y}),M="SYNCING"===P.status,B="LOADING"!==P?.status?P?.rawCartData?.checkoutPresentation?.checkoutPayloads:null,H=(0,ae.Z)("canonical_product_smart_cart"),k=(0,a.ip)({...ie.r.eats_web_cart_display_total_promotion_enabled,defaultValue:!1}),z=(0,a.ip)({...ie.r.eats_web_unified_cart_cmp_payloads_enabled,defaultValue:!1}),G=(0,a.ip)({...ke.J.nudges_on_web,defaultValue:!1}),$=(0,d.R)(H,k,z),Y=z?$:["cartItems","upsellCatalogSections","subtotal","subTotalFareBreakdown","cartPageHeader","fulfilledItemDetails","unFulfilledItemDetails","inReviewItemDetails","uneditableItemDetails","fareBreakdown","promotion"],{checkoutPayloads:W,cmpMaybe:{isLoading:K}}=(0,c.ZP)(Y),{cartItems:Q,upsellCatalogSections:q,subtotal:j,subTotalFareBreakdown:J,cartPageHeader:ee,fulfilledItemDetails:de,unFulfilledItemDetails:ce,inReviewItemDetails:_e,uneditableItemDetails:Ie,fareBreakdown:me,promotion:Oe}=(b&&B?B:W)||{},Te=U.data?.location?.locationType,{subtotalDisclaimers:he}=j||{},{primaryBundledStoreUuid:De,primaryDraftOrderUUID:Ce}=(0,re.Z)(),Re=(0,ae.Z)("multi_sku_promotions_enabled"),ge=(0,ae.Z)("cart_multi_sku_bundled_promotions_enabled"),Ae=le(R?.uuid,Q?.cartItemsGroups);(0,i.useEffect)((()=>{l&&y&&("AVAILABLE"===P?.status||"SYNCING"===P?.status)&&(P?.actions?.syncCart({workflowUUID:y,orderUUID:y}),s(!1))}),[l,P,y]),(0,i.useEffect)((()=>{Boolean(Ae&&Q?.cartItemsGroups?.length&&Q?.cartItemsGroups?.length>0)&&!u.current&&(r("eats:restricted_items_sectioned_cart_impression",{storeUuid:g||"",cartItemsGroupsCount:Q?.cartItemsGroups?.length??0}),u.current=!0)}),[Q?.cartItemsGroups,r,Ae,g]);const fe=(0,ue.SF)(Te),Ze=()=>b&&me?.charges?(0,p.tZ)(Qe,{children:(0,p.tZ)(E.jH,{charges:me?.charges})}):J?(0,p.tZ)(se.Z,{}):j||K?(0,p.BX)(rt,{children:[(0,p.BX)(it,{$isXlbFrictionBatch2CheckoutEnabled:h,children:[fe,v&&0===N?(0,p.tZ)(ot,{children:(0,p.tZ)(n.v,{id:"cart.shared.savings.applied"})}):null]}),(0,p.tZ)(C,{subtotal:j,isLoading:K})]}):null,Le=(0,i.useMemo)((()=>(e=>{if(!e||!e?.cartItems)return[];const t=new Set,r=(e.actionableBanners||[]).map((r=>{const i=(e?.cartItems||[]).filter((e=>r?.actionableBannerContent?.actionableBannerContentCartItems?.some((t=>t.shoppingCartItemUUIDs?.includes(e?.shoppingCartItemUUID||"")))));i.forEach((e=>t.add(e.shoppingCartItemUUID||"")));const o=Pe(r);return{actionableBanner:o?.bannerViewModel,cartItems:i,collectionUuid:o?.collectionUuid,promotionUuid:o?.promotionUuid}})),i=e.cartItems.filter((e=>!t.has(e.shoppingCartItemUUID||"")));return i.length>0&&r.push({cartItems:i}),r})(Q)),[Q]),Ne=(0,i.useMemo)((()=>Re&&ge?(e=>{if(!e?.cartItemsGroups||0===e.cartItemsGroups.length)return[];if(!e.cartItemsGroups.some((e=>e.actionableBanners?.some((e=>"openItemLevelPromotionMetadata"===e.actionMetadata?.type)))))return[];const t=[];return e.cartItemsGroups.forEach((e=>{const r=new Set;(e.actionableBanners||[]).forEach((i=>{switch(i.actionMetadata?.type){case"openItemLevelPromotionMetadata":{const o=(e?.cartItems||[]).filter((e=>i?.actionableBannerContent?.actionableBannerContentCartItems?.some((t=>t.shoppingCartItemUUIDs?.includes(e?.shoppingCartItemUUID||"")))));o.forEach((e=>r.add(e.shoppingCartItemUUID||"")));const n=Pe(i);t.push({actionableBanner:n?.bannerViewModel,actionableBannerType:"openItemLevelPromotionMetadata",fullActionableBanner:i,cartItems:o,draftOrderUUID:e?.draftOrderUUID||"",collectionUuid:n?.collectionUuid,promotionUuid:n?.promotionUuid,fullCartItemsGroup:e});break}case"openBottomSheetMetadata":t.push({actionableBanner:i.bannerModel,actionableBannerType:"openBottomSheetMetadata",fullActionableBanner:i,cartItems:[],draftOrderUUID:e?.draftOrderUUID||"",fullCartItemsGroup:e})}}));const i=(e.cartItems||[]).filter((e=>!r.has(e.shoppingCartItemUUID||"")));i.length>0&&t.push({actionableBanner:null,cartItems:i,draftOrderUUID:e?.draftOrderUUID||"",fullCartItemsGroup:e})})),t})(Q):[]),[Q,Re,ge]),ve=we(q);return(0,i.useEffect)((()=>{r("eats:cart_nudges_offers_impression",{paramValue:G,storeUuid:g||"",numberOfItems:ve})}),[r,G,g,ve]),(0,p.BX)(p.HY,{children:[(0,p.tZ)(Se,{cartPageHeader:ee}),b?null:(0,p.tZ)(p.HY,{children:I&&D?null:(0,p.BX)(p.HY,{children:[(0,p.tZ)(x.IY,{}),Ae||_||!j&&!K?null:(0,p.BX)(p.HY,{children:[(0,p.BX)(je,{children:[(0,p.tZ)(Je,{children:(0,p.tZ)(ze,{})}),(0,p.tZ)(et,{children:(0,p.BX)(et,{children:[fe,":"]})}),(0,p.tZ)(tt,{children:(0,p.tZ)(C,{subtotal:j,isLoading:K})})]}),(0,p.tZ)(Ge,{})]})]})}),(0,p.tZ)(Ue,{section:_e?.inReviewItemDetails}),(I||Ae)&&Q?.cartItemsGroups?Q?.cartItemsGroups?.map((e=>(0,p.tZ)(m.zW,{draftOrderUUID:e.draftOrderUUID,children:Re&&ge&&Ne.length>0&&(e.actionableBanners||[]).length>0?(0,p.tZ)(p.HY,{children:Ne.map(((e,r)=>(0,p.tZ)(He,{itemGroup:e,isItemLevelPromotion:"openItemLevelPromotionMetadata"===e.actionableBannerType,isSingleOrderWithCartItemsGroups:Ae,quantitySelectType:t,isLiveOrder:b,isLiveOrderCartLoading:M},r)))}):(0,p.tZ)(qe,{isSingleOrderWithCartItemsGroups:Ae,quantitySelectType:t,cartItems:e.cartItems??void 0,cartItemsGroup:e,isLiveOrder:b})},e.draftOrderUUID))):(0,p.BX)(p.HY,{children:[Re&&Le.length>0?(0,p.tZ)(p.HY,{children:Le.map((e=>(0,p.tZ)(p.HY,{children:e.actionableBanner?(0,p.BX)(p.HY,{children:[(0,p.tZ)("div",{children:(0,p.tZ)(Z.rU,{to:(0,Me.vN_)(S,"multiSkuPromotion",{storeUuid:g,catalogSectionUuid:e.collectionUuid,...e.promotionUuid&&{promotionUUID:e.promotionUuid}}),children:(0,p.tZ)(ye.Z,{viewModel:e.actionableBanner??{},overrides:{messageContent:{paddingBlockEnd:"0px",paddingBlockStart:"0px"},leadingContent:{paddingInlineStart:"0px"}},noMargin:!0,noPadding:!0})})}),(0,p.tZ)(qe,{isLiveOrderCartLoading:M,isSingleOrderWithCartItemsGroups:Ae,quantitySelectType:t,cartItems:e?.cartItems??void 0,isLiveOrder:b,isPromotionGroup:!0})]}):(0,p.tZ)(qe,{isLiveOrderCartLoading:M,isSingleOrderWithCartItemsGroups:Ae,quantitySelectType:t,cartItems:e?.cartItems??void 0,isLiveOrder:b,isPromotionGroup:!1})})))}):(0,p.tZ)(p.HY,{children:(0,p.tZ)(qe,{isLiveOrderCartLoading:M,isSingleOrderWithCartItemsGroups:Ae,quantitySelectType:t,cartItems:Q?.cartItems??void 0,isLiveOrder:b})}),(0,p.tZ)(Ue,{section:ce?.unfulfilledItemDetails}),(0,p.tZ)(Ue,{section:Ie?.unEditableItemDetails}),(0,p.tZ)(Ue,{section:de?.foundItemDetails}),(0,p.tZ)(Ue,{section:de?.replacedItemDetails})]}),U.data&&G&&q?(0,p.BX)(p.HY,{children:[(0,p.tZ)(te,{store:U.data,isGrocery:L,upsellCatalogSectionsPayload:q,primaryDraftOrderUUID:Ce,primaryBundledStoreUUID:De,surface:oe.b.CART_UPSELL,redirectToQuickViewModal:G,overrideColumnsPerRow:we(q)>1?2:void 0}),(0,p.tZ)(Ge,{})]}):null,(0,p.tZ)(be,{promotion:Oe}),(0,p.tZ)(Ze,{}),he?(0,p.tZ)("div",{children:he?.map(((e,t)=>(0,p.tZ)(ne.Z,{badge:e},t)))}):null,b||!k||J?null:(0,p.tZ)("div",{children:(0,p.tZ)(Ke,{children:(0,p.tZ)(O,{})})})]})}},15840:(e,t,r)=>{r.d(t,{Z:()=>P,C:()=>M});var i=r("__fusion__476"),o=r(81231),n=r(91931),a=r(75161),l=r(91086),s=r(33259),d=r(34217),c=r(74820),u=r(70589),_=r(4909),E=r(62091),I=r(5639),m=r(4661),p=r(52909),O=r(59924);const T=(0,n.zo)("ul",(e=>{let{$theme:t}=e;return{}})),h=(0,n.zo)("li",(e=>{let{$theme:t}=e;return{display:"flex",padding:`${t.sizing.scale600} 0`}})),D=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{padding:t.sizing.scale700}})),C=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{}})),R=(0,n.zo)("div",(e=>{let{$theme:t,$isBold:r}=e;return Object.assign({marginBottom:t.sizing.scale100},r?{...t.typography.LabelMedium}:{...t.typography.ParagraphSmall})})),g=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall}})),U=(0,n.zo)(E.Z,(e=>{let{$isDarkMode:t}=e;return{...t?{filter:"invert(100%)"}:{}}})),A=e=>e.bottomSheet?(0,O.tZ)(m.P,{bottomSheet:e.bottomSheet,onClose:()=>e.onClose(),isOpen:e.isOpen,__invertIconColorOnDarkMode:!0}):null,S=e=>{const t=(0,p.e5)();return(0,O.BX)(a.u_,{closeable:!0,isOpen:e.isOpen,onClose:()=>e.onClose(),children:[(0,O.tZ)(l.xB,{title:e.bottomSheet?.title?.text,leftButton:(0,O.tZ)(s.hQ,{onClick:()=>e.onClose()})}),(0,O.BX)(d.f,{$removeMarginTop:!0,children:[(0,O.tZ)(c.r,{children:e.bottomSheet?.title?.text}),(0,O.tZ)(T,{children:e.bottomSheet?.paragraphs?.map((e=>{let{title:r,iconUrl:i,isTitleBold:o,subtitle:n}=e;return(0,O.BX)(h,{children:[i?(0,O.tZ)(D,{children:(0,O.tZ)(U,{src:i,$isDarkMode:t})}):null,(0,O.BX)(C,{children:[(0,O.tZ)(R,{$isBold:o,children:r}),(0,O.tZ)(g,{children:n})]})]},r)}))})]}),(0,O.tZ)(u.m,{children:(0,O.tZ)(_.V,{onClick:()=>e.onClose(),children:e.bottomSheet?.buttonText})})]})},f=e=>{const{isMobile:t}=(0,I.hU)();return t?(0,O.tZ)(A,{isOpen:e.isOpen,onClose:e.onClose,bottomSheet:e.actionMetadata?.bottomSheet}):(0,O.tZ)(S,{isOpen:e.isOpen,onClose:e.onClose,bottomSheet:e.actionMetadata?.bottomSheet})};var Z=r(33535),L=r(70247),N=r(72179),v=r(27871),b=r(80443),y=r(39874);const P=()=>{const{isCartDrafting:e}=(0,N.Z)(),{promoAndMembershipSavingBannerPayload:t}=(0,v.ZP)([...e?["promoAndMembershipSavingBannerPayload"]:[]]).checkoutPayloads,r=(0,y.Z)(t?.listContentViewModel);return r?(0,O.tZ)("div",{children:(0,O.tZ)(b.Z,{viewModel:r})}):null},M=e=>{let{bannerAction:t}=e;const[r,n]=i.useState(!1),a=(0,Z.ZP)(),{draftOrder:l}=(0,L.Dz)();return t.bannerModel?(0,O.BX)(O.HY,{children:[(0,O.tZ)(o.Z,{onClick:()=>{n(!0),a("eats:saving_banner_click",{storePreCheckoutBundling:{draftOrderUuid:String(l?.uuid),bundleGroupRole:String(l?.bundleGroupInfo?.bundleGroupRole)}})},viewModel:t.bannerModel,noMargin:!0}),(0,O.tZ)(f,{isOpen:r,actionMetadata:"openBottomSheetMetadata"===t.actionMetadata?.type?t.actionMetadata.openBottomSheetMetadata:void 0,onClose:()=>n(!1)})]}):null}},23314:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(74369),o=r(94813),n=r(78989),a=r(47986),l=r(83960);const s=()=>{const e=(0,o.TH)(),{isOnPremiseDeliveryOrder:t}=(0,n.Z)(),{isDraftOrderCreator:r,isDraftOrderCartLocked:s}=(0,l.Z)();return(0,i.useMemo)((()=>t?(0,a.vN_)(e,"premiseDeliveryInfo"):r&&!s?(0,a.vN_)(e,"lockGroupCart"):(0,a.Zs0)(e,{nextUrl:(0,a.VS)(e)})),[s,r,t,e])}},78365:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r("__fusion__476"),o=r(94813),n=r(62104);const a=e=>{if(!(0,n.TP)(e))return;let t;try{t=(0,n.$I)(e)}catch(e){return}return t};function l(e){const t=(0,o.TH)();return i.useMemo((()=>{if(!e)return!1;const r=a(e);return t.pathname.includes(r)}),[t.pathname,e])}},70589:(e,t,r)=>{r.d(t,{m:()=>d});var i=r(91931),o=r(37771),n=r(59924);const a=(0,i.zo)("div",(e=>{let{$theme:t,$sticky:r,$isStuck:i}=e;return{paddingLeft:t.sizing.scale600,paddingRight:t.sizing.scale600,paddingTop:t.sizing.scale600,paddingBottom:t.sizing.scale600,[t.mediaQuery.medium]:{paddingLeft:t.sizing.scale800,paddingRight:t.sizing.scale800,paddingTop:t.sizing.scale800,paddingBottom:t.sizing.scale800},...r?{background:t.colors.backgroundPrimary,position:"sticky",bottom:0,boxShadow:i?t.lighting.shallowAbove:void 0}:null}})),l=(0,i.zo)("div",{flexGrow:1}),s=(0,i.zo)("div",{height:"0px"}),d=(0,i.Le)(a,(e=>function(t){const{sticky:r=!0,pushToBottom:i=!0,children:a}=t,{sentinelHidden:d,sentinelRef:c}=(0,o.U)({detectionMode:o.P.below});return(0,n.BX)(n.HY,{children:[i?(0,n.tZ)(l,{}):null,r?(0,n.tZ)(s,{ref:c}):null,(0,n.tZ)(e,{$sticky:r,$isStuck:r&&d,children:a})]})}))},32755:(e,t,r)=>{r.d(t,{ZP:()=>i});const i=r(17604).cS},67318:(e,t,r)=>{r.d(t,{X:()=>a,t:()=>n});var i=r(62104),o=r(47986);const n=(e,t)=>{const r={entryPoint:t.entryPoint};return t.storeUuid&&(r.encodedStoreUuid=(0,i.$I)(t.storeUuid)),(0,o.vN_)(e,"deliveryTime",encodeURIComponent(JSON.stringify(r)))},a=(e,t,r)=>{const n={entryPoint:t.entryPoint};return t.storeUuid&&(n.encodedStoreUuid=(0,i.$I)(t.storeUuid)),t.openedFromMenuDialogue&&(n.openedFromMenuDialogue=!0),(0,o.vN_)(e,"storeDeliveryTime",encodeURIComponent(JSON.stringify(n)),r)}},70940:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(64388);function o(e){const{store:t}=(0,i.ZP)(e??"");return!e||"USE_SECTION_AS_CATEGORY"===t.data?.menuDisplayType}},78989:(e,t,r)=>{r.d(t,{Z:()=>p,w:()=>m});var i=r(74369),o=r(69420),n=r(89151),a=r(70605),l=r(47986),s=r(53308),d=r(64282),c=r(94813),u=r(83960),_=r(27871);const E="uev2.premise-delivery-info",I="premise_delivery_info";function m(e){if(!e)return null;const t=e.premiseDeliveryInfo;if(!t)return null;return[t.map((e=>{let{label:t,venueSectionName:r}=e;return`${t} ${r}`})).join(", "),e.notes].filter(Boolean).join(" - ")}function p(){const e=(0,d._)(),t=(0,c.TH)(),r=(0,o.k6)(),p=(0,s.I0)(),O=(0,_.CF)(),{diningMode:T}=(0,u.Z)(),h=(0,n.useQueryClient)(),D="ON_PREMISE_DELIVERY"===T?"HOTEL":"STADIUM",C=O?.data?.checkoutPayloads?.venueSectionPicker?.venueSectionPickerViewModel||null,R=(0,n.useQuery)(I,(()=>h.getQueryData(I)||{}),{staleTime:1/0})?.data??null,g=(0,i.useCallback)((t=>{e.set(E,t,86400),h.setQueryData(I,t)}),[e,h]),U=(0,i.useCallback)((()=>{e.remove(E),h.removeQueries({queryKey:I,exact:!0})}),[e,h]),A=(0,i.useCallback)((e=>{g(e),p((0,a.oo)({tableNumber:m(e)||"",action:"complete"})),r.push((0,l.Zs0)(t))}),[g,p,r,t]),S="ON_PREMISE_DELIVERY"===T||Boolean(C);return(0,i.useEffect)((()=>{const t=e.get(E);Boolean(t)&&!R&&h.setQueryData(I,t)}),[e,R,h]),{setPremiseDeliveryInfo:g,removePremiseDeliveryInfo:U,checkoutWithPremiseDeliveryInfo:A,venueSectionPickerViewModel:C,isOnPremiseDeliveryOrder:S,premiseDeliveryInfo:R,premiseDeliveryType:D,isLoading:!O?.hasLoaded}}},1938:(e,t,r)=>{r.d(t,{C:()=>n,R:()=>o});var i=r(49201);function o(e){const t=e.options.find((e=>e.isSelectedTip))?.amount||0,r=e.customTipOption&&e.customTipOption.isSelectedTip?e.customTipOption.amount:0;return t||r}function n(e,t){return(0,i.xG)(t,e.currencyCode,o(e))}}}]);