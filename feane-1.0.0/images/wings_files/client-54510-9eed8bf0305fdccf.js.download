"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[54510],{80542:(t,e,i)=>{i.d(e,{WR:()=>r,kf:()=>a,ur:()=>o,z1:()=>n});Object.freeze({COURIER_RATING:"COURIER_RATING",COURIER_TIP:"COURIER_TIP",STORE_RATING:"STORE_RATING",ITEMS_RATING:"ITEMS_RATING",UNKNOWN:"UNKNOWN",COURIER_RATING_TIP:"COURIER_RATING_TIP",COURIER_TIP_V2:"COURIER_TIP_V2",COURIER_TIP_V2_EMBEDDED_TIP:"COURIER_TIP_V2_EMBEDDED_TIP",STORE_CUSTOM_TAGS:"STORE_CUSTOM_TAGS",STORE_PREDEFINED_TAGS:"STORE_PREDEFINED_TAGS",STORE_SUPERFAN_EDUCATION:"STORE_SUPERFAN_EDUCATION",STORE_SUPERFAN_COLLECTION:"STORE_SUPERFAN_COLLECTION"}),Object.freeze({UNKNOWN:"UNKNOWN",EVENT:"EVENT",CONVERSATION:"CONVERSATION"}),Object.freeze({OUT_OF_ITEM:"OUT_OF_ITEM",OUT_OF_OPTION:"OUT_OF_OPTION",CANNOT_FULFILL_ITEM_INSTRUCTION:"CANNOT_FULFILL_ITEM_INSTRUCTION",CANNOT_FULFILL_RESTAURANT_INSTRUCTION:"CANNOT_FULFILL_RESTAURANT_INSTRUCTION",UNKNOWN:"UNKNOWN",PARTIAL_ITEM_AVAILABILITY:"PARTIAL_ITEM_AVAILABILITY"}),Object.freeze({UNKNOWN:"UNKNOWN",BOTTOMSHEET:"BOTTOMSHEET",TOAST:"TOAST",SLOW_TOAST:"SLOW_TOAST",GENERIC_NOTIFICATION:"GENERIC_NOTIFICATION",FULL_SCREEN:"FULL_SCREEN"}),Object.freeze({UNKNOWN:"UNKNOWN",APT_OR_SUITE:"APT_OR_SUITE",BUILDING:"BUILDING",PLACEHOLDER_2:"PLACEHOLDER_2",PLACEHOLDER_3:"PLACEHOLDER_3",PLACEHOLDER_4:"PLACEHOLDER_4"}),Object.freeze({UNKNOWN:"UNKNOWN",UGC:"UGC",UBER:"UBER",GOOGLE:"GOOGLE"}),Object.freeze({UNKNOWN:"UNKNOWN",ACCESS_POINT:"ACCESS_POINT",DEVICE_POINT:"DEVICE_POINT"}),Object.freeze({UNKNOWN:"UNKNOWN",LEAVE_AT_DOOR:"LEAVE_AT_DOOR"}),Object.freeze({UNKNOWN:"UNKNOWN",PRIMARY_RESTAURANT:"PRIMARY_RESTAURANT",ADD_ON_RESTAURANT:"ADD_ON_RESTAURANT",RESERVED_3:"RESERVED_3"}),Object.freeze({UNKNOWN:"UNKNOWN",STAR:"STAR",THUMBS_UP:"THUMBS_UP",CUSTOM:"CUSTOM",CANCELLATION:"CANCELLATION",ACCEPTANCE:"ACCEPTANCE"}),Object.freeze({UNKNOWN:"UNKNOWN",SATISFACTION_RATE:"SATISFACTION_RATE",BACKGROUND_CHECK:"BACKGROUND_CHECK"}),Object.freeze({UNKNOWN:"UNKNOWN",ANIMATION:"ANIMATION",STATIC_IMAGE:"STATIC_IMAGE",RESERVED_3:"RESERVED_3",RESERVED_4:"RESERVED_4",RESERVED_5:"RESERVED_5",RESERVED_6:"RESERVED_6"}),Object.freeze({UNKNOWN:"UNKNOWN",ORDER_DELIVERED:"ORDER_DELIVERED"}),Object.freeze({DEFAULT:"DEFAULT",VENUE:"VENUE"}),Object.freeze({POPULAR:"POPULAR",PFY:"PFY",TRENDING:"TRENDING",EATER_ENDORSED:"EATER_ENDORSED",SIMILAR_DISH:"SIMILAR_DISH",RECOMMENDED:"RECOMMENDED"}),Object.freeze({SHOPPING_BAG:"SHOPPING_BAG",BADGE:"BADGE"}),Object.freeze({OK:"OK",NO_ORDER:"NO_ORDER",NO_MATCHING_ORDER:"NO_MATCHING_ORDER",NO_ACTIVE_RATABLE_ORDER:"NO_ACTIVE_RATABLE_ORDER",NO_COMPLETED_RATABLE_ORDER:"NO_COMPLETED_RATABLE_ORDER",NOT_IN_RATABLE_TIME_WINDOW:"NOT_IN_RATABLE_TIME_WINDOW",ALREADY_RATED:"ALREADY_RATED",RATING_DISMISSED:"RATING_DISMISSED",NO_RATABLE_SUBJECT:"NO_RATABLE_SUBJECT",NOT_ELIGIBLE_FOR_SUPERFAN:"NOT_ELIGIBLE_FOR_SUPERFAN",NO_STORE:"NO_STORE",STORE_NOT_RATABLE:"STORE_NOT_RATABLE",NO_STORE_UUID:"NO_STORE_UUID",SUPPRESSED:"SUPPRESSED",REPLACED_WITH_BILLBOARD_CARD:"REPLACED_WITH_BILLBOARD_CARD",ERROR_GET_DURATION_SINCE_COMPLETION_IN_MINUTES:"ERROR_GET_DURATION_SINCE_COMPLETION_IN_MINUTES"}),Object.freeze({UNKNOWN:"UNKNOWN",EATS_CONFIG_TYPE:"EATS_CONFIG_TYPE",GROCERY_CONFIG_TYPE:"GROCERY_CONFIG_TYPE"}),Object.freeze({UNKNOWN:"UNKNOWN",GREEN:"GREEN",LUCKY_CHARMS:"LUCKY_CHARMS",GXGY_INVITER:"GXGY_INVITER",GXGY_INVITEE:"GXGY_INVITEE",EXGY:"EXGY",RESTAURANT_REWARD_REFERRALS:"RESTAURANT_REWARD_REFERRALS",UNUSED_TYPE7:"UNUSED_TYPE7",UNUSED_TYPE8:"UNUSED_TYPE8",UNUSED_TYPE9:"UNUSED_TYPE9",UNUSED_TYPE10:"UNUSED_TYPE10",UNUSED_TYPE11:"UNUSED_TYPE11",UNUSED_TYPE12:"UNUSED_TYPE12",UNUSED_TYPE13:"UNUSED_TYPE13",UNUSED_TYPE14:"UNUSED_TYPE14",UNUSED_TYPE15:"UNUSED_TYPE15",UNUSED_TYPE16:"UNUSED_TYPE16"}),Object.freeze({UNKNOWN:"UNKNOWN",AUTO_APPLY:"AUTO_APPLY",MANUAL_APPLY:"MANUAL_APPLY",GXGY:"GXGY",GXGY_INVITEE:"GXGY_INVITEE",EXGY:"EXGY"});const a=Object.freeze({ITEM:"ITEM",CANONICALPRODUCT:"CANONICALPRODUCT",CROSS_SELL:"CROSS_SELL",FOOD_COURT:"FOOD_COURT"}),n=Object.freeze({UNKNOWN:"UNKNOWN",STORE:"STORE",CART:"CART",FEED:"FEED",COMBO_PAGE:"COMBO_PAGE",PDP_CROSS_SELL:"PDP_CROSS_SELL",NUDGE:"NUDGE"}),o=Object.freeze({UNKNOWN:"UNKNOWN",GROUP_ITEMS:"GROUP_ITEMS"}),r=(Object.freeze({DEFAULT:"DEFAULT",CLICK_THROUGH:"CLICK_THROUGH",CHECKBOX:"CHECKBOX"}),Object.freeze({UNKNOWN:"UNKNOWN",SUPERFANS:"SUPERFANS",EATER_GENERATED_TAGS:"EATER_GENERATED_TAGS"}),Object.freeze({FALSE_MISLEADING_INFORMATION:"FALSE_MISLEADING_INFORMATION",STORE_AFFILIATE:"STORE_AFFILIATE",STORE_COMPETITOR:"STORE_COMPETITOR",THREAT_HATE_SPEECH:"THREAT_HATE_SPEECH",INAPPROPRIATE_OFFENSIVE:"INAPPROPRIATE_OFFENSIVE",OTHER:"OTHER"}));Object.freeze({UNKNOWN:"UNKNOWN",SKIPPED:"SKIPPED",SUBMITTED:"SUBMITTED"})},27837:(t,e,i)=>{i.d(e,{Z:()=>_});var a=i(44369),n=i(94813),o=i(47986),r=i(44058);const u=18,s=Array(9).fill("1").join(""),d=t=>{const e=(t.match(/.{1,2}/g)??[]).map((t=>Number(t).toString(16)));e.splice(8,0,"-"),e.splice(13,0,"-"),e.splice(18,0,"-"),e.splice(23,0,"-");const i=e.join("");return(t=>(0,r.Z)(t))(i)?i:null},l=t=>{const e={storeUuid:void 0,lat:void 0,lng:void 0};if(!(t=>"string"==typeof t&&82===t.length&&/^\d+$/.test(t))(t))return e;const i=t.slice(0,u),a=t.slice(u,82),n=d(a),[o,r]=(t=>{const[e,i]=t.match(new RegExp(".{1,9}","g"))??[void 0,void 0];if(e===s||i===s)return[null,null];const[a,n]=[e,i].map((t=>{if(t)return("1"===t[0]?1:-1)*(Number(t.slice(1))/1e5)}));return(t=>t>=-90&&t<=90)(a)&&(t=>t>=-180&&t<=180)(n)?[a,n]:[void 0,void 0]})(i);return"string"==typeof n&&void 0!==o&&void 0!==r?{storeUuid:n,lat:o,lng:r}:e};var c=i(42301),E=i(87444),m=i(91496);const _=()=>{const t=(0,E.Z)("canonical_pdp_google_ads"),e=(0,n.TH)(),i=(0,m.Z)();if(!t)return{isGoogleAd:!1,lat:void 0,lng:void 0,storeUuid:void 0};const r=a.parse(e.search),u=(0,c.u)(r[o.FSm.googleAdRegionId]),s=i.get(u),{lat:d,lng:_,storeUuid:I}=l(u);return!s&&u&&void 0!==I&&void 0!==d&&void 0!==_?{isGoogleAd:!0,lat:d,lng:_,storeUuid:I}:{isGoogleAd:!1,lat:void 0,lng:void 0,storeUuid:void 0}}},67702:(t,e,i)=>{i.d(e,{Q:()=>u,Z:()=>s});var a=i(74369),n=i(68799),o=i(22208),r=i(5639);const u=(t,e)=>Object.values(e[t]??{}).reduce((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;const i=e?.filter((t=>t.quantity>0))??[];return t.push(...i),t}),[])??[],s=t=>{const[e,i]=(0,a.useState)({}),{isMobile:u}=(0,r.hU)(),s=(0,a.useCallback)(((t,a,r)=>{const{referrerItem:s,referrerItemCatalog:d}=a;if(e[s]?.[d]){const a=e[s][d].find((e=>e.uuid===t)),l=e[s][d].filter((e=>e.uuid!==t));if(a&&r>=0){const t=[...l,{...a,quantity:r>=0?r:0}],c={...e,[s]:{...e[s],[d]:t}};i(c),!u&&(0,n.pc)(o.gr.itemsAwaitingCart,c)}}}),[e,u]),d=(0,a.useCallback)(((a,r)=>{const{referrerItem:s,referrerItemCatalog:d}=r,l=e[s]?.[d]?.filter((t=>t.uuid!==a.uuid))??[],c=e[s]?.[d]?.find((t=>t.uuid===a.uuid)),E=c?{...c,quantity:c.quantity+a.quantity}:a;if(d){const a={...e,[s]:{...e[s],[d]:[...l,E]}};i(a),!u&&(0,n.pc)(o.gr.itemsAwaitingCart,a),t(E)}}),[e,t,u]);return{itemsAwaitingCart:e,adjustAwaitingCartItemQuantity:s,addToAwaitingCart:d,setItemsAwaitingCart:i}}},51327:(t,e,i)=>{i.d(e,{k:()=>r});var a=i(60849),n=i(43426),o=i(94813);function r(){const t=(0,o.TH)(),e=(0,a.qp)({...n.J.boga_catalog_section_uuid,defaultValue:""});return{isBOGAFreeItemSection:t?.state?.inMemoryCartContext?.referrerItemCatalog===e}}},54510:(t,e,i)=>{i.d(e,{Z:()=>Y});var a=i(74369),n=i(69420),o=i(14016),r=i(47986),u=i(64388),s=i(31755),d=i(53890),l=i(53176),c=i(70496),E=i(67476),m=i(88671),_=i(68094),I=i(60362),O=i(15649),T=i(34274),N=i(28222),p=i(49723),R=i(53308),A=i(6703),U=i(62155);const S=[i(67526).fn.STORES_WITH_PRODUCT],C=t=>{let{canonicalProduct:e,storeItem:i,isDeliveryLocationSet:a}=t;if(!(e.hasLoaded&&i.hasLoaded&&e.data&&i.data))return e;const n=(t=>{let{canonicalProduct:e,storeItem:i}=t;return[...(i.productDetailsItems||[]).filter((t=>!S.includes(t.type))),...(e?.productDetailsItems||[]).filter((t=>S.includes(t.type)))]})({canonicalProduct:e.data,storeItem:i.data}),o={...i.data,title:e.data?.title,itemDescription:e.data.itemDescription,imageUrl:e.data.imageUrl,images:e.data.images,nutritionalInfo:e.data.nutritionalInfo,brandName:e.data.brandName,productIdentifiers:e.data.productIdentifiers,productDetailsItems:n,seoMeta:e.data.seoMeta};return{...e,data:o}},f=t=>{let{canonicalProduct:e,storeUuid:i,isDeliveryLocationSet:a,isGoogleAd:n}=t;if(!e.hasLoaded||!e.data)return e;const o=(0,U.vu)(e?.data?.productDetailsItems),r=(a||n?null:((t,e)=>(t?.storesWithProduct||[]).reduce(((t,i)=>{let{minPrice:a,storeWithProduct:n}=t;const o=e[i?.itemUuid||""]?.price||null;return"number"!=typeof a||"number"!=typeof o||o<a?{minPrice:o,storeWithProduct:i}:{minPrice:a,storeWithProduct:n}}),{minPrice:null,storeWithProduct:null}).storeWithProduct?.storeUuid||null)(o,e.data?.storeItemsMap||{}))||i||o?.defaultSelectedStoreUuid;if(!r)return e;const u=o?.storesWithProduct?.find((t=>{let{storeUuid:e}=t;return e===r})),s=u?.itemUuid||"",d=e.data?.storeItemsMap?.[s]??null,l={...e,data:d&&{...d,endorsement:e.data.endorsement}};return C({canonicalProduct:e,storeItem:l,isDeliveryLocationSet:a})};var D=i(54669),y=i(83960),P=i(27837),L=i(87444),g=i(94813),M=i(22208),G=i(80542),b=i(84272),F=i(60849),B=i(57440),h=i(89151),v=i(2237),z=i(62459),K=i(81436);var x=i(47857),W=i(98976);const Q=t=>{switch(t){case"FEED":return G.z1.FEED;case"STORE":return G.z1.STORE;case"PDP_CROSS_SELL":return G.z1.PDP_CROSS_SELL;default:return G.z1.UNKNOWN}},V=t=>{let{itemUuid:e,storeUuid:i,isCanonicalItemFlow:a,canonicalItemDefaultStoreUuid:n,diningMode:o,primaryBundledStoreUuid:r,isQueryEnabled:u,itemRequestType:s,sectionUuid:d,subsectionUuid:l,hasGoogleAdLatLng:c,googleAdLat:E,googleAdLng:m,isEditFlow:_}=t;const I=(0,g.TH)(),O=(0,L.Z)("canonical_pdp_use_get_canonical_product_item_rpc")&&a,T=I.state?.inMemoryCartContext,N=[{type:G.ur.GROUP_ITEMS,payload:{type:"groupItemsContextReferencePayload",groupItemsContextReferencePayload:{catalogSectionUUID:T?.referrerItemCatalog,promotionUUID:T?.promotionUUID}},pageContext:Q(I.state?.previousContext)}],p=(0,W.hn)((0,x.A)({itemRequestType:s,storeUuid:a?n:i,sectionUuid:a?"":d,subsectionUuid:a?"":l,menuItemUuid:e,diningMode:o,isEditFlow:_,cbType:"EATER_ENDORSED",...r?{primaryBundledStoreUuid:r}:{},...c&&E&&m?{googleAdLocation:{lat:E,lng:m}}:{},contextReferences:N},{preparedId:"mobile-menu-item",queryObserverOptions:{enabled:u&&!O}})),R=(0,W.hn)(function(t,e){const i=(0,z.Z)("getCanonicalProductItemV1"),a=(0,h.useQueryClient)(),n=(0,v.H)("getCanonicalProductItemV1",t),o=(0,h.useQuery)({queryKey:n,queryFn:t=>{let{queryKey:e}=t;return i.request("getCanonicalProductItemV1",e[1])},...e?.queryObserverOptions}),r=Boolean(e.queryObserverOptions?.enabled??!0);return(0,K.Z)((()=>!o.isFetched&&r?a.prefetchQuery({queryKey:n,queryFn:t=>{let{queryKey:e}=t;return i.request("getCanonicalProductItemV1",e[1])}}):null),[o,i,n,a,r],e.preparedId,(0,h.hashQueryKey)(n)),o}({storeUuid:a?n:i,menuItemUuid:e,diningMode:o,cbType:"EATER_ENDORSED",...r?{primaryBundledStoreUuid:r}:{},...c&&E&&m?{googleAdLocation:{lat:E,lng:m}}:{},contextReferences:N},{preparedId:"canonical-product-item",queryObserverOptions:{enabled:u&&O}}));return O?R:p};var H=i(67702);const Y=function(){let{shouldNavigateBackToStoreOnItemAdd:t=!0,canonicalItemStoreUuid:e,productUuid:i,itemParams:U,isEditItemFlow:S=!1,editItemParams:C,preparedId:h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const v=Boolean(e||i),z=(0,n.UO)(),K=(0,g.TH)(),x=(0,n.k6)(),W=(0,D.Z)(),{previousContext:Q}=K.state||{},[Y,q]=(0,a.useState)(!1),[Z,w]=(0,a.useState)(""),[k,j]=(0,a.useState)(null),X=Boolean(K.state?.inMemoryCartContext?.referrerItem&&K.state?.inMemoryCartContext?.referrerItemCatalog),{primaryBundledStoreUuid:J}=(0,b.Z)();let $,tt,et,it,at;if(U)$=U.storeUuid,tt=U.itemUuid,et=U.sectionUuid,it=U.subsectionUuid,at=U.primaryBundledStoreUuid;else{const t=(0,r.x9r)(z);$=t.storeUuid,tt=t.itemUuid,et=t.sectionUuid,it=t.subsectionUuid,at=J}const nt=e??$,ot=i||tt,rt=(0,F.ip)({...B.X.product_details_page_ssr,defaultValue:!1}),ut=!W&&rt&&h,st=Boolean(ot&&(v||nt&&et&&it)),{store:dt}=(0,u.ZP)(nt,{...ut?{preparedId:h}:{}}),{partialMenuItem:lt}=(0,s.Z)(dt,nt,et,it,ot),ct=(0,m.k)(),Et=(0,R.I0)(),mt=(e,i,a,n)=>{ct(Boolean(e),i,a,dt,t,v,void 0,n),Et((0,A.AA)(ot))},{isGoogleAd:_t,storeUuid:It,lat:Ot,lng:Tt}=(0,P.Z)(),Nt=(0,L.Z)("canonical_pdp_google_ads"),pt=Nt&&_t&&null!==Ot&&null!==Tt,Rt=Nt&&It||"",At=v?G.kf.CANONICALPRODUCT:Q===M.x9.PDP_CROSS_SELL?G.kf.CROSS_SELL:G.kf.ITEM,{diningMode:Ut}=(0,y.Z)(nt),St=V({itemUuid:ot,storeUuid:nt,isCanonicalItemFlow:v,canonicalItemDefaultStoreUuid:Rt,diningMode:Ut,primaryBundledStoreUuid:at,isQueryEnabled:st,itemRequestType:At,sectionUuid:et,subsectionUuid:it,hasGoogleAdLatLng:pt,googleAdLat:Ot,googleAdLng:Tt,isEditFlow:C?.isEditQuantityFlow}),Ct=Boolean(W&&"geolocation_api"!==W?.originType),ft=(0,a.useMemo)((()=>v?f({canonicalProduct:St,storeUuid:nt,isDeliveryLocationSet:Ct,isGoogleAd:_t}):St),[St,nt,Ct,v,_t]),{outOfItemAction:Dt,updateOutOfItemAction:yt,backupProduct:Pt,updateBackupProduct:Lt,specialInstructions:gt}=(0,p.Z)(),{quantity:Mt,updateQuantity:Gt,decimalQuantity:bt,specialInstructions:Ft,updateSpecialInstructions:Bt,updateCustomizations:ht,selectedCustomizations:vt,itemsUpsell:zt,updateUpsellItemQuantity:Kt,hasErrors:xt,isOnSale:Wt,totalPrice:Qt,discountedPrice:Vt,firstIncompleteGroup:Ht,spendingLimitError:Yt,canEditGroupOrderCart:qt}=(0,d.ZP)({store:dt,menuItem:ft,selectedSavedCustomizationIndex:k,setSelectedSavedCustomizationIndex:j,isEditQuantityFlow:C?.isEditQuantityFlow,...C?.isEditQuantityFlow&&ft.data?.hasCustomizations&&!S?null:C});(0,a.useEffect)((()=>{Dt&&"string"==typeof gt&&gt!==Ft&&Bt(gt)}),[Dt,Ft,gt,Bt]);const Zt=(0,a.useCallback)((t=>{Bt(t)}),[Bt]),{addToCart:wt,didAddItem:kt}=(0,l.Z)({store:dt,menuItem:ft,selectedCustomizations:vt,quantity:Mt,specialInstructions:Ft,outOfItemAction:Dt,onAddedToCart:mt,decimalQuantity:bt,backupProduct:Pt,productUuid:v?i:null}),{addToAwaitingCart:jt,adjustAwaitingCartItemQuantity:Xt,itemsAwaitingCart:Jt,setItemsAwaitingCart:$t}=(0,H.Z)((t=>{t.uuid===St?.data?.uuid&&x.goBack()})),te=(0,c.Z)(),{isDraftOrderParticipantForStore:ee}=(0,E.Z)(dt.data?.uuid||""),ie=(0,o.T)(),ae=(0,O.Z)(),ne=(0,_.Z)(),oe=ne,re=oe.scheduled?ie("shared.notAvailable.dateAndTimeRange",{date:(0,I.p6)(ae,oe.date),startTime:(0,I.CJ)(ae,oe.startTime),endTime:(0,I.CJ)(ae,oe.endTime)}):dt.data?.closedMessage,ue=(0,N.Z)(),se=(0,T.Z)({storeUuid:dt.data?.uuid}),de=Boolean(dt.data?.uuid&&!Wt&&!ue&&!se);return{isDraftOrderParticipantForStore:ee,store:dt,menuItem:ft,didAddItem:kt,partialMenuItem:lt,quantity:Mt,decimalQuantity:bt,updateQuantity:Gt,specialInstructions:Ft,updateSpecialInstructions:Zt,updateCustomizations:ht,selectedCustomizations:vt,itemsUpsell:zt,hasErrors:xt,isOnSale:Wt,totalPrice:Qt,discountedPrice:Vt,addToCart:wt,firstIncompleteGroup:Ht,spendingLimitError:Yt,canEditGroupOrderCart:qt,isDeliveryLocationSet:Ct,setDeliveryLocation:t=>{t&&!Y&&(te(t),q(!0))},incompleteSubmissionState:Z||"",setIncompleteSubmissionState:t=>{w(t)},outOfItemAction:Dt,updateUpsellItemQuantity:Kt,updateOutOfItemAction:yt,showClosedRestaurantUX:de,storeUnavailableMessage:re||"",backupProduct:Pt,updateBackupProduct:Lt,selectedSavedCustomizationIndex:k,setSelectedSavedCustomizationIndex:j,canDeferSaveWithQualifyingProduct:X,itemsAwaitingCart:Jt,addToAwaitingCart:jt,adjustAwaitingCartItemQuantity:Xt,setItemsAwaitingCart:$t}}},25526:(t,e,i)=>{i.d(e,{V:()=>A,M:()=>R});var a=i(74369),n=i(14016),o=i(87444),r=i(9545),u=i(15649),s=i(49201);const d=t=>t?.maxRedemptionCount||0;function l(t,e){return{text:{text:t},predefinedDecorations:e}}function c(t){let{style:e="PARAGRAPH_DEFAULT",weight:i="NORMAL",color:a="CONTENT_PRIMARY"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t?.length)return{richTextElements:t.map((t=>{let{text:n,predefinedDecorations:o}=t;return{type:"text",text:{text:{text:n?.text||"",font:{style:e,weight:i},color:a},predefinedDecorations:o}}}))}}function E(t,e){if(e)return{illustrationContent:{illustration:{illustration:{icon:{icon:e,color:t,dimensions:{width:{spacingValue:"SPACING_UNIT_2X",type:"spacingValue"},height:{spacingValue:"SPACING_UNIT_2X",type:"spacingValue"}}},type:"icon"}}},type:"illustrationContent"}}const m=(t,e,i)=>{let a,n,o,r,u,{totalItems:s,redemptionCap:d}=t;return s>=2*d?(a="yellow"===i?"CONTENT_ON_COLOR_INVERSE":"CONTENT_ON_COLOR",n="yellow"===i||"red"===i?"BRAND_BACKGROUND_PRIMARY":"BACKGROUND_POSITIVE",o="CHECKMARK",r=e.free_items_limit_reached_label,u=e.free_items_limit_reached_subtitle,{title:c(r,{style:"LABEL_SMALL",weight:"MEDIUM",color:a}),...u?{subtitle:c(u,{style:"LABEL_X_SMALL",weight:"LIGHT",color:a})}:{},leadingContent:E(a,"CHECKMARK"),hasDivider:!1,size:{fixed:"COMPACT",type:"fixed"},styleAttributes:{backgroundColor:{backgroundColor:n,type:"backgroundColor"}}}):null};var _=i(53890),I=i(76594);const O=Object.freeze({UNKNOWN:"UNKNOWN",STRIKE_THROUGH:"STRIKE_THROUGH",UNDERLINE:"UNDERLINE"});Object.freeze({UNKNOWN:"UNKNOWN",HEAD:"HEAD",MIDDLE:"MIDDLE",TAIL:"TAIL"});var T=i(60849),N=i(57440),p=i(24472);const R=t=>{let{storeUuid:e,item:i,quantity:n,selectedCustomizations:o,isUpdateFlow:u}=t;const s=i?.hasCustomizations,[l]=(0,a.useReducer)(I.L,I.E),{serverCart:c}=(0,r.Z)(e),E=(0,a.useMemo)((()=>d(i?.itemPromotionV2?.promotionData)),[i?.itemPromotionV2?.promotionData]),m=(0,a.useMemo)((()=>(t=>(t||[]).reduce(((t,e)=>({...t,[e.uuid]:(t[e.uuid]||0)+e.quantity})),{}))(c.data?.items||[])),[c.data?.items]),O=(0,a.useMemo)((()=>c.data?.draftOrderUuid),[c.data?.draftOrderUuid]),p=(0,T.ip)({...N.X.edit_flow_quantity_info_fix,defaultValue:!1});return(0,a.useMemo)((()=>{if(!i)return{totalItems:0,totalFreeItems:0,pdpFreeItems:0,cartFreeItems:0,strikeThroughPrice:0,actualPrice:0,cartItemQuantity:0,draftOrderUUID:""};const t=m[i?.uuid]||0,e=s?t+n:n,a=Math.min(Math.floor(e/2),E);let r,d;s?(d=Math.min(Math.floor(t/2),a),r=d>=E?0:a<E?Math.floor(n/2):a-d):(r=a,d=a);const c=u?null:r;return{totalItems:e,totalFreeItems:a,pdpFreeItems:r,cartFreeItems:d,strikeThroughPrice:(0,_.m_)({menuItem:{data:i,error:null,isLoading:!1,hasLoaded:!0},customizations:o,quantity:n,itemUpsellState:l,addQuantityInfo:p}),actualPrice:(0,_._L)({data:i,error:null,isLoading:!1,hasLoaded:!0},o,n,l,c,p)??0,cartItemQuantity:t,currentFreeItems:c,draftOrderUUID:O}}),[i,n,E,m,l,o,u,s,p,O])},A=t=>{let{quantity:e,item:i,store:r,selectedCustomizations:c,isUpdateFlow:E}=t;const{uuid:_,currencyCode:I}=r||{},T=(0,u.Z)(),N=(0,n.T)(),A=(0,p.W)(),U=i.hasCustomizations,S=(0,o.Z)("pdp_enable_bogo_sticky_banner"),C=(0,o.Z)("pdp_enable_users_for_bogo_sticky_banner"),f=(0,a.useMemo)((()=>(S||C)&&!(E&&U)),[S,C,E,U]),D=(0,a.useMemo)((()=>(t=>!!t&&"buyXGetYItemPromotion"===t.type&&1===t.buyQuantity&&1===t.getQuantity)(i.itemPromotionV2?.promotionData)),[i.itemPromotionV2?.promotionData]),y=(0,a.useMemo)((()=>d(i.itemPromotionV2?.promotionData)),[i.itemPromotionV2?.promotionData]),P=(0,a.useCallback)((t=>I&&(0,s.xG)(T,I,t)),[T,I]),{totalItems:L,pdpFreeItems:g,cartFreeItems:M,strikeThroughPrice:G,actualPrice:b,cartItemQuantity:F}=R({item:f?i:null,quantity:e,storeUuid:_,selectedCustomizations:c,isUpdateFlow:E}),B=(0,a.useMemo)((()=>f&&P(b)?[l(" • "),l(P(b)??`${b}`),l(" "),l(P(G)??`${G}`,[O.STRIKE_THROUGH])]:[]),[P,b,G,f]),h=(0,a.useMemo)((()=>f?{add_another_item:[l(N("pdp.stickyBanner.bogo.state.add_item"))],free_items_under_limit_label:[l(N("pdp.stickyBanner.bogo.state.item_under_limit_label",{x:g})),...L>1?B:[]],free_items_limit_reached_label:F<2*y?[l(N("pdp.stickyBanner.bogo.state.item_under_limit_label",{x:g})),...L>1?B:[]]:[l(N("pdp.stickyBanner.bogo.state.free_items_limit_reached.label",{x:M<y?g:y}))],free_items_limit_reached_subtitle:[l(N("pdp.stickyBanner.bogo.state.free_items_limit_reached.subtitle"))]}:{add_another_item:[],free_items_under_limit_label:[],free_items_limit_reached_label:[],free_items_limit_reached_subtitle:[]}),[N,g,M,L,B,F,y,f]);return D&&f?{pdpBogoStickyBanner:m({totalItems:L,redemptionCap:y},h,A),scrollFn:()=>{},maxCapReachedInCart:F>=2*y}:{}}},72131:(t,e,i)=>{i.d(e,{Z:()=>o});var a=i(60849),n=i(57440);const o=()=>{const t={...n.X.saved_customizations,defaultValue:!1};return{isSavedCustomizationsXpEnabled:(0,a.ip)(t)}}},66134:(t,e,i)=>{i.d(e,{Z:()=>r});var a=i(74369),n=i(70247),o=i(64388);const r=t=>{const{serverCart:e}=(0,n.iQ)(),{store:i}=(0,o.ZP)(t??e.data?.storeUuid);return(0,a.useMemo)((()=>i.data?.catalogSectionsMap?(t=>{const e=Object.values(t.data?.catalogSectionsMap||{}).reduce(((t,e)=>[...t,...e]),[]).map((t=>t.payload?t.payload[t.payload.type]?.catalogItems:[])).filter(Boolean).reduce(((t,e)=>[...t,...e]),[]);return Object.fromEntries(e.map((t=>[t.uuid,t])))})(i):(t=>Object.values(t.data?.sectionEntitiesMap||{}).reduce(((t,e)=>({...t,...e})),{}))(i)),[i])}},53890:(t,e,i)=>{i.d(e,{TX:()=>v,ZP:()=>z,_L:()=>B,m_:()=>h});var a=i(74369),n=i(13422),o=i(10208),r=i(76594),u=i(54669),s=i(67476),d=i(14016),l=i(83960),c=i(93008),E=i(81436),m=i(49373),_=i(15649),I=i(49201);const O=(t,e)=>{const i=(0,d.T)(),a=(0,_.Z)(),{currentUserCartItems:n,draftOrderUuid:o,isDraftOrderParticipant:r}=(0,l.Z)(),{groupOrder:u,getGroupOrder:O,shouldGetGroupOrder:T}=(0,c.Z)(o),{hasGroupOrderForStore:N}=(0,s.Z)(t||"");(0,E.Z)((()=>T?O():null),[T,O],"use-draft-order-spending-limit-validation");const p=(0,m.DR)({cartItems:n})+e,R=u.data?.spendingLimitAmount,A=R?.currencyCode;if(!R||!A)return null;const U=R.amount;return N&&r&&p>U?i("go.spending_limit_exceeded",{spendingLimit:(0,I.xG)(a,A,U)}):null};var T=i(70247),N=i(57597),p=i(44606),R=i(66958),A=i(3289),U=i(80310),S=i(62155),C=i(72131),f=i(94813),D=i(22208),y=i(35212),P=i(51327);const L=t=>{let{itemUuid:e,defaultQuantity:i,quantityIncrement:n,updateDecimalQuantity:o,isEditItem:r,didSetDefaultQuantity:u,setDidSetDefaultQuantity:s}=t;const d=(0,f.TH)(),l=(0,a.useRef)(!1),{previousContext:c}=d.state||{},E=c===D.x9.PDP_CROSS_SELL,m=(0,y.Z)(E),{isBOGAFreeItemSection:_}=(0,P.k)(),I=(0,y.Z)(_),O=(0,a.useCallback)((t=>{l.current=!0,o(p.Tf.from(t).updateExponent(n.exponent).toBaseDecimal())}),[n.exponent,o]);(0,a.useEffect)((()=>()=>{e&&u&&s(!1)}),[u,e,s]),(0,a.useEffect)((()=>{if(!r&&!l.current&&e&&(E||m)&&!(_||I))return(0===n.exponent||i)&&O(i||1),()=>{l.current=!1}}),[i,E,r,m,e,n.exponent,O,_,I])};var g=i(25526),M=i(60849),G=i(57440);const b=(t,e,i)=>{const a=t?.data;return a?(0,o.h7)(a.customizationsList,Object.keys(F(t,e,i))):""},F=(t,e,i)=>{const a=t?.data;if(!a)return{};const n=(0,o.qH)(e,t?.data?.customizationsList||[],void 0,void 0,i)||{};return(0,o.xe)(a.customizationsList,n)},B=(t,e,i,a,r,u)=>{const s=t?.data?.price||0,d=(0,o.qH)(e,t?.data?.customizationsList||[],void 0,void 0,u)||{},{itemPromotionV2:l}=t?.data||{},{promotionData:c}=l||{},E=i;let m=0;if(!c?.type)return null;switch(c.type){case A._k.buyXGetYItemPromotion:{const{buyQuantity:t,getQuantity:e,maxRedemptionCount:i}=c,o=t+e;if(t>0&&e>0&&E>=o){const t=null!=r?r:Math.floor(E/o);m=E-e*Math.min(i,t)}return(0,n.W$)({quantityPromoted:m,itemPrice:s,customizations:d,upsellItems:a.itemsArray,upsellItemsMap:a.itemMap,totalQuantity:E})}case A._k.volumeDiscountPromotion:{const{buyQuantity:t,discountAmount:e,maxRedemptionCount:i}=c;if(t>0&&E>=t){const e=Math.floor(E/t);m=Math.min(i,e)}return(0,n.W$)({quantityPromoted:m,itemPrice:s,customizations:d,upsellItems:a.itemsArray,upsellItemsMap:a.itemMap,discountAmount:e,totalQuantity:E})}default:return null}},h=t=>{let{menuItem:e,customizations:i,quantity:a,itemUpsellState:r,addQuantityInfo:u}=t;const s=e?.data?.price||0,d=(0,o.qH)(i,e?.data?.customizationsList||[],void 0,void 0,u)||{};return(0,n.uT)({itemQuantity:a,itemPrice:s,customizations:d,upsellItems:r.itemsArray,upsellItemsMap:r.itemMap})};let v=function(t){return t.increment="INCREMENT",t.decrement="DECREMENT",t.set="SET",t}({});const z=t=>{let{store:e,menuItem:i,selectedSavedCustomizationIndex:n,setSelectedSavedCustomizationIndex:d,initialQuantity:l,initialDecimalQuantity:c,initialCustomizations:E,initialSpecialInstructions:m,isEditQuantityFlow:_}=t;const[I,f]=(0,a.useState)(m||""),[D,y]=(0,a.useState)(E||{}),P=i.data?(0,R.L5)(i.data):null,z=P?.defaultDecimal||P?.minPermitted,K=p.Tf.from(P?.increment??1).toBaseDecimal(),x=p.Tf.from(P?.minPermitted??1).updateExponent(K?.exponent||0).toBaseDecimal(),W=(0,N.Z)({item:i.data,storeUuid:e.data?.uuid,counterAdjustment:l}),Q=(t=>{let{initialQuantity:e,initialDecimalQuantity:i,quantityIncrement:a,defaultQuantity:n}=t;return i?i.toBaseDecimal():e?p.Tf.from(e).updateExponent(a.exponent).toBaseDecimal():n||p.Tf.from(1).updateExponent(a.exponent).toBaseDecimal()})({initialQuantity:l,initialDecimalQuantity:c,defaultQuantity:z,quantityIncrement:K}),V=e?.data?.uuid||"",{isDraftOrderParticipantForStore:H,canEditGroupOrderCart:Y}=(0,s.Z)(V),{serverCart:q}=(0,T.iQ)(),[Z,w]=(0,a.useState)(Q),[k,j]=(0,a.useState)(!1),[X,J]=(0,a.useState)(!1),{isItemInPromotion:$,initialItemQuantity:tt}=(t=>{const{itemPromotionV2:e}=t||{},i={isItemInPromotion:!1,initialItemQuantity:1};if(!t)return i;const{promotionData:a}=e||{};if(!a?.type)return i;switch(a.type){case A._k.buyXGetYItemPromotion:{const{buyQuantity:t,getQuantity:e}=a;return{isItemInPromotion:!0,initialItemQuantity:1===t&&1===e?2:1}}default:return i}})(i.data),{isSavedCustomizationsXpEnabled:et}=(0,C.Z)(),it=(0,a.useMemo)((()=>i?.data?.customizationsList||[]),[i?.data?.customizationsList]),at=p.Tf.from(Z||1).toFloat(),{currentFreeItems:nt}=(0,g.M)({storeUuid:V,item:i.data,quantity:at,selectedCustomizations:D,isUpdateFlow:_});(0,a.useEffect)((()=>{"number"!=typeof K?.exponent||Z.exponent===K.exponent||Z===z||c||w(p.Tf.from(at).updateExponent(K.exponent).toBaseDecimal())}),[Z,z,at,Z.exponent,K.exponent,c]),(0,a.useEffect)((()=>{_||"number"!=typeof z?.exponent||Z.exponent===z.exponent||X||(J(!0),w(p.Tf.from(z).toBaseDecimal()))}),[X,z,Z.exponent,_]),(0,a.useEffect)((()=>{!$||k||l||(j(!0),w({base:tt,exponent:0}))}),[i,k,l,tt,$]),(0,a.useEffect)((()=>{const t=(0,S.mq)(i.data?.productDetailsItems);if(et&&-1===n)return y({}),void f("");const e=et&&null!=n&&n>=0?t?.preselectedCustomizationSelection?.[n]?.item:void 0,{customizations:a,specialInstructions:r}=(t=>{let{itemUuid:e,menuItemCustomizationList:i,initialCustomizations:a,orderItem:n}=t;if(!e||!i)return null;if(a)return{customizations:(0,o.iY)(a||{},i,!1)};if(n){const t=n?.customizationV2s||[],e=n?.specialInstructions,a=(0,o.up)((0,U.rB)(t));return{customizations:(0,o.iY)(a,i,!0),...e?{specialInstructions:e}:null}}return null})({itemUuid:i.data?.uuid,menuItemCustomizationList:it,initialCustomizations:E,orderItem:e})||{};a&&y(a),r&&f(r)}),[it,E,i.data?.uuid,i.data?.productDetailsItems,n,et]),(0,a.useEffect)((()=>{_&&(X||!l&&!c||(J(!0),w(Q)))}),[Q,X,c,l,_]),L({itemUuid:i.data?.uuid,defaultQuantity:z,quantityIncrement:K,updateDecimalQuantity:w,isEditItem:Boolean(_||l),didSetDefaultQuantity:X,setDidSetDefaultQuantity:J});const[ot,rt]=(0,a.useReducer)(r.L,r.E);const ut=(0,a.useCallback)((t=>f(t)),[]),st=i?.data?.sectionUuid||"",dt=(e?.data?.sections||[]).find((t=>t.uuid===st)),lt=null==dt||!1!==dt.isOnSale,ct=Boolean(e?.data?.isOpen),Et=(0,u.Z)(),mt=Boolean(e?.data?.isWithinDeliveryRange),_t=(i?.data?.suspendUntil||0)>0,It=Boolean(e?.data?.isPreview),Ot="geolocation_api"!==Et?.originType,Tt=It||lt&&!_t&&(H||ct&&Boolean(Et)&&Ot&&mt),Nt=(0,M.ip)({...G.X.edit_flow_quantity_info_fix,defaultValue:!1}),pt=h({menuItem:i,customizations:D,quantity:at,itemUpsellState:ot,addQuantityInfo:Nt}),Rt=Boolean(l),At=Rt&&l?h({menuItem:i,customizations:D,quantity:l,itemUpsellState:ot,addQuantityInfo:Nt}):0,Ut=O(V,Rt?pt-At:pt),St=(t=>"eats.exceed_spending_limit.error"===t?.error?.meta?.code&&t?.error?.message?t?.error?.message:null)(q),Ct=Ut||St,ft=B(i,D,at,ot,nt,Nt)??0;return{quantity:at,updateQuantity:function(t,e){const i=t===v.set&&null!=e?p.Tf.from(e):p.Tf.from(K).multiply(t===v.increment?1:-1).add(Z);p.Tf.from(i).isGte(x)&&(t===v.decrement||W({increment:p.Tf.from(i).toFloat(),showSnackbarWarning:!0})!==N.y.ABOVE_LIMIT)&&w(i.toBaseDecimal())},decimalQuantity:Z,specialInstructions:I,updateSpecialInstructions:ut,updateCustomizations:t=>{et&&d&&d(null),y(t)},selectedCustomizations:D,itemsUpsell:ot,updateUpsellItemQuantity:(t,e)=>{rt(e>0?{type:"ADD_ITEM_UPSELL",payload:{item:t}}:{type:"SUB_ITEM_UPSELL",payload:{item:t}})},hasErrors:Object.keys(F(i,D,Nt)).length>0,isOnSale:Tt,totalPrice:pt,spendingLimitError:Ct,canEditGroupOrderCart:Y,firstIncompleteGroup:b(i,D,Nt),discountedPrice:ft}}},31755:(t,e,i)=>{i.d(e,{Z:()=>r});var a=i(74369),n=i(66134),o=i(40964);const r=(t,e,i,r,u)=>{const s=(0,n.Z)(e);return{partialMenuItem:(0,a.useMemo)((()=>{if(u&&s){const e=s[u];return e?{title:e.title||"",description:e.itemDescription||"",imageUrl:e.imageUrl||"",endorsement:null,isGrocery:!!t.data&&(0,o.A)(t.data)}:null}if(u&&t&&i){const e=t.data?.sectionEntitiesMap[i];if(!e)return null;const a=e[u];return a?{title:a.title||"",description:a.itemDescription||"",imageUrl:a.imageUrl||"",endorsement:a.endorsement,classifications:a.classifications,isGrocery:!!t.data&&(0,o.A)(t.data)}:null}return null}),[s,u,i,t])}}},47857:(t,e,i)=>{i.d(e,{A:()=>u});var a=i(89151),n=i(2237),o=i(62459),r=i(81436);function u(t,e){const i=(0,o.Z)("getMenuItemV1"),u=(0,a.useQueryClient)(),s=(0,n.H)("getMenuItemV1",t),d=(0,a.useQuery)({queryKey:s,queryFn:t=>{let{queryKey:e}=t;return i.request("getMenuItemV1",e[1])},...e?.queryObserverOptions}),l=Boolean(e.queryObserverOptions?.enabled??!0);return(0,r.Z)((()=>!d.isFetched&&l?u.prefetchQuery({queryKey:s,queryFn:t=>{let{queryKey:e}=t;return i.request("getMenuItemV1",e[1])}}):null),[d,i,s,u,l],e.preparedId,(0,a.hashQueryKey)(s)),d}},67476:(t,e,i)=>{i.d(e,{Z:()=>o});var a=i(83960),n=i(69694);const o=t=>{const e=(0,n.Z)(t),{hasGroupOrder:i,isDraftOrderCartLocked:o,isDraftOrderCreator:r,isDraftOrderParticipant:u,draftOrder:s}=(0,a.Z)(t),d=i&&e.cart.data?.storeUuid===t,l=r||!(d&&o),c=u&&d;return{isBundled:Boolean(s?.bundleGroupInfo),hasGroupOrderForStore:d,canEditGroupOrderCart:l,isDraftOrderParticipantForStore:c}}},76594:(t,e,i)=>{i.d(e,{E:()=>a,L:()=>n});const a={itemMap:{},itemsArray:[]};function n(t,e){if("ADD_ITEM_UPSELL"===e.type){const i=e.payload.item,{itemMap:a,itemsArray:n}=t;return a[i.uuid]?{itemMap:{...a,[i.uuid]:a[i.uuid]+1},itemsArray:n}:{itemMap:{...a,[i.uuid]:1},itemsArray:[...n,i]}}if("SUB_ITEM_UPSELL"===e.type){const i=e.payload.item,{itemMap:a,itemsArray:n}=t;if(a[i.uuid]){if(a[i.uuid]>1)return{itemMap:{...a,[i.uuid]:a[i.uuid]-1},itemsArray:n};const t=n.findIndex((t=>t.uuid===i.uuid)),e={...a},o=[...n];return delete e[i.uuid],o.splice(t,1),{itemMap:e,itemsArray:o}}return{itemMap:a,itemsArray:n}}return t}}}]);