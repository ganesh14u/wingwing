"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[76312],{91972:(e,t,o)=>{o.d(t,{N:()=>r});const r={small:"small",medium:"medium",large:"large"}},72525:(e,t,o)=>{o.d(t,{Bd:()=>c,CN:()=>p,Fp:()=>s,Gi:()=>f,Xj:()=>b,ar:()=>m,bU:()=>k,d4:()=>d,ko:()=>u,sQ:()=>l});var r=o(79810),n=o(91972),i=o(59924);function a(e){return{[n.N.small]:"2px",[n.N.medium]:"4px",[n.N.large]:"8px"}[e]}const s=(0,r.zo)("div",(e=>({width:"100%"})));s.displayName="StyledRoot";const d=(0,r.zo)("div",(e=>{const{$theme:t}=e,{sizing:o}=t;return{display:"flex",marginLeft:o.scale500,marginRight:o.scale500,marginTop:o.scale500,marginBottom:o.scale500}}));d.displayName="StyledBarContainer";const l=(0,r.zo)("div",(e=>{const{$theme:t,$size:o,$steps:r}=e,{colors:n,sizing:i,borders:s}=t,d=s.useRoundedCorners?i.scale0:0;return{borderTopLeftRadius:d,borderTopRightRadius:d,borderBottomRightRadius:d,borderBottomLeftRadius:d,backgroundColor:n.backgroundTertiary,height:a(o),flex:1,overflow:"hidden",...r<2?{}:{marginLeft:i.scale300,":first-child":{marginLeft:"0"}}}}));l.displayName="StyledBar";const c=(0,r.zo)("div",(e=>{const{$theme:t,$value:o,$successValue:r,$steps:n,$index:i,$maxValue:a,$minValue:s=0}=e,d=a||r,{colors:l,sizing:c,borders:u}=t,m=100-100*(o-s)/(d-s)+"%",h="awaits",p="inProgress",g="completed";let f="default";if(n>1){const e=(d-s)/n,t=(o-s)/(d-s)*100,r=Math.floor(t/e);f=i<r?g:i===r?p:h}const y=u.useRoundedCorners?c.scale0:0,b={transform:`translateX(-${m})`},C=f===p?{animationDuration:"2.1s",animationIterationCount:"infinite",animationTimingFunction:t.animation.linearCurve,animationName:{"0%":{transform:"translateX(-102%)",opacity:1},"50%":{transform:"translateX(0%)",opacity:1},"100%":{transform:"translateX(0%)",opacity:0}}}:f===g?{transform:"translateX(0%)"}:{transform:"translateX(-102%)"};return{borderTopLeftRadius:y,borderTopRightRadius:y,borderBottomRightRadius:y,borderBottomLeftRadius:y,backgroundColor:l.backgroundAccent,height:"100%",width:"100%",transform:"translateX(-102%)",transition:"transform 0.5s",...n>1?C:b}}));c.displayName="StyledBarProgress";const u=(0,r.zo)("div",(e=>{const{$theme:t,$isLeft:o=!1,$size:r=n.N.medium}=e,{colors:i,sizing:s,borders:d}=t,l=d.useRoundedCorners?s.scale0:0;return{...o?{borderTopLeftRadius:l,borderBottomLeftRadius:l}:{borderTopRightRadius:l,borderBottomRightRadius:l},height:a(r),...{display:"inline-block",flex:1,marginLeft:"auto",marginRight:"auto",transitionProperty:"background-position",animationDuration:"1.5s",animationIterationCount:"infinite",animationTimingFunction:t.animation.linearCurve,backgroundSize:"300% auto",backgroundRepeat:"no-repeat",backgroundPositionX:o?"-50%":"150%",backgroundImage:`linear-gradient(${o?"90":"270"}deg, transparent 0%, ${i.backgroundAccent} 25%, ${i.backgroundAccent} 75%, transparent 100%)`,animationName:o?{"0%":{backgroundPositionX:"-50%"},"33%":{backgroundPositionX:"50%"},"66%":{backgroundPositionX:"50%"},"100%":{backgroundPositionX:"150%"}}:{"0%":{backgroundPositionX:"150%"},"33%":{backgroundPositionX:"50%"},"66%":{backgroundPositionX:"50%"},"100%":{backgroundPositionX:"-50%"}}}}}));u.displayName="StyledInfiniteBar";const m=(0,r.zo)("div",(e=>({textAlign:"center",...e.$theme.typography.font150,color:e.$theme.colors.contentTertiary})));m.displayName="StyledLabel";const h={[n.N.large]:{d:"M47.5 4H71.5529C82.2933 4 91 12.9543 91 24C91 35.0457 82.2933 44 71.5529 44H23.4471C12.7067 44 4 35.0457 4 24C4 12.9543 12.7067 4 23.4471 4H47.5195",width:95,height:48,strokeWidth:8,typography:"LabelLarge"},[n.N.medium]:{d:"M39 2H60.5833C69.0977 2 76 9.16344 76 18C76 26.8366 69.0977 34 60.5833 34H17.4167C8.90228 34 2 26.8366 2 18C2 9.16344 8.90228 2 17.4167 2H39.0195",width:78,height:36,strokeWidth:4,typography:"LabelMedium"},[n.N.small]:{d:"M32 1H51.6271C57.9082 1 63 6.37258 63 13C63 19.6274 57.9082 25 51.6271 25H12.3729C6.09181 25 1 19.6274 1 13C1 6.37258 6.09181 1 12.3729 1H32.0195",width:64,height:26,strokeWidth:2,typography:"LabelSmall"}},p=(0,r.zo)("div",(e=>{let{$size:t,$inline:o}=e;return{width:h[t].width+"px",height:h[t].height+"px",position:"relative",display:o?"inline-flex":"flex",alignItems:"center",justifyContent:"center"}}));p.displayName="StyledProgressBarRoundedRoot";const g=(0,r.zo)("svg",(e=>{let{$size:t}=e;return{width:h[t].width+"px",height:h[t].height+"px",position:"absolute",fill:"none"}}));g.displayName="_StyledProgressBarRoundedSvg";const f=(0,r.Le)(g,(e=>function(t){return(0,i.tZ)(e,{viewBox:`0 0 ${h[t.$size].width} ${h[t.$size].height}`,xmlns:"http://www.w3.org/2000/svg",...t})})),y=(0,r.zo)("path",(e=>{let{$theme:t,$size:o}=e;return{stroke:t.colors.backgroundTertiary,strokeWidth:h[o].strokeWidth+"px"}}));y.displayName="_StyledProgressBarRoundedTrackBackground";const b=(0,r.Le)(y,(e=>function(t){return(0,i.tZ)(e,{d:h[t.$size].d,...t})})),C=(0,r.zo)("path",(e=>{let{$theme:t,$size:o,$visible:r}=e;return{visibility:r?"visible":"hidden",stroke:t.colors.borderAccent,strokeWidth:h[o].strokeWidth+"px"}}));C.displayName="_StyledProgressBarRoundedTrackForeground";(0,r.Le)(C,(e=>function(t){return(0,i.tZ)(e,{d:h[t.$size].d,style:{strokeDasharray:t.$pathLength,strokeDashoffset:t.$pathLength*(1-t.$pathProgress)+""},...t})}));const k=(0,r.zo)("div",(e=>{let{$theme:t,$size:o}=e;return{color:t.colors.contentPrimary,...t.typography[h[o].typography]}}));k.displayName="StyledProgressBarRoundedText"},16389:(e,t,o)=>{o.d(t,{u:()=>L});var r=o("__fusion__476"),n=o(74369),i=o(3948),a=o(91931),s=o(2458),d=o(91972),l=o(72525),c=o(59924);const u=(0,a.zo)("div",(e=>{let{$theme:t,$hasOnClick:o=!1}=e;return{cursor:o?"pointer":"auto",backgroundColor:t.colors.backgroundPrimary,borderRadius:t.borders.radiusFull}})),m=r.forwardRef((function(e,t){let{durationInSeconds:o,totalDurationInSeconds:n,onTimerEnd:i,onClick:m,dataTestid:h}=e;const[p,g]=r.useState(0),{minutesLabel:f,secondsLabel:y,secondsLeft:b}=(0,s.ZP)(o),C=r.useRef(null),[k,$]=r.useState(null),[v,z]=r.useState(!1),[S,x]=r.useState(!1),R=d.N.medium,[,Z]=(0,a.hQ)();return r.useEffect((()=>{C.current&&C.current.getTotalLength&&g(C.current.getTotalLength())}),[]),r.useEffect((()=>{if(o>0&&($(b/n),v?x(!0):z(!0)),0===b&&i){const e=setTimeout((()=>{i()}),1e3);return()=>clearTimeout(e)}}),[o,v,i,b,n]),o>0?(0,c.tZ)(u,{onClick:m,$hasOnClick:Boolean(m),ref:t,"data-testid":h,children:(0,c.BX)(l.CN,{"data-baseweb":"progressbar-rounded",role:"progressbar","aria-valuemin":0,"aria-valuemax":1,$inline:!0,$size:R,children:[(0,c.BX)(l.Gi,{$size:R,children:[(0,c.tZ)(l.Xj,{$size:R}),(0,c.tZ)("path",{ref:C,d:"M39 2H60.5833C69.0977 2 76 9.16344 76 18C76 26.8366 69.0977 34 60.5833 34H17.4167C8.90228 34 2 26.8366 2 18C2 9.16344 8.90228 2 17.4167 2H39.0195",style:{strokeDasharray:p,strokeDashoffset:k?String(p*(1-k)):p,stroke:Z.colors.positive,strokeWidth:Z.sizing.scale100,transition:S?"stroke-dashoffset 1s linear":"none"}})]}),(0,c.tZ)(l.bU,{$size:R,children:`${Number(f)}:${y}`})]})}):null}));var h=o(4661),p=o(58679),g=o(32857),f=o(68065),y=o(35397),b=o(46933),C=o(48566),k=o(24316),$=o(79851),v=o(69420),z=o(33535);const S=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{padding:t.sizing.scale600}})),x=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingMedium,color:t.colors.contentPrimary}})),R=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphLarge,color:t.colors.contentPrimary,marginTop:t.sizing.scale300}})),Z=e=>{let{isOpen:t,onClose:o,storeUUID:r,shouldRedirectToHomeAfterClearCart:i=!1,parentOrderUuid:a}=e;const s=(0,C.Z)("add-ons-timer-expired"),{totalOrders:d}=(0,k.Z)(),l=d>0,u=(0,v.k6)(),m=(0,$.Z)(),h=(0,z.ZP)();(0,n.useEffect)((()=>{t&&a&&h("eats:add_ons_expired_bottomsheet_impression",{primaryOrderUuid:a})}),[h,t,a]);const Z=(0,n.useCallback)((()=>{h("eats:add_ons_expired_bottomsheet_action_clicked",{primaryOrderUuid:a,action:"continue"}),o()}),[h,o,a]),w=(0,n.useCallback)((()=>{h("eats:add_ons_expired_bottomsheet_action_clicked",{primaryOrderUuid:a,storeUuid:r,action:"clear_cart"}),s(r),i&&u.push(m),o()}),[s,h,u,m,o,a,i,r]);return(0,c.BX)(p.R1,{onClose:o,isOpen:t,closeable:!1,children:[(0,c.BX)(S,{children:[(0,c.tZ)(x,{children:l?(0,c.tZ)(b.v,{id:"addOns.withCart.timerExpiredTitle"}):(0,c.tZ)(b.v,{id:"addOns.withoutCart.timerExpiredTitle"})}),(0,c.tZ)(R,{children:l?(0,c.tZ)(b.v,{id:"addOns.withCart.timerExpiredMessage"}):(0,c.tZ)(b.v,{id:"addOns.withoutCart.timerExpiredMessage"})})]}),(0,c.tZ)(y.Z,{primaryAction:(0,c.tZ)(g.Z,{onClick:Z,size:f.NO.large,children:(0,c.tZ)(b.v,{id:"shared.continue"})}),dismissiveAction:l?(0,c.tZ)(g.Z,{onClick:w,kind:f.TO.secondary,size:f.NO.large,children:(0,c.tZ)(b.v,{id:"shared.clearCart"})}):null})]})},w=(e,t)=>{let o=0;const r="perPayloadCountdown"===e?.countdownPayload?.type?e?.countdownPayload?.perPayloadCountdown?.countdown:null,n=r?.totalDurationInSeconds??0;if(!t)return o=r?.durationInSeconds??0,{durationInSeconds:o,totalDurationInSeconds:n};const i=e?.addOnOfferContextMap?e?.addOnOfferContextMap[t]:null;return o=i?.addOnOfferExpiryEpochSec?(e=>{if(!e||"number"!=typeof e)return 0;const t=Math.floor(Date.now()/1e3);return Math.max(e-t,0)})(i?.addOnOfferExpiryEpochSec):0,{durationInSeconds:o,totalDurationInSeconds:n}};var O=o(61127),_=o(68799);const P="uev2.addons.timer-expired-bottom-sheet.viewed",T=()=>{const e=(0,_.Z7)(P);return(0,O.Z)(e)?[]:e};var B=o(19912);const N=(0,a.zo)("div",(e=>{let{$style:t,$theme:o}=e;return{position:"fixed",bottom:o.sizing.scale600,display:"flex",justifyContent:"center",width:"100%",...t}})),L=e=>{let{storeUUID:t,styleOverrides:o,shouldRedirectToHomeAfterClearCart:a=!1}=e;const[s,d]=r.useState(!0),[l,u]=r.useState(!1),[p,g]=r.useState(!1),{addOnOffer:f,parentOrderUuid:y}=(0,i.J)(),{durationInSeconds:b,totalDurationInSeconds:C}=w(f,t),k=(0,B.Z)({eventName:"eats:add_ons_global_timer_impression",eventPayload:{primaryOrderUuid:y}}),$=(0,z.ZP)(),v=(0,n.useCallback)((()=>{$("eats:add_ons_global_timer_clicked",{primaryOrderUuid:y}),u(!0)}),[$,y]);return(0,c.BX)(c.HY,{children:[(0,c.tZ)(N,{$style:o,children:s&&C>0?(0,c.tZ)(m,{durationInSeconds:b,totalDurationInSeconds:C,onClick:v,onTimerEnd:()=>{y&&!(e=>{const t=T();return!!e&&t.includes(e)})(y)&&g(!0),d(!1)},ref:k,dataTestid:"add-ons-global-countdown-timer"}):null}),f?.infoBottomSheet?(0,c.tZ)(h.P,{bottomSheet:f.infoBottomSheet,isOpen:l,onClose:()=>u(!1)}):null,(0,c.tZ)(Z,{isOpen:p,onClose:()=>{y&&(e=>{const t=T();t.includes(e)||(t.push(e),(0,_.pc)(P,t,86400))})(y),g(!1)},storeUUID:t,parentOrderUuid:y,shouldRedirectToHomeAfterClearCart:a})]})}},14663:(e,t,o)=>{o.d(t,{Z:()=>a});var r=o(60849),n=o(44145),i=o(15070);const a=()=>{const e=(0,r.ip)({...n.A.xlb_consistent_cta_position,defaultValue:!1}),t=(0,i.v)((e=>{let{embeddedFeatures:t}=e;return t})).consistentContentInset;return e&&Boolean(t)}}}]);