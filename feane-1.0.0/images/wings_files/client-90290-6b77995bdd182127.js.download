"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[90290],{52656:(e,t,r)=>{r.d(t,{R:()=>o});let o=function(e){return e.GUEST_COMPONENT_SEEN="guest_component_seen",e.GUEST_COMPONENT_DISMISSED="guest_component_dismissed",e.CAME_FROM_GUEST_COMPONENT="came_from_guest_component",e.HAS_DISPLAYED_PROMO="has_displayed_promo",e}({})},80804:(e,t,r)=>{r.d(t,{Z:()=>l});var o=r(74369),n=r(34626),s=r(89151),a=r(2237),i=r(62459);const l=e=>{const{user:t}=(0,n.Z)(),r=t.data?.isLoggedIn||!1,l=function(e,t){const r=(0,i.Z)("getEaterOrderCountsV1"),o=(0,a.H)("getEaterOrderCountsV1",e);return(0,s.useQuery)({queryKey:o,queryFn:e=>{let{queryKey:t}=e;return r.request("getEaterOrderCountsV1",t[1])},...t?.queryObserverOptions})}({uberMerchantTypes:e||null},{queryObserverOptions:{retryDelay:3e3,retry:2,enabled:r}});return(0,o.useMemo)((()=>r&&l.data&&l.isSuccess?l.data.numOrders:null),[r,l])}},33963:(e,t,r)=>{r.d(t,{N:()=>l});var o=r("__fusion__476"),n=r(30427),s=r(4661),a=r(33535),i=r(59924);const l=e=>{let{eaterPreviewPrompts:t,isMobile:r=!1,onLastPromptClose:l}=e;const[d,u]=o.useState(0),c=()=>{u((e=>e+1));d===t.length-1&&l&&l()},p=(0,a.ZP)();if(o.useEffect((()=>{p("eats:age_gate_impression")}),[p]),d>=t.length)return null;const h=t[d],m=h?.bottomSheet,g=h?.metadata;return m?r?(0,i.tZ)(s.P,{bottomSheet:m,metadata:g,onClose:c}):(0,i.tZ)(n.o,{bottomSheet:m,metadata:g,onClose:c,shouldCloseOnOutsideClick:!1}):null}},67061:(e,t,r)=>{r.d(t,{Z:()=>p});var o=r("__fusion__476"),n=r(43832),s=r(33963),a=r(21503),i=r(33535),l=r(15070),d=r(69420),u=r(79851),c=r(59924);function p(e){let{storeOrStores:t,isMobile:r,GatedStoreComponent:p,UngatedStoreComponent:h}=e;const{partialStore:m}=(0,n.QT)(),g=Array.isArray(t)?t[0]:t,f=(0,l.v)((e=>e.ageGate)),{shouldShowEaterPreviewPrompts:_,eaterPreviewPrompts:y}=(0,a.Z)(g),S=(0,i.ZP)(),Z=o.useRef(!0),P=(0,d.k6)(),b=(0,u.Z)();return o.useEffect((()=>{f.isOpen||(Z.current=!1)}),[f.isOpen]),y&&_?(0,c.BX)(c.HY,{children:[(0,c.tZ)(s.N,{isMobile:r,eaterPreviewPrompts:y,onLastPromptClose:()=>{Z.current&&(S("eats:age_gate_click_on_go_back_button"),P.push(b))}}),(0,c.tZ)(p,{partialStore:m})]}):(0,c.tZ)(h,{loadedMaybes:t})}},21503:(e,t,r)=>{r.d(t,{Z:()=>i});var o=r(34626),n=r(15070),s=r(49398),a=r(75514);function i(e){const t=(0,n.v)((e=>e.ageGate)),r=e?.eaterPreviewPrompts&&e?.eaterPreviewPrompts.length>0,i=r?e.eaterPreviewPrompts:void 0,{user:l}=(0,o.Z)(),d=l.data?.isLoggedIn,u=!!a.Z&&(0,s.m4)(e),c=d?r&&i&&t.isOpen:u;return{shouldShowEaterPreviewPrompts:Boolean(c),eaterPreviewPrompts:i}}},34553:(e,t,r)=>{r.d(t,{Z:()=>h});var o=r("__fusion__476"),n=r(69420),s=r(94813),a=r(47986),i=r(74748),l=r(28222),d=r(54669),u=r(1682),c=r(64388),p=r(67318);function h(e){const t=(0,n.k6)(),r=(0,s.TH)(),h=(0,l.Z)(),m=(0,d.Z)(),{validationError:g,hasDismissedError:f,lastError:_,setLastError:y}=(0,u.ZP)(),{modalName:S}=(0,a.RAN)(r,["modalName"]),{store:Z}=(0,c.ZP)(e),P="storeDeliveryTime"===S||"orderValidationError"===S,b=!h&&Boolean(m);o.useEffect((()=>{g&&g?.data?.type!==_?.data?.type&&y(g)}),[g,y,_]);const v=o.useCallback((()=>{g.hasLoaded&&g.data&&e&&"initial"===f&&g?.data?.type!==_?.data?.type&&!P&&(Z.data?.orderForLaterInfo.determinedFromBackend&&[i.cz.INVALID_DELIVERY_TIME_RANGE].some((e=>e===g.data?.type))&&b?t.push((0,p.X)(r,{storeUuid:Z.data.uuid,entryPoint:"checkout-auto-surface"})):t.replace((0,a.vN_)(r,"orderValidationError")))}),[e,t,r,Z,b,g,_,P,f]);return{checkoutErrorModalIsSurfaced:P,surfaceCheckoutErrorModal:v}}},5495:(e,t,r)=>{r.d(t,{Fe:()=>l,dr:()=>d,iw:()=>s,u4:()=>i});var o=r(74369),n=r(59924);const s=Object.freeze({DESKTOP:"desktop",MOBILE:"mobile"}),a=(0,o.createContext)({platform:s.MOBILE,setPlatform:()=>{}}),i=e=>{const{initialPlatform:t,children:r}=e,[s,i]=(0,o.useState)(t),l=(0,o.useMemo)((()=>({platform:s,setPlatform:i})),[s]);return(0,n.tZ)(a.Provider,{value:l,children:r})},l=()=>{const{platform:e}=(0,o.useContext)(a);return e},d=e=>{const{setPlatform:t}=(0,o.useContext)(a);(0,o.useEffect)((()=>{t(e)}),[e,t])}},14005:(e,t,r)=>{r.d(t,{C:()=>f,ZP:()=>g});var o=r("__fusion__476"),n=r(74369),s=r(89151),a=r(89730),i=r(56993),l=r(14016),d=r(5495),u=r(85968),c=r(53308),p=r(87444),h=r(59924);const m=o.createContext(null);function g(e){const{selectedPersonalPayment:t,paymentProfiles:r,updateSelectedPersonalPayment:g,selectedMembershipPayment:f,updateSelectedMembershipPayment:_}=(0,i.IM)(),y=(0,l.T)(),[S,Z]=(0,a.Z)("purchaseEatsPassV1"),[P,b]=(0,a.Z)("updateEatsPassRenewStatusV1"),[v,C]=(0,a.Z)("getEatsPassConfirmationModalV1"),[E,k]=o.useState(null),[z,M]=(0,n.useState)(null),[O,T]=(0,n.useState)([]),[U,w]=(0,n.useState)(),[R,x]=(0,n.useState)([]),[I,$]=(0,n.useState)({data:null,error:null,hasLoaded:!1,isLoading:!0}),[B,N]=(0,n.useState)(),L=(0,s.useQueryClient)(),[D,A]=(0,n.useState)(),[H,G]=(0,n.useState)(!1),F=(0,c.I0)(),V=(0,p.Z)("membership_payment_type_enabled"),X=(0,p.Z)("initialize_membership_payment_type");(0,n.useEffect)((()=>{t?.uuid&&!f&&X&&_(t?.uuid)}),[t,f,X,_]),(0,n.useEffect)((()=>{if(r.length>0&&R.length>0){const e=r.filter((e=>R.includes(e.tokenType)));T(e)}}),[R,r]),(0,n.useEffect)((()=>{const{defaultPaymentProfileUuid:e}=D||{};if(e&&r.length>0&&!U&&!H){const t=r.find((t=>t.uuid===e));t&&(w(t),V?_(e):g(e))}}),[D,r,U,g,_,H,V]),(0,n.useEffect)((()=>{const{paymentProfileUuids:e,supportedPaymentTokenTypes:t}=D||{};if(r.length>0&&e&&e.length>0&&!H){const o=r.filter((t=>e.includes(t.uuid)));if(T(o),!t&&o.length>0&&0===R.length){const e=o.reduce(((e,t)=>(t.tokenType&&e.push(t.tokenType),e)),[]);x(e)}G(!0)}t&&t.length>0&&0===R.length&&(x(t),H||G(!0))}),[r,D,O,R,H]),(0,n.useEffect)((()=>{t&&O.length>0&&t.uuid!==U?.uuid&&!V&&R.includes(String(t.tokenType))&&w(t)}),[R,O.length,U,t,V]),(0,n.useEffect)((()=>{f&&O.length>0&&f.uuid!==U?.uuid&&V&&R.includes(String(f.tokenType))&&w(f)}),[R,O.length,U,f,V]),(0,n.useEffect)((()=>{P.data&&P.data.renewState.state!==z?.state&&(M(P.data.renewState),L.invalidateQueries(["getMembershipHubV1"]),L.invalidateQueries(["getMembershipManagementMenuV1"]),F((0,u.c)()))}),[P.data,z,L,F]);const Q=(0,n.useCallback)((e=>{let{paymentProfileUuid:t,passOfferUuid:r,cityId:o,passOfferMutationUuid:n,queryContext:s,offeringBundleUuid:a,checkoutActionResultParams:i}=e;Z({passOfferUuid:r,paymentProfileUuid:t,cityId:o,passOfferMutationUuid:n,queryContext:s,offeringBundleUuid:a,checkoutActionResultParams:i})}),[Z]),q=(0,n.useCallback)((e=>{let{passUuid:t,lastUpdatedTimestamp:r,paymentProfileUuid:o,newState:n,checkoutActionResultParams:s,skipPaymentRequirement:a,postRenewalFlowData:i}=e;b({passUuid:t,lastUpdatedTimestamp:r,paymentProfileUuid:o,newState:n,checkoutActionResultParams:s,skipPaymentRequirement:a,postRenewalFlowData:i})}),[b]),W=(0,n.useCallback)((()=>{C()}),[C]),j={code:"400",message:y("shared.addPaymentMethod")};return(0,h.tZ)(m.Provider,{value:{purchaseEatsPass:Q,purchaseEatsPassMaybe:S,updateRenewStatus:q,updateRenewStatusMaybe:P,getSubscriptionConfirmation:W,eatsPassConfirmationMaybe:v,membershipCardScreen:E,setMembershipCardScreen:k,renewStateCard:z,setRenewStateCard:M,eatsPassPaymentProfiles:O,eatsPassSelectedPersonalPayment:U,setAllowedEatsPassPaymentTypes:x,allowedEatsPassPaymentTypes:R,NoSelectedPaymentProfileError:j,legacyEatsPass:I,setLegacyEatsPass:$,successScreen:B,setSuccessScreen:N,allowedPaymentInfo:D,setAllowedPaymentInfo:A},children:(0,h.tZ)(d.u4,{initialPlatform:e.platform??d.iw.DESKTOP,children:e.children})})}function f(){const e=o.useContext(m);if(null!==e)return e;throw Error("You should use useMembershipContext only in a descendant of MembershipProvider")}},23867:(e,t,r)=>{r.d(t,{Z:()=>_});var o=r(74369),n=r(69420),s=r(14016),a=r("__fusion__931"),i=r(20196),l=r(83059),d=r(24316),u=r(76150),c=r(15070),p=r(47986),h=r(83960),m=r(94813),g=r(59924);const f=e=>{let{storeUUID:t}=e;const{repeatGroupOrders:r}=(0,d.Z)(),{setHeaderCartDropdownVisible:f}=(0,u.Lb)(),{enqueue:_}=(0,i.Ds)(),y=(0,o.useRef)(null),S=(0,s.T)(),{isRepeatGroupOrder:Z}=(0,h.Z)(),{isMobile:P}=(0,c.v)((e=>{let{device:t}=e;return t})),b=(0,m.TH)(),v=(0,n.k6)(),C=(0,p.vN_)(b,"multicartMobileSwitcher"),E=(0,o.useCallback)((()=>{P?v.push(C):f(!0)}),[v,P,C,f]);return(0,o.useEffect)((()=>{Z||r.length>0&&y.current!==t&&(_({message:S("ro.message.more_open_carts"),actionMessage:S("ro.label.view"),actionOnClick:()=>{E()},startEnhancer:()=>(0,g.tZ)(a.default,{size:24})},l.t.medium),y.current=t)}),[_,r.length,E,t,S,Z]),null};f.displayName="RepeatGroupOrderSharedStoreTip";const _=f},54264:(e,t,r)=>{r.d(t,{Z:()=>c});var o=r(74369),n=r(50881),s=r(43832),a=r(47986),i=r(94813),l=r(71051),d=r(53614);const u="store.pcb.existing_cart_last_surfaced_store",c=()=>{const e=(0,i.TH)(),{storeUuid:t}=(0,s.QT)(),r=(0,o.useContext)(l.k7),c=(0,o.useContext)(d.v),{source:p}=(0,a.RAN)(e,["source"]),h=r.get(u),m=(0,o.useRef)(h===t);m.current=h===t;const{shouldShowBundleItemsWithStoreDialog:g,openBundleItemsWithStoreDialog:f}=(0,n.Z)({storeUuid:t});return(0,o.useEffect)((()=>{t!==h&&r.set(u,t)}),[t,h,r]),!t||!g||"primary-store"!==p&&c||m.current?{shouldShowBundleItemsWithStoreDialog:!1,openBundleItemsWithStoreDialog:f}:(m.current=!0,{shouldShowBundleItemsWithStoreDialog:!0,openBundleItemsWithStoreDialog:f})}},87401:(e,t,r)=>{r.d(t,{Z:()=>s});var o=r(44702),n=r(59924);const s=e=>{let{children:t}=e;const r=(0,o.c)();return r.seeSimilar.isAvailable&&!r.seeSimilar.isOpen?null:(0,n.tZ)(n.HY,{children:t})}},94614:(e,t,r)=>{r.d(t,{Z:()=>a});var o=r(91931),n=r(6917),s=r(59924);const a=e=>{let{format:t,styleMode:r,overrideStyles:a,...i}=e;const[,l]=(0,o.hQ)();return(0,s.tZ)(n.Z,{format:t,styleMode:r,overrideStyles:{...l.typography.LabelSmall,color:l.colors.contentInverseTertiary,...a||{}},...i})}},90492:(e,t,r)=>{r.d(t,{ZP:()=>J});var o=r(74369),n=r("__fusion__476"),s=r(86695),a=r(68065),i=r(91931),l=r(14016),d=r("__fusion__868"),u=r(55186),c=r(11841),p=r(16782),h=r("__fusion__924"),m=r("__fusion__1519"),g=r(32583),f=r("__fusion__713"),_=r(44133),y=r(57074),S=r(79406),Z=r(72238),P=r(21322),b=r(59924);function v(e){return(0,b.tZ)(Z.Z,{...e})}function C(e){return(0,b.tZ)(P.Z,{...e})}v.defaultProps=Z.Z.defaultProps;var E=r(13845),k=r(91377),z=r(34626),M=r(47986),O=r(94813),T=r(68093),U=r(69420),w=r(70496),R=r(32711),x=r(54669),I=r(5639),$=r(33535),B=r(15649),N=r(60362),L=r(15070);const D="364px",A="300px",H=(0,i.zo)("div",(e=>{let{$theme:t,$isGroceryStore:r,$isMobile:o}=e;return{position:"relative",width:"100%",overflow:"visible",boxSizing:"border-box",marginBottom:t.sizing.scale1000,background:t.colors.primaryA,borderRadius:t.borders.radius400,border:"none",minHeight:o?A:D,marginTop:r?t.sizing.scale1400:t.sizing.scale800,display:"flex",justifyContent:"center",alignItems:"center",height:"auto"}})),G={BaseButton:{style:e=>{let{$theme:t}=e;return{...t.typography.LabelSmall,height:t.sizing.scale950,paddingTop:t.sizing.scale400,paddingBottom:t.sizing.scale400,paddingLeft:t.sizing.scale500,paddingRight:t.sizing.scale500,marginBottom:t.sizing.scale400,marginTop:t.sizing.scale200}}}},F=(0,i.zo)("div",(e=>{let{$theme:t,$isMobile:r}=e;return{padding:`${t.sizing.scale900} ${t.sizing.scale500}`,gap:r?t.sizing.scale400:t.sizing.scale700,display:"flex",position:"relative",boxSizing:"border-box",justifyContent:"center",alignItems:"center",flexDirection:"column",minHeight:r?A:D,height:"auto",width:"100%"}})),V=(0,i.zo)("div",(e=>{let{$theme:t,$isMobile:r}=e;return{width:r?"95%":"40%"}})),X=(0,i.zo)("div",{display:"flex",overflow:"visible",justifyContent:"center"}),Q=e=>{let{width:t}=e;return{Arrow:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundPrimary}}},Body:{style:e=>{let{$theme:r}=e;return{backgroundColor:r.colors.backgroundPrimary,maxHeight:"320px",width:t,overflow:"auto",borderRadius:r.borders.radius400}}},Inner:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundPrimary}}}}},q={StartEnhancer:{style:e=>{let{$theme:t}=e;return{paddingRight:t.sizing.scale300,paddingLeft:t.sizing.scale300}}},EndEnhancer:{style:e=>{let{$theme:t}=e;return{paddingLeft:t.sizing.scale300,paddingRight:t.sizing.scale300}}},Input:{style:e=>{let{$theme:t}=e;return{paddingLeft:t.sizing.scale300}}},Root:{style:e=>{let{$theme:t}=e;return{paddingLeft:t.sizing.scale200,paddingRight:t.sizing.scale200}}}},W=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingSmall,color:t.colors.primaryB,textAlign:"center",padding:`0 ${t.sizing.scale1000}`}})),j=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,color:t.colors.mono600,textAlign:"center"}})),Y=(0,i.zo)("div",(e=>{let{$theme:t,$isMobile:r}=e;return{...t.typography.ParagraphSmall,color:t.colors.mono600,paddingTop:r?t.sizing.scale600:t.sizing.scale800,display:"flex",flexDirection:r?"column":"row",gap:r?0:t.sizing.scale200,borderTop:`1px solid ${t.colors.primary600}`,justifyContent:"center",alignItems:"center"}})),K=(0,i.zo)("a",(e=>{let{$theme:t}=e;return{color:t.colors.contentInversePrimary,display:"flex",textDecoration:"underline",cursor:"pointer"}})),J=e=>{let{isGroceryStore:t,onboardingStatusUpdatedAt:r}=e;const[,Z]=(0,i.hQ)(),P=(0,l.T)(),[D,A]=(0,o.useState)(""),[J,ee]=(0,o.useState)(!1),{user:te}=(0,z.Z)(),re=te.data?.isLoggedIn,{locationSuggestions:oe,isLoading:ne,hasLoaded:se}=(0,_.Z)({query:D}),ae=D.length>0,ie=n.useRef(null),le=(0,T.Z)(J,200),de=(oe.length>0||!ne)&&ae&&le,{addressInputCardRef:ue}=(0,E.Z)(),ce=(0,O.TH)(),pe=(0,U.k6)(),he=(0,w.Z)(),me=(0,x.Z)(),{isMobile:ge}=(0,I.hU)(),fe=(0,$.ZP)(),_e=(0,B.Z)(),ye=new Date(r),Se=(0,N.IX)(_e,ye),Ze=(0,L.v)((e=>{let{staticUrls:t}=e;return t})),Pe=e=>{e.stopPropagation(),A(""),ie.current&&(ie.current.focus(),ee(!0))};(0,o.useEffect)((()=>{ne&&fe("eats:store_ofd_address_input_card_search_location",{isLost:!0})}),[ne,fe]);const be=e=>{const t=e?(0,M.dat)(ce,{deliveryLocation:e}):(0,M.dat)(ce);pe.push(t)},{handleLocationSelected:ve}=(0,R.Z)({onLocationSelected:e=>{he(e),be(e)}}),Ce=ue.current?.offsetWidth?`${ue.current.offsetWidth}px`:"auto";return(0,b.tZ)(H,{$isGroceryStore:t,$isMobile:ge,children:(0,b.BX)(F,{$isMobile:ge,children:[(0,b.tZ)(W,{children:P("components.lost_merchant.closed_on_uber_eats",{date:Se})}),re||me?(0,b.BX)(b.HY,{children:[(0,b.tZ)(j,{children:P("shared.find_more_restaurants_near_you")}),(0,b.tZ)(s.zx,{kind:s.TO.secondary,shape:a.X3.pill,onClick:()=>{fe("eats:lost_store_explore_restaurants_button_clicked"),be()},overrides:G,children:P("components.explore_restaurants_button")})]}):(0,b.BX)(b.HY,{children:[(0,b.tZ)(j,{children:P("shared.enter_delivery_address_to_find_more_restaurants")}),(0,b.tZ)(V,{$isMobile:ge,ref:(0,k.Z)(ue),children:(0,b.tZ)(y.Z,{isOpen:de,content:(0,b.BX)("ul",{children:[oe?.map((e=>(0,b.tZ)(v,{artwork:e=>(0,b.tZ)(m.default,{...e,size:24,color:Z.colors.gray600}),overrides:{Root:{style:()=>({cursor:"pointer"})}},onClick:()=>{A(""),fe("eats:store_ofd_address_input_card_location_selected",{isLost:!0}),ve(e)},children:(0,b.tZ)(C,{description:e.addressLine2,children:e.addressLine1})},e.id))),se&&0===oe?.length?(0,b.tZ)(v,{children:(0,b.tZ)(C,{children:P("components.store_address_input.no_results")})},"no-results"):null]}),placement:S.r4.bottom,overrides:Q({width:Ce}),popoverMargin:6,autoFocus:!1,popperOptions:{modifiers:{flip:{enabled:!1}}},children:(0,b.tZ)(X,{children:(0,b.tZ)(c.Z,{inputRef:ie,size:p.NO.compact,startEnhancer:e=>e.$isFocused||D.length>0?(0,b.tZ)(h.default,{size:16,onClick:e=>e.stopPropagation()}):(0,b.tZ)(m.default,{size:16,onClick:e=>e.stopPropagation()}),placeholder:P("shared.enterDeliveryAddress"),overrides:q,value:D,onChange:e=>A(e.target.value),endEnhancer:e=>ne?(0,b.tZ)(g.$,{$size:20}):ae?(0,b.tZ)(f.default,{size:20,...e,onClick:Pe}):null,onFocus:()=>{ee(!0),fe("eats:enter_delivery_address_start",{deliveryDetailsEntryPoint:"lost_store"})},onBlur:()=>ee(!1)})})})}),(0,b.tZ)(u.Z,{type:"login",children:e=>{let{onClick:t}=e;return(0,b.tZ)(s.zx,{kind:s.TO.primary,shape:a.X3.pill,onClick:e=>{fe("eats:store_ofd_address_input_card_login_click",{isLost:!0}),t(e)},overrides:G,startEnhancer:()=>(0,b.tZ)(d.default,{size:12}),"data-test":"login-btn",children:P("components.store_address_input.login_button")})}})]}),(0,b.BX)(Y,{$isMobile:ge,children:[P("shared.update_information_about_restaurant_label"),(0,b.tZ)(K,{href:Ze.lostMerchantContactUber?Ze.lostMerchantContactUber:void 0,onClick:()=>{fe("eats:lost_store_contact_uber_clicked")},"data-test":"contact-uber-btn",children:P("shared.contact_uber")})]})]})})}},48263:(e,t,r)=>{r.d(t,{Z:()=>c});var o=r(14016),n=r(91931),s=r(89407),a=r(5639),i=r(59924);const l=(0,n.zo)("div",(e=>{let{$theme:t,$isGroceryStore:r,$isMobile:o}=e;return{display:"flex",flexDirection:"column",justifyContent:"start",alignItems:o?"center":"flex-start",paddingTop:r?t.sizing.scale1600:t.sizing.scale1000,paddingBottom:t.sizing.scale100,backgroundColor:t.colors.backgroundPrimary}})),d=(0,n.zo)("h1",(e=>{let{$theme:t,$isGroceryStore:r,$isMobile:o}=e;return{...o?t.typography.HeadingSmall:r?t.typography.HeadingMedium:t.typography.HeadingLarge,color:t.colors.contentPrimary}})),u=(0,n.zo)("h2",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentPrimary}})),c=e=>{let{storeTitle:t,storeAddress:r,isGroceryStore:n}=e;const c=(0,o.T)(),{isMobile:p}=(0,a.hU)();return(0,i.BX)(l,{$isGroceryStore:n,$isMobile:p,children:[(0,i.tZ)(d,{$isGroceryStore:n,$isMobile:p,children:t??""}),(0,i.tZ)(u,{children:r??""}),(0,i.tZ)(s.Z,{overrides:{Root:{style:{maxWidth:"max-content",marginInlineStart:"0"}}},size:"small",contentMaxWidth:"none",closeable:!1,children:c("shared.closed_on_uber_eats")})]})}},12025:(e,t,r)=>{r.d(t,{Y:()=>U});var o=r(74369),n=r(91931),s=r(71110),a=r(34567),i=r(62091),l=r(53683),d=r(55186),u=r(71051),c=r(46933),p=r(61742),h=r(94813),m=r(47986),g=r(56525),f=r(69420),_=r(52656),y=r(33535),S=r(58679),Z=r(34626),P=r(81567),b=r(5639),v=r(59924);const C=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentPrimary}})),E=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingXSmall,color:t.colors.contentPrimary,textAlign:"center"}})),k=(0,n.zo)("p",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium}})),z=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{padding:t.sizing.scale600,display:"flex",flexDirection:"column",gap:"11px",maxWidth:"411px"}})),M=(0,n.zo)(i.Z,(e=>{let{$theme:t}=e;return{height:"100%",objectFit:"cover",maxWidth:t.sizing.scale2400,margin:"0 auto",background:t.colors.green200,padding:t.sizing.scale600,borderRadius:"100%"}})),O=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{padding:`${t.sizing.scale300} ${t.sizing.scale600} ${t.sizing.scale600} ${t.sizing.scale300}`,textAlign:"center",gap:t.sizing.scale300,display:"flex",flexDirection:"column"}})),T=(0,n.zo)("span",{fontWeight:"bold"});function U(e){let{store:t}=e;const r=(0,h.TH)(),{handleStorefrontNupGuestUserUseCase:n}=(0,g.u4)(t),s=(0,p.Z)(),a="control"!==s,{user:i}=(0,Z.Z)(),l=i?.data?.isLoggedIn,{modalName:d}=(0,m.RAN)(r,["modalName"]),u=(0,y.ZP)();(0,o.useEffect)((()=>{u("eats:store_nup_xp_inclusion_event",{treatment:s})}),[u,s]),(0,o.useEffect)((()=>{a&&!l&&"storefrontNup"!==d&&n(r)}),[r,a,n,l,d]);return(0,v.tZ)(P.Z,{component:()=>(0,v.tZ)(w,{store:t}),modalName:"storefrontNup"})}function w(e){let{store:t}=e;const r=(0,y.ZP)(),n=(0,p.Z)(),s=(0,o.useContext)(u.k7),{handleHasSeenOrDismissedGuestComponent:a,title:i,offer:d}=(0,g.u4)(t),c=(0,h.TH)(),Z=(0,f.k6)(),P=(0,o.useMemo)((()=>(0,m.DZj)({location:c,path:c.pathname,newQueryParams:{sourceCTA:"storefront_nup",storefrontNupOffer:n}})),[c,n]),{isMobile:C}=(0,b.hU)(),E=C?e=>{let{children:t}=e;return(0,v.tZ)(S.R1,{onClose:()=>{a(),Z.push((0,m.C45)(c))},children:t})}:e=>{let{children:t}=e;return(0,v.tZ)(l.ZP,{onClose:()=>{a(),Z.push((0,m.C45)(c))},children:t})};return d&&i?(0,v.tZ)("div",{children:(0,v.tZ)(E,{children:(0,v.tZ)(R,{offer:d,title:i,redirectLocation:P,handleOnClick:()=>{a("login"),r("eats:store_nup_guest_dialog_login_click",{storeUuid:t?.data?.uuid??"",offerUuid:d??""}),s.set("storefrontNupState",_.R.CAME_FROM_GUEST_COMPONENT)},store:t})})}):null}const R=e=>{let{title:t,redirectLocation:n,handleOnClick:i,store:l,offer:u}=e;const p=(0,y.ZP)();return(0,o.useEffect)((()=>{u&&p("eats:store_nup_guest_dialog_impression",{storeUuid:l?.data?.uuid??"",offerUuid:u??""})}),[p,u,l?.data?.uuid]),u?(0,v.BX)(z,{children:[(0,v.tZ)(M,{src:(0,s.pZ)(r(83020))}),(0,v.tZ)(C,{children:(0,v.tZ)(E,{children:t})}),(0,v.BX)(O,{children:[(0,v.tZ)(k,{children:(0,v.tZ)(c.v,{id:"storefront_nup_content_first_paragraph"})}),(0,v.BX)(k,{children:[(0,v.tZ)(T,{children:(0,v.tZ)(c.v,{id:"storefront_nup_content_second_paragraph_new_user"})})," ",(0,v.tZ)(c.v,{id:"storefront_nup_content_second_paragraph"})]})]}),(0,v.tZ)(d.Z,{type:"login",redirectTo:n,children:e=>{let{onClick:t}=e;return(0,v.tZ)(a.Z,{onClick:e=>{i(),t(e)},children:(0,v.tZ)(c.v,{id:"components.LogIn.header"})})}})]}):null}},58524:(e,t,r)=>{r.d(t,{Z:()=>p});var o=r(74369),n=r(69420),s=r(47986),a=r(86255),i=r(94813),l=r(47885),d=r(70247),u=r(69694),c=r(20511);const p=()=>{const e=(0,i.TH)(),{primaryBundledStoreUuid:t,entryPoint:r}=(0,s.RAN)(e,["primaryBundledStoreUuid","entryPoint"]),{isStorePrecheckoutBundlingEnabled:p}=(0,l.Z)(),h=(0,n.UO)(),m=(0,a.Z)({encodedStoreUuid:h.encodedStoreUuid}),g=(0,n.k6)(),{draftOrder:f}=(0,u.Z)(m),{draftOrders:_}=(0,d.Dz)();(0,o.useEffect)((()=>{if(!p||t)return;if("checkout-validation-debundle"===r)return;const o=(0,c.op)(f,_?.data);if(o?.storeUuid){const t=(0,s.DZj)({location:e,path:e.pathname,newQueryParams:{primaryBundledStoreUuid:o?.storeUuid,primaryDraftOrderUUID:o?.uuid}});g.replace(t)}}),[p,t,f,_?.data,g,e,r])}},13845:(e,t,r)=>{r.d(t,{Z:()=>l});var o=r(74369),n=r(51170),s=r(71454),a=r.n(s),i=r(929);const l=()=>{const{state:e,setAddressInputHighlighted:t}=(0,n.D)(),{headerHeight:r}=(0,i.Z)(),s=(0,o.useRef)(null),l=(0,o.useRef)(e.isAddressInputHighlighted);return l.current=e.isAddressInputHighlighted,(0,o.useEffect)((()=>{const e=a()((()=>{if(!s.current)return l.current&&t(!1);const e=(s.current.getBoundingClientRect().bottom||0)-r<=0;e!=l.current&&t(e)}),50);return document.addEventListener("scroll",e),()=>{document.removeEventListener("scroll",e)}}),[r,t]),(0,o.useEffect)((()=>()=>{t(!1)}),[t]),{addressInputCardRef:s}}},46195:(e,t,r)=>{r.d(t,{Z:()=>a});var o=r(94813),n=r(47986),s=r(84998);const a=function(e){const t=(0,o.TH)(),{storeCatalogSections:r,storeCatalogSubsections:a,storeCatalogSectionTypes:i}=(0,n.RAN)(t,["storeCatalogSections","storeCatalogSubsections","storeCatalogSectionTypes"]),{canFetchMore:l}=(0,s.ZP)({storeUuid:e,catalogSectionUuid:r,catalogSubsectionUuid:a,catalogSectionType:i});return{shouldShowFooter:!r||!l}}},61742:(e,t,r)=>{r.d(t,{Z:()=>s});var o=r(60849),n=r(41063);const s=()=>{const e={...n.v.storefront_nup,defaultValue:"control"};return(0,o.qp)(e)}},56525:(e,t,r)=>{r.d(t,{SE:()=>C,cj:()=>E,u4:()=>z});var o=r(74369),n=r(34626),s=r(80804),a=r(71051),i=r(14016),l=r(47986),d=r(5639),u=r(94813),c=r(69420),p=r(61742),h=r(20115),m=r(31171),g=r(52656),f=r(55793),_=r(8961),y=r(33535),S=r(55811),Z=r(230),P=r(92431),b=r(65717);const v=(e,t,r,o)=>{const n=(0,l.DZj)({location:r,path:r.pathname,newQueryParams:{savingsCtaType:"CLOSE",savingsId:o},persistentQueryParams:l.RvV}),s=(0,l.Prt)(n,"promos");t.push(s),e.set("storefrontNupState",g.R.HAS_DISPLAYED_PROMO)},C=e=>{const t=(0,P.Z)(),r=(0,o.useContext)(a.k7),n=(0,b.Z)(),s=(0,c.k6)(),i=(0,u.TH)(),l=t.get("uev2.storefront_nup_redirect"),d=n&&l,p=k(l),h=p?p.offer:null;(0,o.useEffect)((()=>{d&&h&&(v(r,s,i,h),t.set("uev2.storefront_nup_redirect",""))}),[t,s,i,h,r,d])},E=e=>{const t=(0,y.ZP)(),r=(0,o.useContext)(a.k7),i=(0,u.TH)(),l=(0,f.m)(),c=decodeURIComponent(l?.entryPointUrl??"")===i.pathname,{user:p}=(0,n.Z)(),h=p?.data?.isLoggedIn,m=(0,_.Z)(),b=r.get("storefrontNupState")===g.R.GUEST_COMPONENT_SEEN,v=(0,s.Z)(),C=(0,Z.Z)(),E=(0,d.hU)(),k=(0,S.Z)(),z=e?e?.data:null,M=z?z.storeInfoMetadata?.storeAvailablityStatus?.state:"",O=!!M&&"STORE_CLOSED"===M,T=(0,P.Z)().get("uev2.storefront_nup_redirect"),U=!!z&&z.isLost,w=T||r.get("storefrontNupState")===g.R.CAME_FROM_GUEST_COMPONENT,R=r.get("storefrontNupState")===g.R.HAS_DISPLAYED_PROMO,x=z&&!U&&!C&&"eats"===k&&c&&m&&!b&&!E.isGoogleBot&&!O,I=w&&!R&&0==v;return(0,o.useEffect)((()=>{t("eats:store_nup_condition_check",{isUserLoggedIn:Boolean(h),isEntryPointPage:c,isClient:m,guestComponentSeen:b,isGoogleBot:E.isGoogleBot,isStoreOpen:Boolean(!O)})}),[E.isGoogleBot,t,b,m,c,O,h]),h?I:x},k=e=>{const t=(0,i.T)(),r=(0,h.Z)("storefront_nup_config"),{data:o}=(0,m.Z)();if(!e||"control"===e)return null;const n=r[o?.geoIpCountryCode||""],s=n?.offers?.[0],a=n?.offers?.[1];if(!(!!n&&n.enabled))return null;const l={t1:s?.promoCode??"",t2:s?.promoCode??"",t3:a?.promoCode??"",t4:a?.promoCode??""},d={t1:{title:t("storefront_nup_non_auth_header_title_with_offer_details",{value:s?.amount,minBasketSize:s?.minBasketSize})},t2:{title:t("storefront_nup_non_auth_header_title_generic",{value:s?.amount,minBasketSize:s?.minBasketSize})},t3:{title:t("storefront_nup_non_auth_header_title_with_offer_details",{value:a?.amount,minBasketSize:a?.minBasketSize})},t4:{title:t("storefront_nup_non_auth_header_title_generic",{value:a?.amount,minBasketSize:a?.minBasketSize})}};return{offer:l[e]??null,title:d[e]&&d[e].title?d[e].title:null}},z=e=>{const t=(0,u.TH)(),r=(0,c.k6)(),s=(0,o.useContext)(a.k7),i=(0,p.Z)(),{user:d}=(0,n.Z)(),h=d?.data?.isLoggedIn,m=(0,y.ZP)(),f=k(i),_=f?f.offer:null,S=f?f.title:null,Z="control"!==i,P=h&&_,b=_,C=(0,o.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dismiss";"login"!==t&&m("eats:store_nup_guest_dialog_dismiss",{storeUuid:e?.data?.uuid??"",offerUuid:_??""}),s.set("storefrontNupState",g.R.GUEST_COMPONENT_SEEN)}),[m,_,s,e?.data?.uuid]),E=(0,o.useCallback)((e=>{if(!b)return null;const t=(0,l.DZj)({location:e,path:e.pathname,newQueryParams:{modalName:"storefrontNup"},persistentQueryParams:l.RvV});r.push(t)}),[b,r]);return(0,o.useEffect)((()=>{P&&v(s,r,t,_)}),[r,t,_,s,P]),{offer:_,title:S,handleStorefrontNupGuestUserUseCase:E,handleHasSeenOrDismissedGuestComponent:C,storefrontNupXpEnabled:Z,shouldShowNonAuthComponent:b}}}}]);