"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[50406],{11362:(t,e,i)=>{i.d(e,{N:()=>r});const r={cell:"cell",section:"section",module:"module"}},22023:(t,e,i)=>{i.d(e,{I:()=>l});var r=i(79810),n=i(11362);const o=(0,r.zo)("hr",(t=>{const{$theme:e,$size:i=n.N.section}=t;return i===n.N.module?{borderTopWidth:e.sizing.scale100,borderTopColor:e.colors.borderOpaque,borderTopStyle:"solid",borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none"}:{borderTopWidth:"1px",borderTopColor:e.colors.borderOpaque,borderTopStyle:"solid",borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none"}}));o.displayName="StyledDivider";var a=i(59924);const l=(0,r.Le)(o,(t=>function(e){return(0,a.tZ)(t,{"aria-hidden":"true",role:"separator",...e})}))},33157:(t,e,i)=>{i.d(e,{IY:()=>C,fw:()=>h,pN:()=>f,wv:()=>y,xt:()=>I,zW:()=>g});var r=i(91931),n=i(82532),o=i(1961),a=i(36278),l=i(52692),s=i(52298),d=i(59924);const u=(0,r.zo)("div",{display:"flex",alignItems:"center"}),c=(0,r.zo)("div",(t=>{let{$theme:e}=t;return{margin:"2px 0",color:e.colors.contentNegative,...e.typography.LabelMedium}})),m=(0,r.zo)("div",(t=>{let{$theme:e}=t;return{color:e.colors.contentSecondary,...e.typography.ParagraphSmall}})),p=(0,r.zo)("div",{margin:"0 16px"}),h=()=>{const{isCartUnderMBS:t,cartWarning:e}=(0,n.f)();return t&&e?e:null},g=t=>{let{warning:e}=t;return(0,d.BX)(u,{children:[(0,d.tZ)(o.Z,{color:"negative",size:24}),(0,d.tZ)(a.Tr,{}),(0,d.BX)("div",{children:[(0,d.tZ)(c,{children:e.title}),(0,d.tZ)(m,{children:e.subtitle})]})]})},f=t=>{let{$spaceBefore:e}=t;const i=h();return i?(0,d.BX)(d.HY,{children:[(0,d.tZ)(s.ZP,{$height:e}),(0,d.tZ)(g,{warning:i}),(0,d.tZ)(l.Z,{$height:"1px",$margin:"16px 0 0"})]}):null},I=()=>{const t=h();return t?(0,d.BX)(d.HY,{children:[(0,d.tZ)(l.Z,{$height:"2px",$margin:"0"}),(0,d.BX)(p,{children:[(0,d.tZ)(s.ZP,{$height:16}),(0,d.tZ)(g,{warning:t}),(0,d.tZ)(s.ZP,{$height:16})]})]}):null},y=()=>{const t=h();return t?(0,d.BX)(d.HY,{children:[(0,d.tZ)(s.ZP,{$height:16}),(0,d.tZ)(g,{warning:t}),(0,d.tZ)(s.ZP,{$height:16}),(0,d.tZ)(l.Z,{$height:"1px",$margin:"0 0 0 40px"})]}):null},C=t=>{let{$spaceAfter:e}=t;const{cartWarning:i}=(0,n.f)();return i?(0,d.BX)(d.HY,{children:[(0,d.tZ)(g,{warning:i}),e?(0,d.tZ)(s.ZP,{$height:e}):null]}):null}},51090:(t,e,i)=>{i.d(e,{Z:()=>wt});var r=i("__fusion__476"),n=i(74369),o=i(17222),a=i(69420),l=i(94813),s=i(46933),d=i(91931),u=i(47986),c=i(70247),m=i(36278),p=i(62091),h=i(14210),g=i(49373),f=i(7646),I=i(4509),y=i(44606),C=i(95768),Z=i(53890),_=i(66958),T=i(73472),v=i(65014),O=i(59924);const B=t=>{let{item:e,storeUuid:i,isDisabled:r,isLoading:o,cartQuantity:a,onUpdate:l,decimalQuantity:s,overrideQuantityConstraints:d,overridingMeasurementType:u}=t;const[c,m]=(0,n.useState)(y.Tf.from(s??a)),p=(0,n.useRef)(c);(0,n.useEffect)((()=>{m(y.Tf.from(s??a)),p.current=y.Tf.from(s??a)}),[s,a]);const{startTiming:h}=(0,T.K3)(),g=(0,_.L5)(e,d),f=(0,n.useRef)(void 0),I=(0,n.useCallback)((t=>{h(`${v.B.UPDATE_ITEM_QUANTITY_WITH_DEBOUNCE}_${e?.uuid||""}`,{shouldOverride:!0});const i=y.Tf.from(g.increment??1).multiply(t===Z.TX.increment?1:-1);let r=y.Tf.from(p.current).add(i);(g.minPermitted&&r.lt(g.minPermitted)||r.lt(0))&&(r=y.Tf.from(0)),p.current=r;const n=0===r.toFloat();m(r),clearTimeout(f.current),f.current=setTimeout((()=>{h(`${v.B.UPDATE_ITEM_QUANTITY}_${e?.uuid||""}`,{shouldOverride:!0}),l(r.toFloat())}),n?0:750)}),[e,g.increment,g.minPermitted,l,h]);return(0,O.tZ)(C.Z,{type:"secondary",storeUuid:i,item:e,quantity:c,updateQuantity:I,isDisabled:r||o,overrideQuantityConstraints:d,overridingMeasurementType:u,isRemovable:!0})};var U=i(71228),E=i(28250),N=i(55998),b=i(33535);const R=(0,d.zo)("div",{marginRight:"8px",pointerEvents:"auto"});function D(t){let{cartItemActions:e,onRemove:i,onReplace:r,onSchedule:o,disabled:a}=t;const l=(0,n.useRef)(!1),s=(0,b.ZP)(),d=Array.from(e||[]);return(0,n.useEffect)((()=>{l.current||(d.forEach((t=>{s("eats:cart_item_action_impression",{type:String(t.cartItemActionType||"")})})),l.current=!0)}),[s,d]),(0,O.tZ)(O.HY,{children:d.map((t=>null==t.buttonViewModel?null:(0,O.tZ)(R,{children:(0,O.tZ)(N.Z,{isDisabled:a,viewModel:t.buttonViewModel,onClick:e=>{e.preventDefault(),(t=>{switch(s("eats:cart_item_action_click",{type:String(t||"")}),t){case"REMOVE":return i();case"REPLACE":return r();case"SCHEDULE":return o();case"UNKNOWN":;}})(t.cartItemActionType)}})},t.cartItemActionType)))})}var x=i(33967),S=i(55403),z=i(27871),A=i(83960),$=i(66134),L=i(45106),P=i(72179),w=i(28397),k=i(64388),V=i(47857),M=i(98976);var Q=i(71110),W=i(49723),X=i(74280),q=i(31913),G=i(87444),Y=i(86990),H=i(93778),F=i(67318),K=i(79370),j=i(33023),J=i(6264),tt=i(44997),et=i(3695),it=i(13672),rt=i(83793),nt=i(19910);var ot=i(64986),at=i(34337);const lt=(0,d.zo)("li",(t=>{let{$theme:e}=t;return{width:"100%",paddingTop:"8px",":first-child":{paddingTop:"4px"},color:e.colors.contentSecondary,display:"flex",flexWrap:"wrap"}})),st=(0,d.zo)("span",(t=>{let{$theme:e}=t;return{...e.typography.LabelSmall,lineHeight:"20px"}})),dt=(0,d.zo)("span",(t=>{let{$theme:e}=t;return{display:"flex",...e.typography.ParagraphSmall}})),ut=(0,d.zo)("p",(t=>{let{$theme:e}=t;return{...e.typography.ParagraphSmall,marginBottom:e.sizing.scale300}})),ct=(0,d.zo)("div",(t=>{let{$theme:e}=t;return{display:"flex",flexDirection:"row",flex:1,padding:`${e.sizing.scale600} 0`}})),mt=(0,d.zo)(o.rU,(t=>{let{disabled:e,$isCartDrafting:i,$theme:r}=t;return{width:"100%",pointerEvents:e?"none":"auto",...i?{display:"flex",marginRight:r.sizing.scale600,minHeight:"112px"}:{}}})),pt=(0,d.zo)("li",{width:"100%",paddingTop:"16px"}),ht=(0,d.zo)("div",{width:"100%",maxWidth:"100%",display:"flex"}),gt=(0,d.zo)("div",{flexGrow:1}),ft=(0,d.zo)("div",(t=>{let{$theme:e}=t;return{...e.typography.LabelMedium,padding:0}})),It=(0,d.zo)("div",(t=>{let{$theme:e}=t;return{...e.typography.ParagraphSmall,color:e.colors.contentNegative}})),yt=(0,d.zo)("ul",(t=>{let{$theme:e}=t;return{marginTop:e.sizing.scale100,flexGrow:1}})),Ct=(0,d.zo)("div",{paddingLeft:"16px"}),Zt=(0,d.zo)(p.Z,(t=>{let{$theme:e,$isCartDrafting:i}=t;return{...i?{height:"72px",width:"72px"}:{height:"48px",width:"48px"},...i?{}:{outline:`1px solid ${e.colors.contentPrimary}08`},objectFit:"cover",outlineOffset:"-1px"}})),_t=(0,d.zo)("div",(t=>{let{$theme:e,$isCartDrafting:i}=t;return{...i?{marginRight:e.sizing.scale600,marginTop:0,marginBottom:0,marginLeft:0}:{margin:e.sizing.scale600,alignItems:"flex-start"},width:"72px",minWidth:"72px",height:"72px",minHeight:"72px",display:"flex",justifyContent:"center",overflow:"hidden",borderRadius:e.borders.radius300}})),Tt=(0,d.zo)("div",(t=>{let{$theme:e}=t;return{display:"flex",justifyContent:"center",alignItems:"center"}})),vt=(0,d.zo)("div",(t=>{let{$theme:e}=t;return{minHeight:e.sizing.scale1600,display:"flex",alignItems:"center"}})),Ot=(0,d.zo)("div",{display:"flex"}),Bt=(0,d.zo)(f.Bi,{pointerEvents:"auto"}),Ut=(0,d.zo)("div",{flexGrow:1,display:"flex",justifyContent:"flex-end",alignItems:"center"}),Et=(0,d.zo)("div",(t=>{let{$theme:e,$marginTop:i}=t;return{display:"flex",alignItems:"center",...i?{marginTop:e.sizing[i]}:null}})),Nt=(0,d.zo)("div",(t=>{let{$theme:e}=t;return{...e.typography.ParagraphSmall,color:e.colors.contentTertiary,marginLeft:e.sizing.scale300}})),bt=(0,d.zo)("div",(t=>{let{$theme:e}=t;return{display:"flex",width:e.sizing.scale500,height:e.sizing.scale500}})),Rt=(0,d.zo)("div",{display:"flex",alignItems:"center"}),Dt=(0,d.zo)("li",(t=>{let{$isLastItem:e,$theme:i,$isCartDrafting:r}=t;return{display:"flex",width:"100%",...e?{}:{borderBottom:`1px solid ${i.colors.borderOpaque}`},...r&&e?{marginBottom:`-${i.sizing.scale600}`}:{}}})),xt=(0,d.zo)("div",(t=>{let{$theme:e,$isCartDrafting:i}=t;return{...i?{paddingBottom:e.sizing.scale600,paddingTop:e.sizing.scale600}:{padding:e.sizing.scale600},flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",gap:e.sizing.scale0}})),St=(0,d.zo)("div",{display:"flex",alignItems:"center",justifyContent:"center"}),zt=(0,d.zo)("div",(t=>{let{$theme:e}=t;return{...e.typography.LabelSmall,borderRadius:e.borders.radius300,backgroundColor:e.colors.backgroundSecondary,padding:e.sizing.scale400,whiteSpace:"nowrap"}})),At=(0,d.zo)("div",(t=>{let{$theme:e}=t;return{paddingTop:e.sizing.scale300}})),$t=(0,Q.pZ)(i(19702)),Lt=t=>{const e=(0,a.k6)(),{isBundledOrder:i}=(0,c.Dz)();return t.isUnavailable&&i?(0,O.tZ)(Rt,{children:t.hasServerDrivenCartActions?(0,O.tZ)(D,{disabled:t.disabled,cartItemActions:t.cmpCartItem?.cartItemActions,onRemove:t.onRemove,onReplace:()=>{e.push(t.backupItemsUrl)},onSchedule:t.onSchedule}):(0,O.tZ)(Bt,{onClick:t.onRemove,disabled:t.disabled,children:(0,O.tZ)(s.v,{id:"shared.remove"})})}):null},Pt=t=>{let{shoppingCartItem:e,cmpCartItem:i,storeItem:o,itemCustomizations:d,quantitySelectType:p,isCartDrafting:g,cartItemTags:f,isLiveOrder:C,setLiveOrderError:Z,isLiveOrderCartLoading:T,...v}=t;const N=(0,l.TH)(),R=(0,a.k6)(),{uuid:S,shoppingCartItemUuid:$,title:L,specialInstructions:Q,quantity:et,customizations:it,imageURL:rt,storeUuid:Dt,sectionUuid:Pt,subsectionUuid:wt,fulfillmentIssueAction:kt,itemQuantity:Vt,pricedByUnit:Mt}=e,{isBundledOrder:Qt,serverCart:Wt,draftOrderUUID:Xt}=(0,c.Dz)(),{setOutOfItemsStateWithItemPayload:qt,setInitialSpecialInstructions:Gt}=(0,W.Z)(),Yt=(0,K.Z)(),{store:Ht}=(0,k.ZP)(Dt),Ft=Ht?.data?.fulfillmentIssueOptions||v.fulfillmentIssueOptions,Kt=C?Ft:v.fulfillmentIssueOptions||Ht?.data?.fulfillmentIssueOptions,jt="cart-item-"+S,{data:Jt}=function(t){let{storeUuid:e,sectionUuid:i,subsectionUuid:r,menuItemUuid:n}=t;return(0,M.hn)((0,V.A)({itemRequestType:"ITEM",storeUuid:e,sectionUuid:i,subsectionUuid:r,menuItemUuid:n,diningMode:null},{preparedId:"mobile-menu-item",queryObserverOptions:{enabled:!0}}))}({storeUuid:Dt,sectionUuid:Pt,subsectionUuid:wt,menuItemUuid:S}),te=e.sellingOption??(0,_.qY)(o?.purchaseInfo?.purchaseOptions?.[0])??(0,_.Wq)(Jt?.purchaseInfo?.purchaseOptions?.[0]),ee=(0,z.CF)(),{isBillSplitOrder:ie,isDraftOrderCartLocked:re,isDraftOrderParticipant:ne}=(0,A.Z)(),oe=Wt.data?.currencyCode||"",ae=(0,Y.Z)({storeId:Dt,originalCurrencyCode:oe}),{isInMulticart:le}=(0,P.Z)(),se=function(t){const{isLiveOrder:e,liveOrderUuid:i}=(0,tt.W)(),r=(0,J.W)({getCartFrom:"workflowId",workflowId:i});let n=y.Tf.maybeFrom(t?.itemQuantity?.inSellableUnit?.value)?.toE5().toBaseDecimal();return!e||"SYNCING"!==r?.status&&"AVAILABLE"!==r?.status||(n=r?.rawCartData?.cartQuantities?.[t?.uuid]?.currentQuantity),n}(e),de=(0,x.Z)(),ue=(0,nt.d)(),ce=(0,ot.Z)(),me=(0,b.ZP)(),pe=Boolean(i?.singleCartItemWarnings?.find((t=>t.type===h.mP.UNAVAILABLE)));r.useEffect((()=>{pe&&me("eats:cart_item_unavailable")}),[me,pe]);const he=(0,n.useCallback)((async t=>{C?ue({type:"cart",num:t,skuUuid:S,cartItemUuid:$}).catch((t=>{"UPDATE_ITEMS_IN_CART_BOTTOM_SHEET"===t.name?Z(t.payload[0]):ce()})):de($,t)}),[$,de,ue,C,S,Z,ce]),ge=(0,n.useCallback)((()=>he(0)),[he]),fe=(0,G.Z)("is_quantity_constraints_sot_override_enabled"),Ie=Wt.isLoading||ee.isLoading||Boolean(T),ye=ie&&re&&ne,Ce=(0,u.F$D)(N,{storeUuid:Dt,itemUuid:S,storeSlug:Ht?.data?.slug||"",sectionUuid:e.sectionUuid,subsectionUuid:e.subsectionUuid},"auto-replace-backup-item"),Ze=(0,j.qP)(Ht?.data?.location?.locationType)?(0,u.Bwo)(N,{storeUuid:Dt,itemUuid:$}):(0,u.lVP)(N,{itemUuid:$,draftOrderUUID:Xt}),_e=Array.from(i?.cartItemActions||[]).length>0,Te="SUBSTITUTE_ITEM"===kt?.type,ve=kt?.itemSubstitutes,Oe=Kt?.resolutionActions?.find((t=>t.action?.type===kt?.type)),Be=()=>{qt({item:e,fulfillmentIssueOptions:Kt}),Gt(e.specialInstructions)},Ue=(0,z.ZP)()?.checkoutPayloads?.cartItems?.cartItems?.find((t=>t.shoppingCartItemUUID===$)),Ee=fe?(t=>t?.purchaseOption?.soldByUnit?.measurementType)(Ue??i):void 0,Ne=fe?(t=>t?.purchaseOption?.quantityConstraintsV2?{incrementNumber:y.Tf.from(t?.purchaseOption?.quantityConstraintsV2?.increment??_.wI.incrementQuantity).toFloat(),defaultQuantityNumber:y.Tf.from(t?.purchaseOption?.quantityConstraintsV2?.defaultQuantity??_.wI.defaultQuantity).toFloat(),minPermittedNumber:y.Tf.from(t?.purchaseOption?.quantityConstraintsV2?.minPermitted??_.wI.minimumQuantity).toFloat(),maxPermittedNumber:y.Tf.from(t?.purchaseOption?.quantityConstraintsV2?.maxPermitted??_.wI.maximumQuantity).toFloat(),increment:y.Tf.from(t?.purchaseOption?.quantityConstraintsV2?.increment??_.wI.incrementQuantity),defaultQuantity:y.Tf.from(t?.purchaseOption?.quantityConstraintsV2?.defaultQuantity??_.wI.defaultQuantity),minPermitted:y.Tf.from(t?.purchaseOption?.quantityConstraintsV2?.minPermitted??_.wI.minimumQuantity),maxPermitted:y.Tf.from(t?.purchaseOption?.quantityConstraintsV2?.maxPermitted??_.wI.maximumQuantity)}:void 0)(Ue??i):void 0,be=(0,G.Z)("price_items_by_weight")&&(0,_.ne)(o??e,Ee),Re=pe?null:(0,O.tZ)(St,{children:"picker"===p?(0,O.tZ)(U.Z,{item:o??e,itemUuid:S,disabled:Ie||ye,value:et,updateItemQuantity:he,decimalQuantity:se,sellingOption:te,itemQuantity:Vt,pricedByUnit:Mt,isInCart:!0}):"stepper"===p?(0,O.tZ)(B,{item:o??e,storeUuid:Dt,isLoading:Ie,isDisabled:ye,cartQuantity:et,decimalQuantity:se,onUpdate:he,overridingMeasurementType:Ee,overrideQuantityConstraints:Ne}):"none"===p?(0,O.tZ)(zt,{children:(()=>{const t=y.Tf.from(se??et);return be?`${t.toFloat()} ${(0,_.YP)(o??e)||""}`:t.toFloat()})()}):null}),De=()=>{Yt&&R.push((0,F.t)(N,{storeUuid:Dt,entryPoint:"multicart"}))},xe=pe||Qt?(0,O.tZ)(Rt,{children:_e?(0,O.tZ)(D,{disabled:Ie||ye,cartItemActions:i?.cartItemActions,onRemove:ge,onReplace:()=>{R.push(Ce)},onSchedule:De}):(0,O.tZ)(Bt,{onClick:ge,disabled:Ie||ye,children:(0,O.tZ)(s.v,{id:"shared.remove"})})}):null,Se=()=>C&&!Oe?null:Te&&ve||!Oe?Te&&ve?(0,O.BX)(Et,{children:[(0,O.tZ)(bt,{children:(0,O.tZ)(w.Z,{size:12,color:"contentTertiary"})}),(0,O.tZ)(Nt,{children:ve[0]?.title})]}):null:(0,O.BX)(Et,{children:[(0,O.tZ)(bt,{children:(0,O.tZ)(w.Z,{size:12,color:"contentTertiary"})}),(0,O.tZ)(Nt,{children:Oe.title})]});return le&&g?(0,O.BX)(r.Fragment,{children:[(0,O.BX)(mt,{$isCartDrafting:g,disabled:Ie||ye||pe,to:Ze,onClick:Be,children:[(0,O.tZ)(Tt,{children:(0,O.tZ)(_t,{$isCartDrafting:g,children:(0,O.tZ)(Zt,{$isCartDrafting:g,src:rt||$t,alt:L})})}),(0,O.BX)(xt,{$isCartDrafting:g,children:[(0,O.tZ)(ft,{children:L}),i?.customizations?.map(((t,e)=>(0,O.tZ)(ut,{children:(0,O.tZ)(q.ZP,{text:t})},e))),C&&Ht.isLoading?(0,O.tZ)(at.Z,{width:"50%",height:"20px",animation:!0}):(0,O.tZ)(Se,{}),Q?(0,O.BX)(lt,{children:[(0,O.BX)(st,{children:[(0,O.tZ)(s.v,{id:"components.SpecialInstructions.text"}),":"]}),(0,O.tZ)(dt,{children:Q})]}):null,f?.map(((t,e)=>(0,O.tZ)("div",{children:(0,O.tZ)(H.Z,{tag:t})},e))),(0,O.tZ)("div",{children:i?.singleCartItemWarnings?.map((t=>(0,O.tZ)(It,{children:t.title},t.type)))}),(0,O.tZ)("div",{children:(0,O.tZ)(I.Z,{shoppingCartItemUuid:$,cartItem:i})}),(0,O.tZ)(Lt,{disabled:Ie||ye,cmpCartItem:i,onRemove:ge,backupItemsUrl:Ce,hasServerDrivenCartActions:_e,isUnavailable:pe,onSchedule:De})]})]}),Re]}):le?(0,O.tZ)(mt,{to:Ze,disabled:Ie||ye||pe,onClick:Be,children:(0,O.BX)(pt,{"data-test":jt,children:[(0,O.BX)(ht,{children:[(0,O.BX)(gt,{children:[(0,O.tZ)(ft,{children:L}),i?.singleCartItemWarnings?.map((t=>(0,O.tZ)(It,{children:t.title},t.type))),(0,O.BX)(yt,{children:[i?.customizations?.map(((t,e)=>(0,O.tZ)("div",{children:(0,O.tZ)(q.ZP,{text:t},e)},e))),Te&&ve||!Oe?null:(0,O.BX)(Et,{$marginTop:"scale100",children:[(0,O.tZ)(bt,{children:(0,O.tZ)(w.Z,{size:12,color:"contentTertiary"})}),(0,O.tZ)(Nt,{children:Oe.title})]}),Te&&ve?(0,O.BX)(Et,{$marginTop:"scale100",children:[(0,O.tZ)(bt,{children:(0,O.tZ)(w.Z,{size:12,color:"contentTertiary"})}),(0,O.tZ)(Nt,{children:ve[0]?.title})]}):null,Q?(0,O.BX)(lt,{children:[(0,O.BX)(st,{children:[(0,O.tZ)(s.v,{id:"components.SpecialInstructions.text"}),":"]}),(0,O.tZ)(dt,{children:Q})]}):null]}),(0,O.tZ)(At,{children:f?.map(((t,e)=>(0,O.tZ)("div",{children:(0,O.tZ)(H.Z,{tag:t})},e)))})]}),(0,O.tZ)(Ct,{children:(0,O.tZ)(Zt,{src:rt||$t,alt:L})})]}),(0,O.BX)(vt,{children:[(0,O.BX)(Ot,{onClick:t=>{t.stopPropagation(),t.preventDefault()},children:[pe?null:(0,O.BX)(O.HY,{children:[Re,(0,O.tZ)(m.sA,{})]}),xe]}),(0,O.tZ)(Ut,{children:(0,O.tZ)(I.Z,{shoppingCartItemUuid:$,cartItem:i})})]}),(0,O.tZ)(X.Z,{storeUuid:Dt,item:e,hideSpacer:!0})]})}):(0,O.BX)(ct,{"data-test":jt,onClick:Be,children:[(0,O.tZ)(U.Z,{itemUuid:S,item:o,updateItemQuantity:he,disabled:Ie||ye,value:et,decimalQuantity:se,sellingOption:te,itemQuantity:Vt,pricedByUnit:Mt,isInCart:!0}),(0,O.tZ)(E.Z,{itemUuid:S,storeUuid:Dt,isDisabled:Ie||ye,to:(0,u.lVP)(N,{itemUuid:$}),title:L,allCustomizations:it,changedCustomizations:d||[],currencyCode:ae,shoppingCartItemUuid:$,specialInstructions:Q,imageUrl:rt,fulfillmentIssueAction:kt,fulfillmentIssueOptions:Kt}),(0,O.tZ)(X.Z,{storeUuid:Dt,item:e,hideSpacer:!0})]},$)},wt=t=>{let{cmpCartItems:e,quantitySelectType:i="picker",fulfillmentIssueOptions:o,isCartDrafting:a,isLiveOrderCartLoading:l}=t;const{isLiveOrder:s,liveOrderUuid:d}=(0,tt.W)(),{liveOrderStoreUuid:u}=(0,it.l)(),[c,m]=r.useState(null),p=(0,J.W)({getCartFrom:"workflowId",workflowId:d}),{currentUserCartItems:h,storeUuid:f}=(0,A.Z)(),I=(0,n.useMemo)((()=>(0,rt.Nv)(p)),[p]),y=s?I:h,C=(0,$.Z)(u??f),Z=(0,n.useMemo)((()=>(0,g.Tg)(y)),[y]),_=(0,n.useMemo)((()=>(e||[]).reduce(((t,e)=>(t[e?.shoppingCartItemUUID||""]=e,t)),{})),[e]),T=(0,L.Z)();(0,S.Z)(T);const v=(0,n.useMemo)((()=>s?y?.filter((t=>Boolean(_[t.shoppingCartItemUuid])))??[]:void 0===e?y:y?.filter((t=>Boolean(_[t.shoppingCartItemUuid])))),[e,y,_,s]),B=t=>{m(t)};return(0,O.tZ)("ul",{children:v?.map(((t,e)=>{const{shoppingCartItemUuid:r,uuid:n}=t,d=C[n]??void 0,u=_[r],p=e===v?.length-1,h=u?.cartItemTags;return(0,O.BX)(O.HY,{children:[c?(0,O.tZ)(et.Z,{orderValidationError:c,onClose:()=>m(null)}):null,(0,O.tZ)(Dt,{$isLastItem:p,$isCartDrafting:a,children:(0,O.tZ)(Pt,{shoppingCartItem:t,cmpCartItem:u,storeItem:d,itemCustomizations:Z[r],quantitySelectType:i,fulfillmentIssueOptions:o,isCartDrafting:a,cartItemTags:h,isLiveOrder:s,setLiveOrderError:B,isLiveOrderCartLoading:l})},r)]})}))})}},34267:(t,e,i)=>{i.d(e,{Z:()=>f});var r=i(46933),n=i(86695),o=i("__fusion__896"),a=i(69420),l=i(83395),s=i(91931),d=i(73472),u=i(65014),c=i(230),m=i(13672),p=i(59924);const h=(0,s.zo)("div",(()=>({display:"flex",justifyContent:"right"}))),g=(0,s.zo)(n.zx,(t=>{let{$theme:e}=t;return{display:"flex",gap:e.sizing.scale300}})),f=()=>{const{liveOrderStoreUuid:t}=(0,m.l)(),{restaurantLink:e,onGoToStore:i}=(0,l.Z)({storeUuid:t}),n=(0,a.k6)(),{startTiming:s}=(0,d.K3)(),f=(0,c.Z)();return(0,p.tZ)(h,{children:(0,p.BX)(g,{onClick:()=>{s(u.B.CART_ADD_ITEM_CLICK,{shouldOverride:!0}),i(),n.push(e)},kind:"secondary",size:"compact",shape:"pill",...f?{overrides:{Root:{style:t=>{let{$theme:e}=t;return e.typography.LabelSmall}}}}:null,children:[(0,p.tZ)(o.default,{size:16}),(0,p.tZ)(r.v,{id:"shared.addItems"})]})})}},79370:(t,e,i)=>{i.d(e,{Z:()=>o});var r=i(60849),n=i(43426);function o(){return(0,r.ip)({...n.J.store_gr_schedule_cart_action_enabled,defaultValue:!1})}},3015:(t,e,i)=>{i.d(e,{Z:()=>o});var r=i(87444),n=i(28222);const o=()=>{const t=(0,r.Z)("guest_checkout_webshop_enabled");return(0,n.Z)()&&t}},37573:(t,e,i)=>{i.d(e,{Z:()=>p});var r=i(74369),n=i(60849),o=i(33535),a=i(34626),l=i(43426),s=i(92870),d=i(70247),u=i(64388),c=i(44805),m=i(3015);function p(){const{user:t,isUnregisteredUser:e}=(0,a.Z)(),i=t.data?.isLoggedIn,p=(0,n.ip)({...l.J.guest_checkout,defaultValue:s.n.guest_checkout.defaultValue}),h=(0,n.qp)({...l.J.guest_checkout_guest_mode,defaultValue:s.n.guest_checkout_guest_mode.defaultValue}),g=(0,m.Z)(),f=function(){const{serverCart:t}=(0,d.iQ)(),e=t.data?.storeUuid,{store:i}=(0,u.ZP)(e);return Boolean(i.data?.isVenueStore)}();return{guestCheckoutEnabled:(0,r.useMemo)((()=>{const t=!i&&e;return!(!f||!t)||t&&(p||g)}),[p,i,e,f,g]),emitGuestCheckoutEvent:function(t,e,i){const n=(0,o.ZP)(),a=(0,c.Z)(),l=a?"eats:guest_checkout_in_guest_mode_enabled_citrus_xp":"eats:guest_checkout_enabled_citrus_xp",s=a?"eats:guest_checkout_in_guest_mode_enabled_citrus_xp_all_events":"eats:guest_checkout_enabled_citrus_xp_all_events";return(0,r.useCallback)((r=>{!t&&e&&n(l,{param_name:"guest.checkout.enabled",param_value:String(i),isGuestCheckoutEligible:Boolean(r)}),n(s,{param_name:"guest.checkout.enabled",param_value:String(i),isGuestCheckoutEligible:Boolean(r),isLoggedIn:Boolean(t),isUnregisteredUser:Boolean(e),isGuestModeApp:Boolean(a)})}),[n,t,e,a,l,s,i])}(Boolean(i),e,p),guestCheckoutInGuestModeXP:h}}},13672:(t,e,i)=>{i.d(e,{l:()=>o});var r=i(17941),n=i(44997);const o=()=>{const{isLiveOrder:t,liveOrderUuid:e,storeUuid:i}=(0,n.W)(),o=(0,r.W)({cartType:"LIVE_ORDER",getCartFrom:"workflowId",workflowId:e,selector:t=>t.rawCartData?.liveOrder}),a=o?.cart?.shoppingCart?.items?.[0]?.storeUUID,l=o?.customer?.customerIdentifier?.restaurantUUID;return{isLiveOrder:t,liveOrderStoreUuid:l||a||i||""}}},39874:(t,e,i)=>{i.d(e,{Z:()=>s});var r=i(24472);const n={red:{BRAND_CONTENT_PRIMARY:"BORDER_NEGATIVE",BRAND_CONTENT_ON_PRIMARY:"CONTENT_ON_COLOR",BRAND_CONTENT_ON_SECONDARY:"NEGATIVE",BRAND_CONTENT_DISABLED:"BACKGROUND_LIGHT_NEGATIVE",BRAND_BORDER_ACCESSIBLE:"BORDER_NEGATIVE"},yellow:{BRAND_CONTENT_PRIMARY:"CONTENT_ON_COLOR_INVERSE",BRAND_CONTENT_ON_PRIMARY:"CONTENT_ON_COLOR_INVERSE",BRAND_CONTENT_ON_SECONDARY:"CONTENT_ON_COLOR_INVERSE",BRAND_CONTENT_DISABLED:"BACKGROUND_LIGHT_WARNING",BRAND_BORDER_ACCESSIBLE:"CONTENT_MEMBERSHIP"},control:{BRAND_CONTENT_PRIMARY:"BORDER_POSITIVE",BRAND_CONTENT_ON_PRIMARY:"CONTENT_ON_COLOR",BRAND_CONTENT_ON_SECONDARY:"BORDER_POSITIVE",BRAND_CONTENT_DISABLED:"BACKGROUND_LIGHT_POSITIVE",BRAND_BORDER_ACCESSIBLE:"BORDER_POSITIVE"}},o=(t,e)=>(n[t]??n.control)[e]??e,a=(t,e,i)=>t?1===e.length?{...t,[e[0]]:i}:{...t,[e[0]]:a(t[e[0]],e.slice(1),i)}:t,l=(t,e)=>{if("illustrationContent"===t?.type&&"icon"===t.illustrationContent.illustration?.illustration.type&&t.illustrationContent.illustration?.illustration.icon.color){const i=t.illustrationContent.illustration.illustration.icon.color;return a(t,["illustrationContent","illustration","illustration","icon","color"],o(e,i))}return t};const s=function(t){const e=(0,r.W)();if(!t)return null;let i={...t};return["title","subtitle","tertiaryTitle"].forEach((t=>{const r=i[t];r?.richTextElements&&Array.isArray(r.richTextElements)&&(i[t].richTextElements=r.richTextElements.map((t=>((t,e)=>{if("text"===t.type&&t.text?.text){const i=t.text.text.color;return a(t,["text","text","color"],o(e,i))}return t})(t,e))))})),"illustrationContent"===i.leadingContent?.type&&"icon"===i.leadingContent.illustrationContent.illustration?.illustration.type&&i.leadingContent.illustrationContent.illustration?.illustration.icon.color&&(i={...i,leadingContent:l(i.leadingContent,e)}),i}},82532:(t,e,i)=>{i.d(e,{f:()=>o});var r=i(27871),n=i(70247);const o=()=>{const{draftOrderUUID:t,isBundledOrder:e}=(0,n.Dz)(),{validationErrors:i,checkoutPayloads:{cartItems:o}}=(0,r.ZP)(),a=i?.some((t=>"INVALID_BASKET"===t.type)),l=(e?o?.cartItemsGroups?.find((e=>e.draftOrderUUID===t)):o)?.cartItemsWarnings?.[0];return{isCartUnderMBS:Boolean(l||o?.cartItemsGroups?.some((t=>t.cartItemsWarnings?.length)))&&(a||e),cartWarning:l}}}}]);