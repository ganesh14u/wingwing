(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[41197],{19211:(e,t,n)=>{"use strict";n.d(t,{Y:()=>l,Z:()=>c});var r=n(91931),a=n(33497),i=n(57444),o=n(58814),s=n(8639);const l=e=>{let{$theme:t,disabled:n}=e;return{color:t.colors.contentInversePrimary,background:t.colors.contentWarning,...n?(0,i.Z)(t):{":hover":{background:(0,s.dK)(t.colors.contentWarning,.1)},":active":{background:(0,s.dK)(t.colors.contentWarning,.2)},...(0,o.Z)(t)}}},c=(0,r.zo)("button",(e=>{let{$theme:t,disabled:n,radius:r}=e;return{...(0,a.Z)({$theme:t,radius:r}),...l({$theme:t,disabled:n})}}))},21974:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(91931),a=n(74365),i=n(59924);const o=(0,r.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,display:"inline"}})),s=e=>{if(!e.error)return null;const{info:t}=e.error?.meta||{};return(0,i.tZ)(a.c,{children:t?(0,i.tZ)(o,{children:t.message}):(0,i.tZ)(o,{children:e.error.message})})}},54969:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(17222),a=n(46933),i=n(52692),o=n(47986),s=n(12548),l=n(91931),c=n(34567),d=n(7646),u=n(14005),m=n(94813),p=n(76892),h=n(59924);const f=(0,l.zo)("div",{marginBottom:"24px"}),y=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingXSmall,display:"flex",justifyContent:"space-between",alignItems:"center"}})),Z=(0,l.zo)(i.Z,(e=>{let{$margin:t}=e;return{position:"relative",left:"-24px",width:"458px",margin:t}})),_=(0,l.zo)(i.Z,(e=>{let{$margin:t}=e;return{position:"relative",right:"-48px",width:"386px",margin:t}})),g=(0,l.zo)("div",{marginTop:"24px",display:"inline-block"}),b=e=>{const{eatsPassSelectedPersonalPayment:t,eatsPassPaymentProfiles:n}=(0,u.C)(),i=(0,m.TH)(),{allowedPaymentMethods:l}=e,b=l&&l.length>0?encodeURIComponent(JSON.stringify({allowedPaymentMethods:l,entryPoint:p.X$.membership_personal})):null,P=(0,o._RR)(i,{...b&&{modalContext:b},nextUrl:e.onSelectAddPaymentNextUrl}),C=(0,o.$B7)(i,{modalContext:"eats-pass",nextUrl:e.onSelectAddPaymentNextUrl}),v=n.find((t=>t.uuid===e.paymentProfileUuid))||t;return(0,h.tZ)(f,{children:v?(0,h.BX)(h.HY,{children:[(0,h.tZ)(Z,{$margin:"16px 0"}),(0,h.BX)(y,{children:[(0,h.tZ)(s.Z,{profile:v}),(0,h.tZ)(d.Bi,{$as:r.rU,to:P,children:e.changePaymentText?e.changePaymentText:(0,h.tZ)(a.v,{id:"shared.edit"})})]}),(0,h.tZ)(_,{$margin:"16px 0"})]}):(0,h.tZ)(g,{children:n&&n.length>0?(0,h.tZ)(c.Z,{$as:r.rU,to:P,children:(0,h.tZ)(a.v,{id:"shared.editPayment"})}):(0,h.tZ)(c.Z,{$as:r.rU,to:C,children:(0,h.tZ)(a.v,{id:"shared.addPaymentMethod"})})})})}},44438:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var r=n("__fusion__476"),a=n(94813),i=n(89151),o=n(3979),s=n(91931),l=n(95747),c=n(22787),d=n(34567),u=n(54969),m=n(47986),p=n(14005),h=n(59924);const f=(0,s.zo)("div",{display:"flex",justifyContent:"space-between",alignItems:"center"}),y=(0,s.zo)("div",(e=>{let{$theme:t}=e;return t.typography.HeadingLarge})),Z=(0,s.zo)("div",{margin:"16px 0"}),_=(0,s.w1)(d.Z,(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,background:t.colors.contentWarning}})),g=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphXSmall,margin:"16px 0 24px"}})),b=(0,s.w1)(c.Z,{marginTop:"12px"}),P=e=>{let{setRenewError:t,eatsPassConfirmationModal:n}=e;const s=(0,o.Z)(),c=(0,l.Z)(),d=(0,a.TH)(),P=(0,i.useQueryClient)(),C=(0,m.vN_)(d,"subscriptionConfirmation"),{updateRenewStatusMaybe:v,updateRenewStatus:S,eatsPassSelectedPersonalPayment:M,allowedPaymentInfo:I,setAllowedPaymentInfo:E,allowedEatsPassPaymentTypes:w,NoSelectedPaymentProfileError:U}=(0,p.C)();r.useEffect((()=>{v.data?(c(s),P.invalidateQueries(["getMembershipHubV1"])):v.error&&t(v.error)}),[t,v.data,v.error,s,c,P]);const N=n.passUUID,x=n.subscriptionConfirmationModal?.subsRenewCard,k=n.subscriptionConfirmationModal?.paymentReauthorizationCard,T=x?.paymentConfirmation;return r.useEffect((()=>{if(T&&!I){const{supportedPaymentTokenTypes:e,defaultPaymentProfileUuid:t,paymentProfileUuids:n}=T;E({supportedPaymentTokenTypes:e,defaultPaymentProfileUuid:t,paymentProfileUuids:n})}}),[I,T,E]),N&&x&&k?(0,h.BX)(h.HY,{children:[(0,h.tZ)(f,{children:(0,h.tZ)(y,{children:k.title?.text?.text||""})}),(0,h.tZ)(Z,{children:k.subtitle?.text?.text||""}),(0,h.tZ)(u.Z,{paymentProfileUuid:M?.uuid,onSelectAddPaymentNextUrl:C,allowedPaymentMethods:w}),(0,h.tZ)(g,{dangerouslySetInnerHTML:{__html:x.paymentConfirmation?.lowerBody||""}}),(0,h.tZ)(_,{disabled:v.isLoading,onClick:()=>{(e=>{let{passUuid:n,subsRenewCard:r}=e;M?S({passUuid:n,lastUpdatedTimestamp:r.lastUpdatedTimestamp,paymentProfileUuid:M.uuid,newState:"OPTED_IN"}):t(U)})({passUuid:N,subsRenewCard:x})},children:x.paymentConfirmation?.positiveButtonText}),(0,h.tZ)(b,{disabled:v.isLoading,onClick:()=>{c(s)},children:x.paymentConfirmation?.negativeButtonText})]}):null}},96005:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(74369),a=n(39591),i=n(47310),o=n(49235),s=n(87444);function l(e){const{modalStates:t,promoMetadata:{promoUUID:n},uuid:l}=(0,a.Z)(e),{setInterstitialStatus:c}=(0,i.Z)(n||l||""),d=t&&t[o.FF.SUCCESS]?.modalContent,u="promotionContent"===d?.type&&d.promotionContent.primaryCTA?.text||"",m=(0,s.Z)("membership_ccc_success_state_enabled");return{updateInterstitialSuccessStatus:(0,r.useCallback)((()=>{u.length>0&&m&&c(o.FF.SUCCESS)}),[u,m,c])}}},887:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(53683),a=n(21974),i=n(91931),o=n(16465),s=n(28221),l=n(59924);const c=(0,i.zo)("div",{width:"458px"}),d=e=>{let{modalContext:t}=e;const n=(0,o.Z)();return(0,l.tZ)(r.ZP,{onClose:n.onNavigateBack,hasBackButton:!1,hasCloseButton:!1,stickyBanner:()=>(0,l.tZ)(a.Z,{error:null}),children:(0,l.tZ)(c,{children:(0,l.tZ)(s.Z,{modalContext:t,actionHandlers:n})})})}},41197:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_e});var r=n(52949),a=n(81567),i=n(1795),o=n(2842),s=n("__fusion__476"),l=n(69420),c=n(53683),d=n(40606),u=n(77511),m=n(93801),p=n(79851),h=n(94813),f=n(89151),y=n(91931),Z=n(192),_=n(34567),g=n(54969),b=n(33535),P=n(34626),C=n(47986),v=n(55811),S=n(61439),M=n(14005),I=n(19211),E=n(81077),w=n(67327),U=n(32135),N=n(37998),x=n(46938),k=n(59924);const T=(0,y.zo)("div",{display:"flex",justifyContent:"space-between",alignItems:"center"}),B=(0,y.zo)("div",(e=>{let{$theme:t}=e;return t.typography.DisplayBold2XSmall})),A=(0,y.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingXSmall,alignSelf:"flex-end"}})),H=(0,y.zo)("div",{margin:"16px 0"}),O=(0,y.zo)("div",{margin:"16px 0 24px"}),D=e=>{let{eatsPass:t,modalContext:n,eatsPassUrl:r,setPurchaseError:a}=e;const i=(0,h.TH)(),o="postmates"===(0,v.Z)(),c=(0,C.vN_)(i,o?"purchaseUnlimited":"purchaseEatsPass"),{isPromoCodeRedemptionFlow:d,isU4bContext:u,isSuccess:m,isLoading:y,error:D,onClickActivateFundedOffer:R,onActivateSuccess:V}=(0,S.Z)(),L=(0,p.Z)(),z=(0,l.k6)(),q=(0,b.ZP)(),{getUser:$}=(0,P.Z)(),{purchaseEatsPass:F,purchaseEatsPassMaybe:X,eatsPassSelectedPersonalPayment:K,allowedEatsPassPaymentTypes:Q,NoSelectedPaymentProfileError:Y,successScreen:j,setSuccessScreen:W,allowedPaymentInfo:G,setAllowedPaymentInfo:J}=(0,M.C)(),ee=o?I.Z:_.Z,te=(0,f.useQueryClient)(),ne=(0,E.jw)(i),{membershipHubArg:re}=(0,w.Z)(),{membershipEntryPoint:ae,accessPoint:ie,passCampaign:oe}=(0,C.RAN)(i,["membershipEntryPoint","accessPoint","passCampaign"]),se=(0,N.Z)(),[le,ce]=s.useState(null);s.useEffect((()=>{q("eats:eats_pass_modal_view")}),[q]),s.useEffect((()=>{if(X.data)if($({shouldGetSubsMetadata:!0}),te.invalidateQueries(["getMembershipHubV1"]),j)z.replace(ne);else if(X.data?.successCard)W({type:"passToastCard",passToastCard:X.data.successCard}),z.replace(ne);else{const e=(0,C.W57)(i,L);z.replace(e)}else X.error&&a(X.error)}),[z,r,a,$,i,X.data,X.error,te,W,j,L,ne]),s.useEffect((()=>{m?($({shouldGetSubsMetadata:!0}),V()):D&&a(D)}),[D,$,m,V,a]);const{paymentConfirmation:de}=t?.subsManageView.purchaseInfo||n||{};if(s.useEffect((()=>{if(de&&!G){const{supportedPaymentTokenTypes:e,defaultPaymentProfileUuid:t,paymentProfileUuids:n}=de;J({supportedPaymentTokenTypes:e,defaultPaymentProfileUuid:t,paymentProfileUuids:n})}}),[G,de,J]),t?.subsManageView.purchaseInfo?.membershipAction)return(0,k.tZ)(l.l_,{to:(0,C.vN_)(i,"purchaseMembership")});if(!de)return(0,k.tZ)(l.l_,{to:r});return(0,k.BX)(k.HY,{children:[(0,k.BX)(T,{children:[(0,k.tZ)(B,{children:de.title}),(0,k.tZ)(A,{children:de.price})]}),(0,k.tZ)(H,{children:(0,k.tZ)(Z.Z,{lines:de.upperBody})}),(0,k.tZ)(g.Z,{onSelectAddPaymentNextUrl:c,allowedPaymentMethods:Q,changePaymentText:de.changePaymentText}),(0,k.tZ)(O,{children:(0,k.tZ)(Z.Z,{lines:de.lowerBody})}),(0,k.tZ)(ee,{disabled:X.isLoading||y||!K,onClick:()=>{if(!K)return void a(Y);if((d||u)&&t){q("eats:membership_ptc_confirm_click");const e={fundedOfferUUID:t.subsManageView.fundedOfferUUID,purchasePassOfferRequest:{passOfferUuid:t.subsManageView.offerUuid,paymentProfileUuid:K.uuid,cityId:t.subsManageView.offerCityId}};return R(e),null}q("eats:eats_pass_confirm_click",{membership:{accessPoint:ie||ae||U.xr.UNKNOWN,passCampaign:oe||U.xn.UNKNOWN}});const e={defaultPaymentProfile:{currencyAmount:{amountE5:de.paymentAuthenticationData.totalPrice.amountE5,currencyCode:de.paymentAuthenticationData.totalPrice.currencyCode},paymentProfileUUID:K.uuid,priceStatus:"FINAL",paymentProfile:K},useCredits:!1};if(t){const n={passOfferUuid:t.subsManageView.offerUuid,paymentProfileUuid:K.uuid,cityId:t.subsManageView.offerCityId};return se(K)?ce((0,k.tZ)(x.Z,{request:n,estimatedPaymentPlan:e,onSuccess:e=>ce(null),onError:e=>ce(null),onCancel:()=>ce(null)})):F(n),null}if(n?.passOfferUUID){const t={passOfferUuid:n.passOfferUUID,paymentProfileUuid:K.uuid,...n.passOfferMutationUUID&&{passOfferMutationUuid:n.passOfferMutationUUID},...re.queryContext&&{queryContext:re.queryContext}};return se(K)?ce((0,k.tZ)(x.Z,{request:t,estimatedPaymentPlan:e,onSuccess:e=>ce(null),onError:e=>ce(null),onCancel:()=>ce(null)})):F(t),null}},children:de.positiveButtonText}),le]})};var R=n(21974),V=n(95747),L=n(3979),z=n(87639),q=n(14872);const $=e=>{let{modalContext:t=""}=e;const n=(0,C.kPj)(t),{isEatsPassEnabled:r}=(0,u.Z)(),a=(0,L.Z)(),o=(0,h.TH)(),f=(0,p.Z)(),y=(0,l.k6)(),[Z,_]=s.useState(null),g=(0,b.ZP)(),P=(0,V.Z)(),{membershipHubArg:v}=(0,w.Z)(),S=(0,z.W)(v),M=S.data?.body.membershipHubViewData||{},I="subsManageViewResponse"in M&&M.subsManageViewResponse||null,E=I?{data:(0,q.H6)(I),error:null,hasLoaded:!0,isLoading:!1}:{data:null,error:null,hasLoaded:!1,isLoading:!0};return s.useEffect((()=>{!S.isFetched||I||n||y.replace((0,C.C45)(o))}),[y,o,S,I,n]),r?(0,k.tZ)(c.ZP,{onClose:()=>{g("eats:eats_pass_modal_exit"),P(a)},stickyBanner:()=>(0,k.tZ)(R.Z,{error:Z}),hasBackButton:!0,children:(0,k.tZ)(c.HF,{children:n?(0,k.tZ)(D,{modalContext:n,eatsPassUrl:a,setPurchaseError:_}):(0,k.tZ)(d.Z,{source:E,loaded:e=>(0,k.tZ)(D,{eatsPass:e,eatsPassUrl:a,setPurchaseError:_}),error:e=>{let{code:t}=e;return(0,k.tZ)(m.Qv,{code:t})},loading:()=>(0,k.tZ)(i.Z,{})})})}):(0,k.tZ)(l.l_,{to:f})};var F=n(44438);const X=()=>{const e=(0,L.Z)(),{eatsPassConfirmationMaybe:t,getSubscriptionConfirmation:n}=(0,M.C)(),r=(0,V.Z)(),[a,o]=s.useState(null);return s.useEffect((()=>{n()}),[n]),(0,k.tZ)(c.ZP,{onClose:()=>{r(e)},stickyBanner:()=>(0,k.tZ)(R.Z,{error:a}),children:(0,k.tZ)(c.HF,{children:(0,k.tZ)(d.Z,{source:t,loaded:e=>(0,k.tZ)(F.Z,{eatsPassConfirmationModal:e,setRenewError:o}),error:e=>{let{code:t}=e;return(0,k.tZ)(m.Qv,{code:t})},loading:()=>(0,k.tZ)(i.Z,{})})})})};var K=n(74369),Q=n(46933),Y=n(78871),j=n(1873),W=n(33571);const G=(0,y.zo)("h1",(e=>{let{$theme:t}=e;return{...t.typography.DisplayBoldXSmall,width:"410px",padding:j.OH,paddingBottom:0}})),J=(0,y.zo)("div",{width:"458px"}),ee=(0,y.zo)("div",(e=>{let{$theme:t}=e;return{height:t.sizing.scale300}})),te=()=>{const[e,t]=(0,K.useState)({screen:U.lM.MAIN,options:{}}),n=(0,L.Z)(),r=(0,l.k6)(),{data:a}=(0,W.Z)(),i=(0,K.useCallback)((()=>{e.screen!==U.lM.MAIN?t({screen:U.lM.MAIN,options:{}}):r.push(n)}),[e,t]);if(!a)return(0,k.tZ)(l.l_,{to:n});const o=[U.lM.MAIN,U.lM.INVOICES,U.lM.SURVEY].includes(e.screen);return(0,k.tZ)(c.ZP,{onClose:i,hasBackButton:e.screen!==U.lM.MAIN,children:(0,k.BX)(J,{children:[o?null:(0,k.tZ)(ee,{}),e.screen===U.lM.INVOICES?(0,k.tZ)(G,{children:(0,k.tZ)(Q.v,{id:"shared.downloadInvoices"})}):null,(0,k.tZ)(Y.Z,{onNavigateBack:i,currentScreen:e,setCurrentScreen:t})]})})};var ne=n(60079),re=n(40506),ae=n(52481);const ie=(0,y.zo)("div",(()=>({width:"458px",paddingTop:"16px"}))),oe=()=>{const e=(0,h.TH)(),{membershipEntryPoint:t,accessPoint:n}=(0,C.RAN)(e,["membershipEntryPoint","accessPoint"]),r=t||n,a=(0,ne.N)(r?{entryPoint:r}:{}),o=(0,L.Z)(),l=(0,V.Z)(),[u,p]=s.useState(null);return(0,k.tZ)(c.ZP,{title:a.data?.body.title||"",onClose:()=>{l(o)},stickyBanner:()=>(0,k.tZ)(R.Z,{error:u}),hasBackButton:!0,children:(0,k.tZ)(ie,{children:(0,k.tZ)(d.a,{source:a,error:e=>e?.screen?(0,k.tZ)(ae.Z,{cardScreen:e.screen}):(0,k.tZ)(m.Qv,{code:parseInt(e?.code||"500")}),loaded:e=>(0,k.tZ)(re.Z,{cardScreenPresentationData:e?.body?.screen,membershipAnalyticsMeta:e?.body?.membershipAnalyticsMeta,setPurchaseError:p}),loading:()=>(0,k.tZ)(i.Z,{})})})})};var se=n(54551);const le=(0,y.zo)("h1",(e=>{let{$theme:t}=e;return{...t.typography.LabelLarge,display:"flex",justifyContent:"center",alignItems:"center",marginTop:"-28px"}})),ce=(0,y.zo)("div",{width:"458px"}),de=e=>{const t=(0,C.kPj)(e.modalContext)||{},n=(0,h.TH)(),r=(0,l.k6)(),a=(0,C.C45)(n),[i,o]=s.useState(null),d=t.subsRenewCard?.paymentConfirmation?.title;return(0,k.tZ)(c.ZP,{onClose:()=>{r.push(a)},hasBackButton:!0,stickyBanner:()=>(0,k.tZ)(R.Z,{error:i}),children:(0,k.BX)(ce,{children:[(0,k.tZ)(le,{children:d||(0,k.tZ)(Q.v,{id:"eats_pass.cohorts.churned.cta"})}),(0,k.tZ)(se.Z,{renewMembershipPayload:t,setRenewError:o})]})})};var ue=n(887),me=n(87444);const pe=(0,r.V)({chunkId:"payments-desktop-add-profile-dialog-split",load:()=>Object.defineProperties(n.e(40011).then(n.bind(n,"__fusion__209")),{__CHUNK_IDS:{value:[40011]},__MODULE_ID:{value:"__fusion__209"},__I18N_KEYS:{value:[]}}),LoadingComponent:i.Z,ErrorComponent:o.D}),he=(0,r.V)({chunkId:"payments-desktop-select-profile-dialog-split",load:()=>Object.defineProperties(n.e(71360).then(n.bind(n,"__fusion__208")),{__CHUNK_IDS:{value:[71360]},__MODULE_ID:{value:"__fusion__208"},__I18N_KEYS:{value:["shared.addPaymentMethod","shared.payment","shared.saveAndContinue","shared.uberCreditsBalance","shared.uber_cash"]}}),LoadingComponent:i.Z,ErrorComponent:o.D}),fe=(0,r.V)({chunkId:"eats-pass-desktop-success-dialog",load:()=>Object.defineProperties(n.e(89077).then(n.bind(n,"__fusion__465")),{__CHUNK_IDS:{value:[89077]},__MODULE_ID:{value:"__fusion__465"},__I18N_KEYS:{value:["shared.addPaymentMethod"]}}),LoadingComponent:i.Z,ErrorComponent:o.D}),ye=(0,r.V)({chunkId:"membership-desktop-terminate-confirmation-dialog",load:()=>Object.defineProperties(Promise.all([n.e(76246),n.e(48863),n.e(12930),n.e(52174)]).then(n.bind(n,"__fusion__491")),{__CHUNK_IDS:{value:[12930,48863,52174,76246]},__MODULE_ID:{value:"__fusion__491"},__I18N_KEYS:{value:["back","close","membership.cancellation_flow.termination_confirmation.alert_banner","membership.cancellation_flow.termination_confirmation.body","membership.cancellation_flow.termination_confirmation.bottom_sheet.extraordinary_description","membership.cancellation_flow.termination_confirmation.bottom_sheet.ordinary_description","membership.cancellation_flow.termination_confirmation.confirmation_pdf_link","membership.cancellation_flow.termination_confirmation.error.contractNameRequired","membership.cancellation_flow.termination_confirmation.error.emailOrPhoneNumberRequired","membership.cancellation_flow.termination_confirmation.error.fullNameRequired","membership.cancellation_flow.termination_confirmation.error.terminationDateRequired","membership.cancellation_flow.termination_confirmation.form_field.label_contract_name","membership.cancellation_flow.termination_confirmation.form_field.label_email","membership.cancellation_flow.termination_confirmation.form_field.label_last_order_number","membership.cancellation_flow.termination_confirmation.form_field.label_name","membership.cancellation_flow.termination_confirmation.form_field.label_termination_date","membership.cancellation_flow.termination_confirmation.form_field.label_termination_reason","membership.cancellation_flow.termination_confirmation.form_field.label_termination_type","membership.cancellation_flow.termination_confirmation.form_field.label_termination_type_extraordinary","membership.cancellation_flow.termination_confirmation.form_field.label_termination_type_ordinary","membership.cancellation_flow.termination_confirmation.form_field.phone_number","membership.cancellation_flow.termination_confirmation.form_field.placeholder_termination_reason","membership.cancellation_flow.termination_confirmation.primary_cta","membership.cancellation_flow.termination_confirmation.secondary_cta","membership.cancellation_flow.termination_confirmation.success_paragraph","membership.cancellation_flow.termination_confirmation.title","shared.close","shared.done","shared.goBack"]}}),LoadingComponent:i.Z,ErrorComponent:o.D}),Ze=(0,r.V)({chunkId:"membership-desktop-checkout-dialog",load:()=>Object.defineProperties(Promise.all([n.e(77897),n.e(22914)]).then(n.bind(n,"__fusion__355")),{__CHUNK_IDS:{value:[22914,77897]},__MODULE_ID:{value:"__fusion__355"},__I18N_KEYS:{value:["back","close","membership.generic_error","shared.goBack"]}}),LoadingComponent:i.Z,ErrorComponent:o.D}),_e=()=>{const e=(0,me.Z)("home_feed_checkout_modal_enabled");return(0,k.BX)(k.HY,{children:[(0,k.tZ)(a.Z,{modalName:"paymentSelectProfile",component:he}),(0,k.tZ)(a.Z,{modalName:"paymentAddProfile",component:pe}),(0,k.tZ)(a.Z,{modalName:"purchaseEatsPass",component:$}),(0,k.tZ)(a.Z,{modalName:"purchaseUnlimited",component:$}),(0,k.tZ)(a.Z,{modalName:"subscriptionConfirmation",component:X}),(0,k.tZ)(a.Z,{modalName:"membershipManagement",component:te}),(0,k.tZ)(a.Z,{modalName:"purchaseMembership",component:oe}),(0,k.tZ)(a.Z,{modalName:"renewMembership",component:de}),(0,k.tZ)(a.Z,{modalName:"membershipModal",component:ue.Z}),(0,k.tZ)(a.Z,{modalName:"terminateConfirmation",component:ye}),(0,k.tZ)(a.Z,{modalName:"eatsPassSuccess",component:fe}),e?null:(0,k.tZ)(a.Z,{modalName:"membershipCheckout",component:Ze})]})}},78871:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ae});var r=n(74369),a=n(69420),i=n(20196),o=n(83059),s=n(40606),l=n(89151),c=n(2237),d=n(62459);var u=n(21585);var m=n(75695);var p=n(14005),h=n(47986),f=n(50622),y=n(94813),Z=n(32135),_=n(52481),g=n(88499),b=n(51901),P=n(59924);const C=e=>{const{cardData:t,cardActionHandlers:n}=e,r=(0,b.Z)({fallback:t.body});return(0,g.Z)(Z.n7.END_MEMBERSHIP_SCREEN,t.body.membershipAnalyticsMeta),(0,P.tZ)(_.Z,{cardActionHandlers:n,cardScreen:r})};var v=n(46933),S=n("__fusion__476"),M=n(91931),I=n(71076),E=n(1795),w=n(33535),U=n(93801),N=n(20568),x=n(34626),k=n(62091),T=n(71110),B=n(67672);const A=(0,M.zo)("li",(e=>{let{$theme:t}=e;return{...t.typography.LabelLarge,padding:"16px 0px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`solid 1px ${t.colors.borderOpaque}`}})),H=(0,M.zo)("p",(e=>{let{$theme:t}=e;return{...t.typography.HeadingXSmall,padding:"16px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}})),O=(0,M.zo)(k.Z,(e=>{let{$width:t,$height:n}=e;return{width:t,height:n,marginBottom:"16px"}})),D=e=>{const t=(0,w.ZP)(),a=(0,N.Z)("getInvoiceDownloadUrlV2"),[i,o]=(0,r.useState)(),{downloadButton:l}=e,{user:c}=(0,x.Z)(),d=(0,r.useCallback)((async e=>{try{const n=await a({uuid:e});(0,B.Z)(n.externalUrl);const r=c.data?.subscriptionMeta?.title?{passName:c?.data?.subscriptionMeta?.title}:{};t("eats:eats_pass_invoices_downloaded",r)}catch(e){if(e instanceof I.F)return!1}finally{o(void 0)}}),[t,a,c]),u=(0,r.useCallback)((e=>{t("eats:eats_pass_invoices_download_clicked"),d(e),o(e)}),[d,t]);return(0,P.tZ)(s.Z,{source:e.eatsPassInvoices,loaded:e=>{const{invoices:t}=e;return t&&t.length?(0,P.tZ)("ul",{children:t.map((e=>(0,P.BX)(A,{children:[e.datestr,S.cloneElement(l,{onClick:()=>u(e.uuid),disabled:i===e.uuid})]},e.uuid)))}):(0,P.BX)(H,{children:[(0,P.tZ)(O,{src:(0,T.pZ)(n(7157)),$width:"64px",$height:"64px"}),(0,P.tZ)(v.v,{id:"membership.no_invoices"})]})},error:e=>{let{code:t}=e;return(0,P.tZ)(U.Qv,{code:t})},loading:()=>(0,P.tZ)(E.Z,{})})};var R=n(1873);const V=e=>{const{invoices:t}=e,n=(0,M.zo)("div",{padding:"0px 0px 0px 16px"});return(0,P.tZ)(n,{children:(0,P.tZ)(D,{eatsPassInvoices:{data:t,isLoading:!1,hasLoaded:!0,error:null},downloadButton:(0,P.tZ)(R.k3,{children:(0,P.tZ)(v.v,{id:"shared.download"})})},"invoices")})};var L=n(55795),z=n(5495);const q=(0,M.zo)("h1",(e=>{let{$theme:t}=e;return{...t.typography.DisplayBoldXSmall,width:"410px",padding:R.OH,paddingBottom:0}})),$=(0,M.zo)("h1",(e=>{let{$theme:t}=e;return{...t.typography.LabelLarge,display:"flex",justifyContent:"center",alignItems:"center",height:"48px",marginTop:"8px"}})),F=e=>{const{cardData:t,cardActionHandlers:n}=e,r=(0,z.Fe)();(0,g.Z)("MANAGE_MEMBERSHIP_SCREEN",t.body.membershipAnalyticsMeta);const a=r===z.iw.DESKTOP?q:$;return(0,P.BX)(P.HY,{children:[(0,P.tZ)(a,{children:t.body.headerBar?.title}),t.body.menuItems?(0,P.tZ)(L.Z,{cardActionHandlers:n,cards:t.body.menuItems}):null]})};var X=n(138),K=n(14016),Q=n(16932);const Y=(0,M.zo)("div",{margin:"16px"}),j=e=>{const t=(0,K.T)();return(0,g.Z)(Z.n7.MEMBERSHIP_ERROR_SCREEN),(0,P.BX)(P.HY,{children:[(0,P.tZ)(X.Z,{title:t("membership.generic_error"),message:(0,P.tZ)(v.v,{id:"membership.error_support"}),errorImage:{url:(0,T.pZ)(n(35840))},imageWrapperWidth:"91px"}),(0,P.tZ)(Y,{children:(0,P.tZ)(Q.Z,{onClick:e.onClick,children:t("shared.close")})})]})};var W=n(27833);const G=e=>{const{cardData:t,cardActionHandlers:n}=e,a=t?.body?.surveyScreen,[i,o]=(0,r.useState)(),s=(0,b.Z)({fallback:a}),{mutate:c,isLoading:u}=function(){const e=(0,d.Z)("submitMembershipSurveyV1");return(0,l.useMutation)((t=>e.request("submitMembershipSurveyV1",t)))}();(0,g.Z)(Z.n7.END_MEMBERSHIP_SCREEN,{...t.body});const m={onRadioUserText(e){o(e.target.value)},onSubmitSurvey(e){const{surveyUUID:t,answerIdentifier:r}=e;t&&r&&c({surveyUUID:t,answerIdentifier:r,answerText:i},{onSuccess:e=>{const t=e?.body?.completionAction?.data;if("performScopedAction"!==t?.type||"cancellationAction"!==t?.performScopedAction?.type||"navigateFlow"!==t?.performScopedAction?.cancellationAction?.type)return;const r=t?.performScopedAction?.cancellationAction?.navigateFlow?.destinationScreen;r&&n?.onNavigateFlow?.(r)}})}};return u?(0,P.tZ)(W.Lg,{}):(0,P.tZ)(_.Z,{cardActionHandlers:{...n,...m},cardScreen:s||a})};var J=n(94131),ee=n(96005),te=n(48840);function ne(e){const{currentScreen:t,cardActionHandlers:n,onNavigateBack:r}=e,a=function(e,t){const n=(0,d.Z)("getEndMembershipScreenV1"),r=(0,c.H)("getEndMembershipScreenV1",e);return(0,l.useQuery)({queryKey:r,queryFn:e=>{let{queryKey:t}=e;return n.request("getEndMembershipScreenV1",t[1])},...t?.queryObserverOptions})}({membershipCancellationScreen:t});return(0,P.tZ)(s.a,{source:a,error:e=>(0,P.tZ)(j,{onClick:r}),loading:W.Lg,loaded:e=>(0,P.tZ)(C,{cardActionHandlers:n,cardData:e})})}const re=Object.freeze({[Z.lM.MAIN]:function(e){const{cardActionHandlers:t,onNavigateBack:n}=e,r=(0,u.I)({});return(0,P.tZ)(s.a,{source:r,error:e=>(0,P.tZ)(j,{onClick:n}),loading:W.ci,loaded:e=>(0,P.tZ)(F,{cardActionHandlers:t,cardData:e}),enableLoadingForRefetch:!0})},[Z.lM.CONFIRM_CANCEL]:ne,[Z.lM.GENERIC_INCENTIVE]:ne,[Z.lM.INCENTIVE]:ne,[Z.lM.PENDING_INCENTIVE]:ne,[Z.lM.SAVING_REINFORCEMENT]:ne,[Z.lM.END_BENEFIT]:ne,[Z.lM.STACK_OFFER]:ne,[Z.lM.PAUSE_SELECTION]:ne,[Z.lM.MAIN_CANCEL]:ne,[Z.lM.SURVEY]:function(e){const{cardActionHandlers:t,onNavigateBack:n,surveyUUID:r}=e,a=function(e,t){const n=(0,d.Z)("getMembershipSurveyV1"),r=(0,c.H)("getMembershipSurveyV1",e);return(0,l.useQuery)({queryKey:r,queryFn:e=>{let{queryKey:t}=e;return n.request("getMembershipSurveyV1",t[1])},...t?.queryObserverOptions})}({surveyUUID:r});return(0,P.tZ)(s.a,{source:a,error:e=>(0,P.tZ)(j,{onClick:n}),loading:W.ap,loaded:e=>(0,P.tZ)(G,{cardActionHandlers:t,cardData:e})})},[Z.lM.ACCEPT_INCENTIVE]:function(e){const{incentiveId:t,cardActionHandlers:n,onNavigateBack:r}=e,a=(0,te.Z)(),i=function(e,t){const n=(0,d.Z)("acceptMembershipIncentiveV1"),r=(0,c.H)("acceptMembershipIncentiveV1",e);return(0,l.useQuery)({queryKey:r,queryFn:e=>{let{queryKey:t}=e;return n.request("acceptMembershipIncentiveV1",t[1])},...t?.queryObserverOptions})}({incentiveId:t},{queryObserverOptions:{onSuccess:()=>a()}});return(0,P.tZ)(s.a,{source:i,error:e=>(0,P.tZ)(j,{onClick:r}),loading:W.Lg,loaded:e=>(0,P.tZ)(_.Z,{cardActionHandlers:n,cardScreen:e.body.successScreen})})},[Z.lM.INVOICES]:function(e){const{onNavigateBack:t}=e,n=function(e,t){const n=(0,d.Z)("getEatsPassInvoicesV1"),r=(0,c.H)("getEatsPassInvoicesV1",e);return(0,l.useQuery)({queryKey:r,queryFn:e=>{let{queryKey:t}=e;return n.request("getEatsPassInvoicesV1",t[1])},...t?.queryObserverOptions})}();return(0,P.tZ)(s.a,{source:n,error:e=>(0,P.tZ)(j,{onClick:t}),loading:W.Wo,loaded:e=>(0,P.tZ)(V,{invoices:e})})}}),ae=e=>{const{enqueue:t}=(0,i.Ds)(),{updateRenewStatus:n,renewStateCard:s}=(0,p.C)(),[c,u]=(0,r.useState)(!1),[_,g]=function(){const e=(0,y.TH)(),t=(0,a.k6)(),n=(0,h.C45)(e),{updateRenewStatusMaybe:i,renewStateCard:o}=(0,p.C)(),[s,l]=(0,r.useState)(!1),{updateInterstitialSuccessStatus:c}=(0,ee.Z)(J.cx.HOME_FEED_PUSH_BOTTOM_MODAL);return(0,r.useEffect)((()=>{i.data?.renewState.state!==o?.state?(c(),t.replace(n)):i.error?l(!0):l(!1)}),[i.data,i.error,t,n,o,c]),[s,()=>{i.error=null}]}(),{currentScreen:b,setCurrentScreen:C,onNavigateBack:v}=e,{mutate:S}=function(e){const t=(0,d.Z)("pauseMembershipV1");return(0,l.useMutation)((e=>t.request("pauseMembershipV1",e)),e)}(),{mutate:M}=(0,m.R)(),I=(0,te.Z)(),E=(0,r.useMemo)((()=>({onNavigateBack:v,onExitFlow(){C({screen:Z.lM.MAIN,options:{}})},onShowMessageSnackbar(e){e&&t({message:e.message},o.t.medium)},onNavigateFlow(e){(0,f.q9)([Z.lM.INCENTIVE,Z.lM.PENDING_INCENTIVE,Z.lM.GENERIC_INCENTIVE,Z.lM.SAVING_REINFORCEMENT,Z.lM.END_BENEFIT,Z.lM.CONFIRM_CANCEL,Z.lM.STACK_OFFER,Z.lM.PAUSE_SELECTION,Z.lM.MAIN_CANCEL],e)?C({screen:e,options:{currentScreen:e}}):u(!0)},onPauseMembership(e,t){let{periodIdentifier:n}=e;S({periodIdentifier:n},{onSuccess:e=>{I(),t(e?.body?.completionAction)}})},onResumeMembership(e,t){M({},{onSuccess:e=>{I(),t(e?.body?.completionAction)}})},onOpenInvoices(){C({screen:Z.lM.INVOICES,options:{}})},onOpenSurvey(e){let{surveyUUID:t}=e;C({screen:Z.lM.SURVEY,options:{surveyUUID:t}})},onEndMembership(e){const{passUUID:t,lastUpdatedTimestamp:r}=e;t&&r&&n({newState:"OPTED_OUT",passUuid:t,lastUpdatedTimestamp:s?.lastUpdatedTimestamp||r})},acceptIncentive(e){const{incentiveID:t}=e;t&&C({screen:Z.lM.ACCEPT_INCENTIVE,options:{incentiveId:t}})}})),[t,I,v,S,s?.lastUpdatedTimestamp,M,C,n]);if(_||c)return(0,P.tZ)(j,{onClick:()=>{u(!1),g(),v()}});const{screen:w,options:U}=b,N=re[w];return(0,r.createElement)(N,{...U,key:w,cardActionHandlers:E,onNavigateBack:v})}},27833:(e,t,n)=>{"use strict";n.d(t,{Lg:()=>b,Wo:()=>S,Lq:()=>v,ci:()=>P,ap:()=>C});var r=n(46933),a=n(91931),i=n(1795),o=n(92300),s=n(34337),l=n(74369),c=n(59924);const d=(0,a.zo)("div",(e=>{let{$theme:t,$gap:n,$width:r}=e;return{display:"flex",flexDirection:"column",width:r,gap:n??t.sizing.scale400}}));function u(e){const t=e.radius?{Root:{style:{borderRadius:e.radius}}}:{},{overrides:n,rows:r,gap:a,width:i="100%",...u}=e;return(0,c.tZ)(d,{$gap:a,$width:i,children:Array.from({length:r??1}).map(((n,r)=>(0,l.createElement)(s.Z,{...u,key:r,width:i,overrides:(0,o.aO)(t,e.overrides??{})})))})}const m=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",width:"100%",gap:t.sizing.scale400}}));function p(e){const[t,n]=(0,a.hQ)(),{header:r=!0,subheader:i=!0,description:o=!0}=e;return(0,c.BX)(m,{children:[r?(0,c.tZ)(u,{width:"100%",height:n.sizing.scale1000,radius:n.borders.radius200,animation:!0}):null,i?(0,c.tZ)(u,{width:"66%",height:n.sizing.scale1000,radius:n.borders.radius200,animation:!0}):null,o?(0,c.tZ)(u,{width:"50%",height:n.sizing.scale600,radius:n.borders.radius200,animation:!0}):null]})}var h=n(72238),f=n(21322);function y(e){const[t,n]=(0,a.hQ)(),{rows:r=1}=e;return(0,c.tZ)(c.HY,{children:Array.from({length:r}).map(((e,t)=>(0,c.tZ)(h.Z,{artwork:()=>(0,c.tZ)(u,{width:n.sizing.scale800,height:n.sizing.scale800,animation:!0}),endEnhancer:()=>(0,c.tZ)(u,{width:n.sizing.scale1600,height:n.sizing.scale600,radius:n.borders.radius200,animation:!0}),children:(0,c.tZ)(f.Z,{overrides:{LabelContent:{props:{$as:"div"}}},children:(0,c.tZ)(u,{width:n.sizing.scale2400,height:n.sizing.scale600,radius:n.borders.radius200,animation:!0})})},t)))})}const Z=(0,a.zo)("div",{padding:"16px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}),_=(0,a.zo)("ul",{flexGrow:1}),g=()=>{const[e,t]=(0,a.hQ)();return(0,c.tZ)(u,{width:"100%",height:t.sizing.scale1400,radius:t.borders.radius300,rows:2,animation:!0})},b=()=>(0,c.BX)(c.HY,{children:[(0,c.tZ)(u,{height:"248px",animation:!0}),(0,c.tZ)(_,{children:(0,c.tZ)(Z,{children:(0,c.tZ)(p,{})})}),(0,c.tZ)(Z,{children:(0,c.tZ)(g,{})})]}),P=()=>(0,c.BX)(c.HY,{children:[(0,c.tZ)(Z,{children:(0,c.tZ)(p,{})}),(0,c.tZ)(y,{rows:2}),(0,c.tZ)(u,{height:"10px",animation:!0}),(0,c.tZ)(Z,{children:(0,c.tZ)(p,{header:!1,description:!1})}),(0,c.tZ)(y,{rows:2}),(0,c.tZ)(u,{height:"10px",animation:!0}),(0,c.tZ)(Z,{children:(0,c.tZ)(p,{header:!1,description:!1})}),(0,c.tZ)(y,{rows:1})]}),C=()=>(0,c.BX)(c.HY,{children:[(0,c.tZ)(Z,{children:(0,c.tZ)(p,{})}),(0,c.tZ)(_,{children:(0,c.tZ)(y,{rows:5})}),(0,c.tZ)(Z,{children:(0,c.tZ)(g,{})})]}),v=()=>(0,c.BX)(c.HY,{children:[(0,c.tZ)(Z,{children:(0,c.tZ)(p,{})}),(0,c.tZ)(Z,{children:(0,c.tZ)(g,{})})]}),S=()=>(0,c.BX)(Z,{children:[(0,c.tZ)(i.Z,{}),(0,c.tZ)(r.v,{id:"loading"})]})},28221:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(93801),a=n(40606),i=n(89151),o=n(2237),s=n(62459);var l=n(47986),c=n(52481),d=n(94813),u=n(88499),m=n(32135),p=n(27833),h=n(59924);const f=e=>{let{modalContext:t,actionHandlers:n}=e;const f=(0,d.TH)(),{lobSpecificMeta:y}=(0,l.RAN)(f,["lobSpecificMeta"]),Z=function(e,t){const n=(0,s.Z)("getMembershipModalV1"),r=(0,o.H)("getMembershipModalV1",e);return(0,i.useQuery)({queryKey:r,queryFn:e=>{let{queryKey:t}=e;return n.request("getMembershipModalV1",t[1])},...t?.queryObserverOptions})}({modalID:t,lobSpecificMetadata:y||null});return(0,u.Z)(m.n7.MEMBERSHIP_MODAL,Z?.data?.body?.membershipAnalyticsMeta),(0,h.tZ)(a.a,{source:Z,error:e=>e?.screen?(0,h.tZ)(c.Z,{cardScreen:e.screen}):(0,h.tZ)(r.Qv,{code:parseInt(e?.code||"500")}),loading:p.Lq,loaded:e=>(0,h.tZ)(c.Z,{cardScreen:e?.body?.cardScreenPresentation??{},cardActionHandlers:n})})}},54551:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var r=n("__fusion__476"),a=n(69420),i=n(94813),o=n(91931),s=n(55811),l=n(95747),c=n(26786),d=n(34567),u=n(19211),m=n(17222),p=n(46933),h=n(14005),f=n(47986),y=n(12548),Z=n(7646),_=n(76892),g=n(59924);const b=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{marginBottom:"24px",...t.typography.HeadingXSmall,display:"flex",justifyContent:"space-between",alignItems:"center"}})),P=(0,o.zo)("div",{marginTop:"24px",display:"inline-block"}),C=e=>{let{changePaymentText:t}=e;return(0,g.tZ)(g.HY,{children:t||(0,g.tZ)(p.v,{id:"shared.editPayment"})})},v=e=>{let{paymentProfiles:t,selectPaymentProfileUrl:n,changePaymentText:r,addPaymentUrl:a}=e;return(0,g.tZ)(P,{children:t&&t.length>0?(0,g.tZ)(d.Z,{$as:m.rU,to:n,children:(0,g.tZ)(C,{changePaymentText:r})}):(0,g.tZ)(d.Z,{$as:m.rU,to:a,children:(0,g.tZ)(p.v,{id:"shared.addPaymentMethod"})})})},S=e=>{let{initialPaymentProfile:t,selectPaymentProfileUrl:n,paymentProfiles:r,addPaymentUrl:a,changePaymentText:i}=e;return(0,g.tZ)(g.HY,{children:t?(0,g.tZ)(y.Z,{profile:t}):(0,g.tZ)(v,{addPaymentUrl:a,paymentProfiles:r,selectPaymentProfileUrl:n,changePaymentText:i})})},M=e=>{let{changePaymentText:t,selectPaymentProfileUrl:n,initialPaymentProfile:r}=e;return(0,g.tZ)(g.HY,{children:r?(0,g.tZ)(Z.Bi,{$as:m.rU,to:n,children:t||(0,g.tZ)(p.v,{id:"shared.editPayment"})}):null})},I=e=>{const t=(0,i.TH)(),{eatsPassPaymentProfiles:n,eatsPassSelectedPersonalPayment:r,allowedEatsPassPaymentTypes:a}=(0,h.C)(),o=encodeURIComponent(JSON.stringify({allowedPaymentMethods:a,entryPoint:_.X$.membership_personal})),s=(0,f._RR)(t,{modalContext:o,nextUrl:e.onSelectAddPaymentNextUrl}),l=(0,f.$B7)(t,{modalContext:"eats-pass",nextUrl:e.onSelectAddPaymentNextUrl}),c=n.find((t=>t.uuid===e.paymentProfileUuid))||r;return(0,g.BX)(b,{children:[(0,g.tZ)(S,{initialPaymentProfile:c,paymentProfiles:n,selectPaymentProfileUrl:s,addPaymentUrl:l,changePaymentText:e.changePaymentText}),(0,g.tZ)(M,{initialPaymentProfile:c,changePaymentText:e.changePaymentText,selectPaymentProfileUrl:s})]})};var E=n(3979);const w=(0,o.zo)("div",{height:"100%",padding:"16px",display:"flex",flexDirection:"column",justifyContent:"space-between"}),U=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{bottom:"0px",marginTop:t.sizing.scale600,position:"sticky"}})),N=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} 0`}})),x=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} 0 0`}})),k=e=>{let{setRenewError:t,renewMembershipPayload:n}=e;const m=(0,E.Z)(),p=(0,l.Z)(),y=(0,i.TH)(),Z=(0,a.k6)(),_=(0,f.vN_)(y,"membershipManagement"),b="postmates"===(0,s.Z)(),[P]=(0,o.hQ)(),C=(0,f.vN_)(y,"subscriptionConfirmation"),{updateRenewStatus:v,updateRenewStatusMaybe:S,renewStateCard:M,eatsPassSelectedPersonalPayment:k,NoSelectedPaymentProfileError:T,allowedPaymentInfo:B,setAllowedPaymentInfo:A}=(0,h.C)(),H=(0,f.C45)(y);r.useEffect((()=>{S.data&&S.data.renewState.state!==M?.state?Z.replace(_):S.error&&t(S.error)}),[t,S.data,S.error,_,Z,M]);const O=n.passUUID,D=n.subsRenewCard;if(r.useEffect((()=>{if(D?.paymentConfirmation&&!B){const{supportedPaymentTokenTypes:e,defaultPaymentProfileUuid:t,paymentProfileUuids:n}=D.paymentConfirmation;A({supportedPaymentTokenTypes:e,defaultPaymentProfileUuid:t,paymentProfileUuids:n})}}),[B,D,A]),!O||!D)return p(m),null;const R={disabled:S.isLoading,onClick:()=>{(e=>{let{passUuid:n,subsRenewCard:r}=e;k?v({passUuid:n,lastUpdatedTimestamp:r.lastUpdatedTimestamp,paymentProfileUuid:k.uuid,newState:"OPTED_IN"}):t(T)})({passUuid:O,subsRenewCard:D})}},V={className:P({marginTop:"12px"}),disabled:S.isLoading,onClick:()=>{Z.push(H)}},L=b?u.Z:d.Z;return(0,g.BX)(w,{children:[(0,g.BX)("div",{children:[(0,g.tZ)(N,{dangerouslySetInnerHTML:{__html:D.paymentConfirmation?.upperBody}}),(0,g.tZ)(I,{paymentProfileUuid:k?.uuid,onSelectAddPaymentNextUrl:C,changePaymentText:D.paymentConfirmation?.changePaymentText}),(0,g.tZ)(x,{dangerouslySetInnerHTML:{__html:D.paymentConfirmation?.lowerBody}})]}),(0,g.BX)(U,{children:[(0,g.tZ)(L,{...R,children:D.paymentConfirmation?.positiveButtonText}),(0,g.tZ)(c.Z,{...V,children:D.paymentConfirmation?.negativeButtonText})]})]})}},61439:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(20568),a=n(89151),i=n(69420),o=n(94813),s=n(47986),l=n(55811),c=n(33535),d=n(14005),u=n(79851),m=n(81077);const p=()=>{const e=(0,c.ZP)(),t="postmates"===(0,l.Z)(),n=(0,i.k6)(),p=(0,o.TH)(),{setSuccessScreen:h}=(0,d.C)(),f=(0,u.Z)(),{promoCode:y,bucketId:Z,fundedOfferUUID:_,confirmationToken:g}=(0,s.RAN)(p,["promoCode","bucketId","fundedOfferUUID","confirmationToken"]),b=Boolean(y)&&Boolean(Z)&&!t,P=Boolean(_)&&Boolean(g),C=(0,r.Z)("activateFundedOfferV1"),{mutate:v,data:S,isSuccess:M,isLoading:I,error:E}=(0,a.useMutation)((e=>C(e))),w=(0,m.jw)(p);return{isPromoCodeRedemptionFlow:b,isSuccess:M,isLoading:I,error:E,onClickActivateFundedOffer:e=>{const t={...e,...P?{fundedOfferUUID:Array.isArray(_)?_[0]:_,u4bContext:{confirmationToken:g}}:{promotionCodeContext:{promotionCode:y,promotionCodeBucketID:Z}}};v(t)},isU4bContext:P,onActivateSuccess:()=>{if(e("eats:eats_pass_partner_promo_code_redeemed"),S?.body.passToastCard)h({type:"passToastCard",passToastCard:S.body.passToastCard}),n.replace(w);else{const e=(0,s.W57)(p,f);n.replace(e)}}}}},67327:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(74369),a=n(94813),i=n(81077);const o=()=>{const e=(0,a.TH)(),t=(0,i.ON)(e),[n,o]=r.useState(t);return r.useEffect((()=>{JSON.stringify(t)!==JSON.stringify(n)&&o((()=>t))}),[n,t]),{membershipHubArg:n}}},33571:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(34626),a=n(87444);function i(){const{user:e}=(0,r.Z)(),t=(0,a.Z)("eats_pass");return!1===e.data?.isLoggedIn?{isLoading:!1,error:null,hasLoaded:!0,data:!1}:{isLoading:e.isLoading,error:e.error,hasLoaded:e.hasLoaded,data:t&&"ACTIVE"===e.data?.subscriptionMeta?.eatsSubscriptionStatus}}},48840:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(74369),a=n(89151);function i(){const e=(0,a.useQueryClient)();return(0,r.useCallback)((()=>{e.invalidateQueries(["getMembershipManagementMenuV1"]),e.refetchQueries(["getMembershipManagementMenuV1"]),e.invalidateQueries(["getMembershipHubV1"]),e.refetchQueries(["getMembershipHubV1"]),e.invalidateQueries(["getEndMembershipScreenV1"]),e.removeQueries(["getEndMembershipScreenV1"])}),[e])}},16465:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(74369),a=n(69420),i=n(95747),o=n(94813),s=n(98258),l=n(75514),c=n(3979);function d(){const e=(0,c.Z)(),t=(0,i.Z)(),n=(0,o.TH)(),d=(0,a.k6)(),u=(0,s.Z)(),m=(0,r.useCallback)((()=>{t(e)}),[e,t]),p=(0,r.useCallback)((e=>{if(!e.deeplink)return;if(function(e){try{return new URL(e).protocol.startsWith("http")}catch{return!1}}(e.deeplink))return void l.Z?.open(e.deeplink,"_blank");const t=u(e.deeplink);d.push({pathname:t.pathname,search:t.search,state:{previousLocation:n}})}),[u,d,n]);return(0,r.useMemo)((()=>({onNavigateBack:m,onDeeplink:p})),[m,p])}},87639:(e,t,n)=>{"use strict";n.d(t,{W:()=>o});var r=n(89151),a=n(2237),i=n(62459);function o(e,t){const n=(0,i.Z)("getMembershipHubV1"),o=(0,a.H)("getMembershipHubV1",e);return(0,r.useQuery)({queryKey:o,queryFn:e=>{let{queryKey:t}=e;return n.request("getMembershipHubV1",t[1])},...t?.queryObserverOptions})}},60079:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var r=n(89151),a=n(2237),i=n(62459);function o(e,t){const n=(0,i.Z)("getOfferSelectionScreenV1"),o=(0,a.H)("getOfferSelectionScreenV1",e);return(0,r.useQuery)({queryKey:o,queryFn:e=>{let{queryKey:t}=e;return n.request("getOfferSelectionScreenV1",t[1])},...t?.queryObserverOptions})}},75695:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var r=n(89151),a=n(62459);function i(e){const t=(0,a.Z)("resumeMembershipV1");return(0,r.useMutation)((e=>t.request("resumeMembershipV1",e)),e)}},50622:(e,t,n)=>{"use strict";function r(e){return null!=e}function a(e,t){return e.includes(t)}n.d(t,{Dw:()=>r,q9:()=>a})},35840:(e,t,n)=>{e.exports=n.p+"63b379eb3fb37c66.svg"},7157:(e,t,n)=>{e.exports=n.p+"8561c79f2ae83695.svg"}}]);