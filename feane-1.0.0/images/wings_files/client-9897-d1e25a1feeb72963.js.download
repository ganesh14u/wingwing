"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[9897],{67526:(E,e,t)=>{t.d(e,{LK:()=>R,fn:()=>_,ko:()=>L,nJ:()=>O});const O=Object.freeze({UNKNOWN:"UNKNOWN",GROUP_ORDER:"GROUP_ORDER",SEE_SIMILAR:"SEE_SIMILAR",STORE_BUNDLING:"STORE_BUNDLING",OVERFLOW:"OVERFLOW",SCHEDULE:"SCHEDULE"}),_=(Object.freeze({UNKNOWN:"UNKNOWN",SNAP_EBT:"SNAP_EBT"}),Object.freeze({UNKNOWN:"UNKNOWN",STORE_CLOSED:"STORE_CLOSED",NOT_ACCEPTING_ORDERS:"NOT_ACCEPTING_ORDERS",NO_COURIERS_NEARBY:"NO_COURIERS_NEARBY",HIGH_DEFECT_RATE:"HIGH_DEFECT_RATE",TOO_FAR_TO_DELIVER:"TOO_FAR_TO_DELIVER",CURRENTLY_UNAVAILABLE:"CURRENTLY_UNAVAILABLE"}),Object.freeze({DISMISS:"DISMISS",SCHEDULE:"SCHEDULE",SWITCH_ASAP:"SWITCH_ASAP"}),Object.freeze({UNKNOWN:"UNKNOWN",EMBEDDED_VIEW:"EMBEDDED_VIEW",ACTION_SHEET:"ACTION_SHEET",RESERVED_2:"RESERVED_2",RESERVED_3:"RESERVED_3",RESERVED_4:"RESERVED_4",RESERVED_5:"RESERVED_5",RESERVED_6:"RESERVED_6",RESERVED_7:"RESERVED_7"}),Object.freeze({UNKNOWN:"UNKNOWN",BYOC:"BYOC",TOP_EATS:"TOP_EATS"}),Object.freeze({UNKNOWN:"UNKNOWN",BYOC:"BYOC",TOP_EATS:"TOP_EATS",IN_STORE_PRICING:"IN_STORE_PRICING",ETA:"ETA"}),Object.freeze({STANDARD:"STANDARD",SLIM:"SLIM"}),Object.freeze({DEFAULT:"DEFAULT",VEG_PREVALENT_MARKET:"VEG_PREVALENT_MARKET"}),Object.freeze({NONE:"NONE",FILTER:"FILTER"}),Object.freeze({STANDARD:"STANDARD",USE_SECTION_AS_CATEGORY:"USE_SECTION_AS_CATEGORY"}),Object.freeze({DEFAULT:"DEFAULT"}),Object.freeze({VERTICAL:"VERTICAL",HORIZONTAL:"HORIZONTAL",DROPDOWN:"DROPDOWN"}),Object.freeze({ROUTE_TO_STORE:"ROUTE_TO_STORE",ROUTE_TO_FEED:"ROUTE_TO_FEED"}),Object.freeze({DISCLAIMER:"DISCLAIMER",STANDARD_METADATA:"STANDARD_METADATA",NUTRITION_FACTS:"NUTRITION_FACTS",UNKNOWN:"UNKNOWN",PRICING:"PRICING",CUSTOMIZATION_METADATA:"CUSTOMIZATION_METADATA",CATALOG_SECTION:"CATALOG_SECTION",QUANTITY_SELECTOR:"QUANTITY_SELECTOR",ALERT:"ALERT",REMOVE_ITEM_BUTTON:"REMOVE_ITEM_BUTTON",STORES_WITH_PRODUCT:"STORES_WITH_PRODUCT",VARIANT_OPTIONS_GROUP:"VARIANT_OPTIONS_GROUP",MINI_STORE_CARD:"MINI_STORE_CARD",REPLACEMENT_PREFERENCES:"REPLACEMENT_PREFERENCES",ALLERGY_PREFERENCES:"ALLERGY_PREFERENCES",SPECIAL_INSTRUCTIONS:"SPECIAL_INSTRUCTIONS",CUSTOMIZATIONS:"CUSTOMIZATIONS",VERTICAL_DIVIDER:"VERTICAL_DIVIDER",PRESELECTED_CUSTOMIZATIONS:"PRESELECTED_CUSTOMIZATIONS",TAG_VIEWS:"TAG_VIEWS",ACTIONABLE_LIST_ITEM:"ACTIONABLE_LIST_ITEM"})),L=Object.freeze({TILE:"TILE",DROPDOWN:"DROPDOWN",PILL:"PILL"}),R=(Object.freeze({DEFAULT:"DEFAULT",STORE_BRANDING_TITLE:"STORE_BRANDING_TITLE"}),Object.freeze({SUCCESS:"SUCCESS",INFO:"INFO",WARNING:"WARNING",FAILURE:"FAILURE",CUSTOM:"CUSTOM"}),Object.freeze({COLLAPSED:"COLLAPSED",EXPANDED:"EXPANDED"}),Object.freeze({UNDEFINED:"UNDEFINED",VEGETARIAN:"VEGETARIAN",VEGAN:"VEGAN",GLUTEN_FREE:"GLUTEN_FREE",PLACEHOLDER_4:"PLACEHOLDER_4",PLACEHOLDER_5:"PLACEHOLDER_5",PLACEHOLDER_6:"PLACEHOLDER_6",PLACEHOLDER_7:"PLACEHOLDER_7",PLACEHOLDER_8:"PLACEHOLDER_8",PLACEHOLDER_9:"PLACEHOLDER_9"}),Object.freeze({HORIZONTAL_GRID:"HORIZONTAL_GRID",VERTICAL_GRID:"VERTICAL_GRID",EXPLORE_MENU:"EXPLORE_MENU",EATER_MESSAGE:"EATER_MESSAGE",CATEGORY_LIST_ITEM:"CATEGORY_LIST_ITEM",SPECIAL_REQUEST:"SPECIAL_REQUEST",EMPTY_STATE:"EMPTY_STATE",AD_CANVAS:"AD_CANVAS",BUNDLE_STORE:"BUNDLE_STORE",AISLE_SHORTCUTS:"AISLE_SHORTCUTS",ACTIVE_CART:"ACTIVE_CART",MENU_TRANSLATION:"MENU_TRANSLATION"}));Object.freeze({SPECIAL_REQUEST:"SPECIAL_REQUEST",REFRESH:"REFRESH",DISMISS:"DISMISS"}),Object.freeze({UNKNOWN:"UNKNOWN",STORE:"STORE",SEE_ALL:"SEE_ALL"}),Object.freeze({ITEM:"ITEM",COMBO:"COMBO",INTER_SUBSECTION_CAROUSEL:"INTER_SUBSECTION_CAROUSEL"}),Object.freeze({DEFAULT:"DEFAULT",CAROUSEL:"CAROUSEL"}),Object.freeze({DEFAULT:"DEFAULT",COLLAPSED:"COLLAPSED",REQUIRED_SINGLE_OPTION:"REQUIRED_SINGLE_OPTION"}),Object.freeze({DEFAULT:"DEFAULT",PROMOTION:"PROMOTION"}),Object.freeze({UBER_CASH:"UBER_CASH"}),Object.freeze({NOOP:"NOOP",INSERT:"INSERT"}),Object.freeze({DEFAULT:"DEFAULT",PHYSICAL:"PHYSICAL",VIRTUAL:"VIRTUAL",DELIVERY_API:"DELIVERY_API",STANDALONE_VIRTUAL:"STANDALONE_VIRTUAL",GROCERY_STORE:"GROCERY_STORE",ITEMLESS_STORE:"ITEMLESS_STORE",RESERVED_7:"RESERVED_7"}),Object.freeze({UNKNOWN:"UNKNOWN",FLAT:"FLAT",PERCENT:"PERCENT",FREE_DELIVERY:"FREE_DELIVERY",DISCOUNT_DELIVERY:"DISCOUNT_DELIVERY",PLACEHOLDER_0:"PLACEHOLDER_0",DO_NOT_USE_FREE_ITEM:"DO_NOT_USE_FREE_ITEM",DO_NOT_USE_DISCOUNTED_ITEM:"DO_NOT_USE_DISCOUNTED_ITEM",VIRTUALPROMO_UBERCASH:"VIRTUALPROMO_UBERCASH",CATEGORY_DISCOUNT:"CATEGORY_DISCOUNT",VOLUME_DISCOUNT:"VOLUME_DISCOUNT",BXGY:"BXGY",FREE_DELIVERY_AND_SERVICE_FEES:"FREE_DELIVERY_AND_SERVICE_FEES",NO_FEES:"NO_FEES",BOGA:"BOGA",MULTI_SKU_FLAT:"MULTI_SKU_FLAT",PLACEHOLDER_16:"PLACEHOLDER_16",PLACEHOLDER_17:"PLACEHOLDER_17",PLACEHOLDER_18:"PLACEHOLDER_18",PLACEHOLDER_19:"PLACEHOLDER_19",PLACEHOLDER_20:"PLACEHOLDER_20",PLACEHOLDER_21:"PLACEHOLDER_21",PLACEHOLDER_22:"PLACEHOLDER_22",PLACEHOLDER_23:"PLACEHOLDER_23",PLACEHOLDER_24:"PLACEHOLDER_24",PLACEHOLDER_25:"PLACEHOLDER_25",PLACEHOLDER_26:"PLACEHOLDER_26",PLACEHOLDER_27:"PLACEHOLDER_27",PLACEHOLDER_28:"PLACEHOLDER_28",PLACEHOLDER_29:"PLACEHOLDER_29",PLACEHOLDER_30:"PLACEHOLDER_30",PLACEHOLDER_31:"PLACEHOLDER_31",PLACEHOLDER_32:"PLACEHOLDER_32"}),Object.freeze({UNKNOWN:"UNKNOWN",ALCOHOL:"ALCOHOL",PLACE_HOLDER_2:"PLACE_HOLDER_2",PLACE_HOLDER_3:"PLACE_HOLDER_3",PLACE_HOLDER_4:"PLACE_HOLDER_4",PLACE_HOLDER_5:"PLACE_HOLDER_5",PLACE_HOLDER_6:"PLACE_HOLDER_6",PLACE_HOLDER_7:"PLACE_HOLDER_7",PLACE_HOLDER_8:"PLACE_HOLDER_8",PLACE_HOLDER_9:"PLACE_HOLDER_9",PLACE_HOLDER_10:"PLACE_HOLDER_10"}),Object.freeze({UNKNOWN:"UNKNOWN",ALCOHOL:"ALCOHOL",PLACE_HOLDER_2:"PLACE_HOLDER_2",PLACE_HOLDER_3:"PLACE_HOLDER_3",PLACE_HOLDER_4:"PLACE_HOLDER_4",PLACE_HOLDER_5:"PLACE_HOLDER_5",PLACE_HOLDER_6:"PLACE_HOLDER_6",PLACE_HOLDER_7:"PLACE_HOLDER_7",PLACE_HOLDER_8:"PLACE_HOLDER_8",PLACE_HOLDER_9:"PLACE_HOLDER_9",PLACE_HOLDER_10:"PLACE_HOLDER_10"}),Object.freeze({UNKNOWN:"UNKNOWN",INSTAGRAM:"INSTAGRAM",PLACEHOLDER_2:"PLACEHOLDER_2",PLACEHOLDER_3:"PLACEHOLDER_3",PLACEHOLDER_4:"PLACEHOLDER_4",PLACEHOLDER_5:"PLACEHOLDER_5",PLACEHOLDER_6:"PLACEHOLDER_6",PLACEHOLDER_7:"PLACEHOLDER_7",PLACEHOLDER_8:"PLACEHOLDER_8",PLACEHOLDER_9:"PLACEHOLDER_9",PLACEHOLDER_10:"PLACEHOLDER_10"}),Object.freeze({STORE_OPENING_SOON:"STORE_OPENING_SOON",STORE_CLOSING_SOON:"STORE_CLOSING_SOON",STORE_CLOSED:"STORE_CLOSED",NOT_ACCEPTING_ORDERS:"NOT_ACCEPTING_ORDERS",TOO_FAR_TO_DELIVER:"TOO_FAR_TO_DELIVER",NO_COURIERS_NEARBY:"NO_COURIERS_NEARBY",CLOSING_TOO_SOON_TO_DELIVER:"CLOSING_TOO_SOON_TO_DELIVER",PLACEHOLDER_2:"PLACEHOLDER_2",AVAILABLE:"AVAILABLE",UNKNOWN:"UNKNOWN"}),Object.freeze({CAMERA:"CAMERA",GALLERY:"GALLERY",DISMISS:"DISMISS"}),Object.freeze({NONE:"NONE",JPEG:"JPEG",PNG:"PNG"}),Object.freeze({NEW_VERTICALS:"NEW_VERTICALS",RESTAURANT:"RESTAURANT"})},96729:(E,e,t)=>{t.d(e,{F:()=>R});var O=t(74369),_=t(10306),L=t(39463);const R=()=>{const{getQueueFromCache:E}=(0,_.iQ)(),e=(0,L.l)();return{notifyExternalSyncToCart:(0,O.useCallback)((t=>{let{storeId:O,cartId:_}=t;if(!e)return;E({type:"storeId",storeId:O}).notifyExternalChanges({type:"cartUpdated",draftOrderId:_})}),[e,E]),notifyDiscardedOrder:(0,O.useCallback)((t=>{let{storeId:O}=t;if(!e)return;E({type:"storeId",storeId:O}).notifyExternalChanges({type:"cartDiscarded"})}),[e,E]),notifyOrderCompleted:(0,O.useCallback)((t=>{let{storeId:O}=t;if(!e)return;E({type:"storeId",storeId:O}).notifyExternalChanges({type:"cartOrdered"})}),[e,E])}}},41117:(E,e,t)=>{t.d(e,{D:()=>O});const O={standardHeaderPayload:"standardHeaderPayload",storeHeaderPayload:"storeHeaderPayload",bannerHeaderPayload:"bannerHeaderPayload",sponsoredDisplayBannerHeaderPayload:"sponsoredDisplayBannerHeaderPayload"}},75618:(E,e,t)=>{t.d(e,{p:()=>O});let O=function(E){return E.horizontalGridPayload="horizontalGridPayload",E.verticalGridPayload="verticalGridPayload",E.exploreMenuPayload="exploreMenuPayload",E.standardItemsPayload="standardItemsPayload",E.eaterMessagingPayload="eaterMessagingPayload",E.categoryItemPayload="categoryItemPayload",E.specialRequestPayload="specialRequestPayload",E.emptyStatePayload="emptyStatePayload",E.adCanvasPayload="adCanvasPayload",E.bundleStorePayload="bundleStorePayload",E.aisleShortcutItems="aisleShortcutItems",E.activeCartPayload="activeCartPayload",E.comboItemsPayload="comboItemsPayload",E.unknown="unknown",E}({})},57578:(E,e,t)=>{t.d(e,{A4:()=>d,E0:()=>S,EH:()=>U,F5:()=>u,FA:()=>A,Mo:()=>a,S8:()=>P,Tm:()=>l,Wo:()=>T,Yx:()=>c,dK:()=>R,ex:()=>N,fg:()=>i,jm:()=>I,kR:()=>n,qY:()=>o,uw:()=>H,xZ:()=>s});var O=t(67526),_=t(75618),L=t(41117);function R(E){return Object.entries(E||{}).reduce(((E,e)=>{let[t,O]=e;return E+O.reduce(((E,e)=>E+(A(e)?.catalogItems?.length||0)),0)}),0)}function a(E){return`${E.sourceType}-${E.storeUuid}-${E.sectionUuid}-${E.subsectionUuid}-${E.itemUuid}`}function A(E){return E.payload?.type===_.p.standardItemsPayload?E.payload.standardItemsPayload:null}function r(E){return E.payload?.type===_.p.categoryItemPayload?E.payload.categoryItemPayload:null}function T(E){if(!E)return null;const e=A(E);return e?.catalogSectionHeaderPayload?.type===L.D.sponsoredDisplayBannerHeaderPayload?e?.catalogSectionHeaderPayload.sponsoredDisplayBannerHeaderPayload:null}function n(E){return Object.values(E||{}).flat().find((E=>E.type===O.LK.BUNDLE_STORE))}function S(E){if(!E)return null;const e=A(E);if(e)return D(e);const t=function(E){return E.payload?.type===_.p.bundleStorePayload?E.payload.bundleStorePayload:null}(E);if(t){const E=t.title?.richTextElements?.[0];if("text"===E?.type)return E.text?.text?.text}const O=r(E);if(O){const E=O?.title;return E||""}const L=function(E){return E.payload?.type===_.p.adCanvasPayload?E.payload?.adCanvasPayload:null}(E);if(L){return C(L)||""}return null}const C=E=>{if(!E)return"";const e=E?.adsExperimentalStorePayload?.parent?.title;return U(e)&&function(E){return"text"===E?.type}(e?.label?.richText?.richTextElements?.[0])?e?.label?.richText?.richTextElements?.[0]?.text?.text?.text:""},D=E=>{if(!E)return"";{const e=E.catalogSectionHeaderPayload;if(E.titleV2){return(E.titleV2?.richTextElements||[]).filter((E=>"text"===E.type)).map((E=>"text"in E?E.text?.text?.text:"")).join(" ").trim()||""}if(E.title)return E.title?.text;if(e)switch(e?.type){case L.D.standardHeaderPayload:return"text"===e?.standardHeaderPayload?.title?.richTextElements?.[0]?.type?e?.standardHeaderPayload?.title?.richTextElements?.[0]?.text?.text?.text:"";case L.D.storeHeaderPayload:return"text"===e?.storeHeaderPayload?.title?.richTextElements?.[0]?.type?e?.storeHeaderPayload?.title?.richTextElements?.[0]?.text?.text?.text:"";case L.D.bannerHeaderPayload:return"text"===e?.bannerHeaderPayload?.title?.richTextElements?.[0]?.type?e?.bannerHeaderPayload?.title?.richTextElements?.[0]?.text?.text?.text:"";default:return""}}return""};function I(E){switch(E.payload?.type){case _.p.standardItemsPayload:return A(E)?.ctaMetadata?.ctaUri||"";case _.p.categoryItemPayload:return r(E)?.ctaUri||""}return""}function N(E){if(!E)return null;const e=A(E);return e?e?.ctaMetadata:null}function P(E){const e=(E||[]).filter((E=>E.imageUrl)).slice(0,3);return{visibleItems:e,itemsWithoutImagesCount:(E||[]).length-e.length}}function o(E,e,t){if(!E||!t)return[];let O=E;return e&&t&&t[e]&&(O=t[e]),O??[]}function l(E,e){let t=0;return E.reduce(((E,O)=>{const L=O.catalogSectionUUID;if(!L||O.payload?.type!==_.p.standardItemsPayload)return E;const R=O.payload?.standardItemsPayload?.catalogItems||[];if(t+R.length>=e){const O=e-t;return t+=O,{...E,[L]:O}}return t+=R.length,{...E,[L]:R.length}}),{})}function d(E,e){return E.map((E=>{const t=E?.reviewText?.text||"";if(t.length<=e)return E;let O=e;for(;" "!==t[O]&&O>0;)O--;return{...E,reviewText:{...E.reviewText,text:`${t.slice(0,O)}...`}}}))}const c=E=>{let{catalogItem:e,sectionUuid:t,catalogSectionUuid:O,isGrocery:_,isMerchantOffersEnabled:L}=E;return!_&&L?t:e.sectionUuid?e.sectionUuid:O},s=(E,e)=>{let t="";if(!E?.endorsement?.text||"confidence_builders_eater_endorsed"!==E?.endorsementAnalyticsTag)return E?.endorsement?.text;{const O=E.endorsement.text.split(",");"treatment_1"===e&&(t=parseInt(O[0])<60?"":O[0]+"% ("+O[1]+")"),"treatment_2"===e&&(t=parseInt(O[0])<80?"":O[0]+"% ("+O[1]+")")}return t},H=(E,e)=>{let t=0,O=0,L=0;return"treatment_1"!==e&&"treatment_2"!==e||E?.forEach((E=>{E?.payload?.type===_.p.standardItemsPayload&&E?.payload?.standardItemsPayload&&(E?.payload?.standardItemsPayload?.catalogItems||[]).forEach((E=>{O=++O,"confidence_builders_eater_endorsed"===E.endorsementAnalyticsTag&&(t=++t,s(E,e)&&(L=++L))}))})),{totalMenuItems:O,totalMenuItemsWithRatings:t,totalMenuItemsWithRatingsInTreatment:L}},i=E=>!!E.type&&[String(O.LK.BUNDLE_STORE),String(O.LK.HORIZONTAL_GRID),String(O.LK.VERTICAL_GRID),String(O.LK.EATER_MESSAGE),String(O.LK.AD_CANVAS),String(O.LK.ACTIVE_CART),String(O.LK.AISLE_SHORTCUTS)].includes(E.type);function U(E){return"label"===E?.type}function u(E){return Boolean(E?.ctaUri)&&Boolean(E?.ctaMetadata?.ctaLabel)}}}]);